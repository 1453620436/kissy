<script type="jade" id="testJade">
doctype html
html(lang="en")
    head
        title= pageTitle
        script(type='text/javascript').
            if (foo) {
                bar(1 + 5)
            }
    body
        h1 Jade - node template engine
        #container.col
        if youAreUsingJade
            p You are amazing
        else
            p Get on it!
        p.
            Jade is a terse and simple
            templating language with a
            strong focus on performance
            and powerful features.
        ul
            each val, index in lis
                li= index + ': ' + val.d





</script>
<script type="xtpl" id="testXtpl">
<!DOCTYPE html>
<html lang="en">
<head>
    <title>{{title}}</title>
    <script type="text/javascript">
    if (foo) {
        bar(1 + 5)
    }
    &lt;/script>
</head>
<body>
    <h1>Jade - node template engine</h1>
    <div id="container" class="col"></div>
    {{#if (youAreUsingJade)}}
        <p>You are amazing</p>
    {{else}}
        <p>Get on it!</p>
    {{/if}}
    <p>Jade is a terse and simple
        templating language with a
        strong focus on performance
        and powerful features.</p>
    <ul>
    {{#each (lis)}}
        <li>{{xindex}}: {{d}}</li>
    </ul>
    {{/each}}
</body>
</html>





</script>
<script type="handlebars" id="testHandlebars">
<!DOCTYPE html>
<html lang="en">
<head>
    <title>{{title}}</title>
    <script type="text/javascript">
    if (foo) {
        bar(1 + 5)
    }
    &lt;/script>
</head>
<body>
    <h1>Jade - node template engine</h1>
    <div id="container" class="col"></div>
    {{#if youAreUsingJade}}
        <p>You are amazing</p>
    {{else}}
        <p>Get on it!</p>
    {{/if}}
    <p>Jade is a terse and simple
        templating language with a
        strong focus on performance
        and powerful features.</p>
    <ul>
    {{#each lis}}
        <li>{{@index}}: {{d}}</li>
    </ul>
    {{/each}}
</body>
</html>





</script>
<script src="jade.js"></script>
<script src="handlebars-v1.3.0.js"></script>
<script src="/kissy/build/seed.js"></script>
<script src="/kissy/src/package.js"></script>
<button id="startJade">startJade</button>
<button id="startXtpl">startXtpl</button>
<button id="startHandlebars">startHandlebars</button>
<script>
    (function () {
        var getElementById = function (str) {
            return document.getElementById(str);
        };

        (function () {
            // Compile a function
            var fn = jade.compile(getElementById('testJade').innerHTML.trim());
            getElementById('startJade').onclick = function () {
                console.time('jade');
                for (var i = 0; i < 10000; i++) {
                    // Render the function
                    var html = fn({
                        pageTitle: 'Jade Demo',
                        youAreUsingJade: true,
                        lis: [
                            {d: 'one'},
                            {d: 'two'},
                            {d: 'three'}
                        ]
                    });
                }
                console.timeEnd('jade');
                //console.log(html);
            };
        })();

        (function () {
            var fn = Handlebars.compile(getElementById('testHandlebars').innerHTML.trim());
            fn({
                pageTitle: 'Jade Demo',
                youAreUsingJade: true,
                lis: [
                    {d: 'one'},
                    {d: 'two'},
                    {d: 'three'}
                ]
            });
            getElementById('startHandlebars').onclick = function () {
                console.time('handleBars');
                var debug;
                for (var i = 0; i < 10000; i++) {
                    // Render the function
                    //debugger;debug=1;
                    var html = fn({
                        pageTitle: 'Jade Demo',
                        youAreUsingJade: true,
                        lis: [
                            {d: 'one'},
                            {d: 'two'},
                            {d: 'three'}
                        ]
                    });
                    if(debug){
                        break;
                    }
                }
                //console.log(html);
                console.timeEnd('handleBars');
            };
        })();

        KISSY.use('xtemplate', function (S, XTemplate) {
            var str = getElementById('testXtpl').innerHTML.trim();
            new XTemplate(str);
            getElementById('startXtpl').onclick = function () {
                console.time('xtpl');
                var debug;
                var tpl = new XTemplate(str);
                for (var i = 0; i < 10000; i++) {
                    //debugger;debug=1;
                    var html = tpl.render({
                        pageTitle: 'Jade Demo',
                        youAreUsingJade: true,
                        lis: [
                            {d: 'one'},
                            {d: 'two'},
                            {d: 'three'}
                        ]
                    });
                    if(debug){
                        break;
                    }
                }
                console.timeEnd('xtpl');
            };
        });
    })();
</script>
