/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 13 23:48
*/
KISSY.add("anim/transition",["dom","./base"],function(g,k){function q(c){for(var b=g.keys(c),d={},a=0,e=b.length;a<e;a++)d[l(b[a]).name]=c[b[a]];return d}function r(c){var b="";g.each(c,function(c,a){b&&(b+=",");b+=a+" "+c.duration+"s "+c.easing+" "+c.delay+"s"});return b}function s(c,b){var d=1,a=b.propertyName,e=c._propsData;e[a]&&1!==e[a].pos&&(e[a].pos=1,g.each(e,function(a){if(1!==a.pos)return d=0,!1}),d&&c.stop(!0))}function m(c,b,d){g.each(t,function(a){c[d?"removeEventListener":"addEventListener"](a,
b,!1)})}function h(c,b,d,a,e){var f=this;if(!(f instanceof h))return new h(c,b,d,a,e);h.superclass.constructor.apply(f,arguments);f._onTransitionEnd=function(a){s(f,a)}}var i=k("dom"),n=k("./base"),l=g.Feature.getCssVendorInfo,o=l("transition"),p=o.propertyNamePrefix,t=p?[p.toLowerCase()+"TransitionEnd"]:["transitionend","webkitTransitionEnd"],j=o.propertyName;g.extend(h,n,{doStart:function(){var c=this,b=c.node,d=b.style,a,e=d[j],f={};a=c._propsData=q(c._propsData);g.each(a,function(a,e){var d=a.value,
g=i.css(b,e);"number"===typeof d&&(g=parseFloat(g));g===d&&setTimeout(function(){c._onTransitionEnd({propertyName:e})},0);f[e]=d});-1!==e.indexOf("none")?e="":e&&(e+=",");d[j]=e+r(a);m(b,c._onTransitionEnd);i.css(b,f)},beforeResume:function(){var c=this._propsData,b=g.merge(c),d=this._runTime/1E3;g.each(b,function(a,b){var f=d;a.delay>=f?a.delay-=f:(f-=a.delay,a.delay=0,a.duration>=f?a.duration-=f:delete c[b])})},doStop:function(c){var b=this.node,d=b.style,a=this._propsData,e=[],f={};m(b,this._onTransitionEnd,
1);g.each(a,function(a,d){c||(f[d]=i.css(b,d));e.push(d)});a=g.trim(d[j].replace(RegExp("(^|,)\\s*(?:"+e.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none";d[j]=a;i.css(b,f)}});g.mix(h,n.Statics);return h});
