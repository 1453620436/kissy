/*
Copyright 2013, KISSY v1.40dev
MIT Licensed
build time: Oct 22 13:57
*/
KISSY.add("anim/base/queue",function(c,e){function h(b,d,a){var d=d||g,c,j=e.data(b,i);!j&&!a&&e.data(b,i,j={});j&&(c=j[d],!c&&!a&&(c=j[d]=[]));return c}var i=c.guid("ks-queue-"+c.now()+"-"),g=c.guid("ks-queue-"+c.now()+"-"),f;return f={queueCollectionKey:i,queue:function(b,c,a){b=h(b,c);b.push(a);return b},remove:function(b,d,a){var e=h(b,d,1);e&&(a=c.indexOf(a,e),-1<a&&e.splice(a,1));e&&!e.length&&f.clearQueue(b,d);return e},clearQueues:function(b){e.removeData(b,i)},clearQueue:function(b,d){var d=
d||g,a=e.data(b,i);a&&delete a[d];c.isEmptyObject(a)&&e.removeData(b,i)},dequeue:function(b,c){var a=h(b,c,1);a&&(a.shift(),a.length||f.clearQueue(b,c));return a}}},{requires:["dom"]});
KISSY.add("anim/base/utils",function(c,e,h,i){var g=c.guid("ks-anim-unqueued-"+c.now()+"-"),f=c.guid("ks-anim-paused-"+c.now()+"-");return{saveRunningAnim:function(b){var d=b.node,a=e.data(d,g);a||e.data(d,g,a={});a[c.stamp(b)]=b},removeRunningAnim:function(b){var d=b.node,a=e.data(d,g);a&&(delete a[c.stamp(b)],c.isEmptyObject(a)&&e.removeData(d,g))},isAnimPaused:function(b){var d=e.data(b.node,f);return d?!!d[c.stamp(b)]:0},removePausedAnim:function(b){var d=b.node,a=e.data(d,f);a&&(delete a[c.stamp(b)],
c.isEmptyObject(a)&&e.removeData(d,f))},savePausedAnim:function(b){var d=b.node,a=e.data(d,f);a||e.data(d,f,a={});a[c.stamp(b)]=b},isAnimRunning:function(b){var d=e.data(b.node,g);return d?!!d[c.stamp(b)]:0},isElPaused:function(b){return(b=e.data(b,f))&&!c.isEmptyObject(b)},isElRunning:function(b){return(b=e.data(b,g))&&!c.isEmptyObject(b)},pauseOrResumeQueue:function(b,d,a){b=e.data(b,"resume"==a?f:g);b=c.merge(b);c.each(b,function(b){if(d===i||b.config.queue==d)b[a]()})},stopEl:function(b,d,a,l){a&&
(l===i?h.clearQueues(b):!1!==l&&h.clearQueue(b,l));b=e.data(b,g);b=c.merge(b);c.each(b,function(a){(l===i||a.config.queue==l)&&a.stop(d)})}}},{requires:["dom","./queue"]});
KISSY.add("anim/base",function(c,e,h,i,g){function f(a){var b;f.superclass.constructor.apply(this,arguments);this.config=a;b=a.node;c.isPlainObject(b)||(b=e.get(a.node));this.node=this.el=b;this._backupProps={};this._propsData={};if(b=a.complete)this.on("complete",b)}var b=e.NodeType,d={toggle:1,hide:1,show:1};c.extend(f,i.Target,{prepareFx:function(){},runInternal:function(){var a=this,f=a.config,j=a.node,g,i=a._backupProps,n=a._propsData,k=f.to,q=f.delay||0,o=f.duration;h.saveRunningAnim(a);if(!1===
a.fire("beforeStart"))a.stop(0);else{c.each(k,function(a,b){c.isPlainObject(a)||(a={value:a});n[b]=c.mix({delay:q,easing:f.easing,frame:f.frame,duration:o},a)});if(j.nodeType==b.ELEMENT_NODE){if(k.width||k.height)k=j.style,c.mix(i,{overflow:k.overflow,"overflow-x":k.overflowX,"overflow-y":k.overflowY}),k.overflow="hidden","inline"===e.css(j,"display")&&"none"===e.css(j,"float")&&(c.UA.ie?k.zoom=1:k.display="inline-block");var p,m;m="none"===e.css(j,"display");c.each(n,function(b,c){g=b.value;if(d[g]){if("hide"==
g&&m||"show"==g&&!m)return a.stop(1),p=!1;i[c]=e.style(j,c);"toggle"==g?g=m?"show":"hide":"hide"==g?(b.value=0,i.display="none"):(b.value=e.css(j,c),e.css(j,c,0),e.show(j))}});if(!1===p)return}a.startTime=c.now();c.isEmptyObject(n)?(a.__totalTime=1E3*o,a.__waitTimeout=setTimeout(function(){a.stop(1)},a.__totalTime)):(a.prepareFx(),a.doStart())}},isRunning:function(){return h.isAnimRunning(this)},isPaused:function(){return h.isAnimPaused(this)},pause:function(){this.isRunning()&&(this._runTime=c.now()-
this.startTime,this.__totalTime-=this._runTime,h.removeRunningAnim(this),h.savePausedAnim(this),this.__waitTimeout?clearTimeout(this.__waitTimeout):this.doStop());return this},doStop:function(){},doStart:function(){},resume:function(){var a=this;a.isPaused()&&(a.startTime=c.now()-a._runTime,h.removePausedAnim(a),h.saveRunningAnim(a),a.__waitTimeout?a.__waitTimeout=setTimeout(function(){a.stop(1)},a.__totalTime):(a.beforeResume(),a.doStart()));return a},beforeResume:function(){},run:function(){var a;
a=this.config.queue;!1===a?this.runInternal():(a=g.queue(this.node,a,this),1==a.length&&this.runInternal());return this},stop:function(a){var b=this.node,d=this.config.queue;if(this.__stopped)return this;this.__waitTimeout&&(clearTimeout(this.__waitTimeout),this.__waitTimeout=0);if(!this.isRunning()&&!this.isPaused())return!1!==d&&g.remove(b,d,this),this;this.doStop(a);h.removeRunningAnim(this);h.removePausedAnim(this);this.__stopped=1;if(a){var f;c.isEmptyObject(f=this._backupProps)||e.css(this.node,
f);this.fire("complete")}!1!==d&&(a=g.dequeue(b,d))&&a[0]&&a[0].runInternal();this.fire("end");return this}});f.Utils=h;f.Q=g;return f},{requires:["dom","./base/utils","event/custom","./base/queue"]});
