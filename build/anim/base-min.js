/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 13 23:47
*/
KISSY.add("anim/base/queue",["dom"],function(c,j){function g(c,a,l){var a=a||f,m,g=e.data(c,b);!g&&!l&&e.data(c,b,g={});g&&(m=g[a],!m&&!l&&(m=g[a]=[]));return m}var e=j("dom"),b=c.guid("ks-queue-"+c.now()+"-"),f=c.guid("ks-queue-"+c.now()+"-"),a;return a={queueCollectionKey:b,queue:function(a,c,e){a=g(a,c);a.push(e);return a},remove:function(h,d,e){var b=g(h,d,1);b&&(e=c.indexOf(e,b),-1<e&&b.splice(e,1));b&&!b.length&&a.clearQueue(h,d);return b},clearQueues:function(a){e.removeData(a,b)},clearQueue:function(a,
d){var d=d||f,l=e.data(a,b);l&&delete l[d];c.isEmptyObject(l)&&e.removeData(a,b)},dequeue:function(c,e){var b=g(c,e,1);b&&(b.shift(),b.length||a.clearQueue(c,e));return b}}});
KISSY.add("anim/base/utils",["./queue","dom"],function(c,j){var g=j("./queue"),e=j("dom"),b=c.guid("ks-anim-unqueued-"+c.now()+"-"),f=c.guid("ks-anim-paused-"+c.now()+"-");return{saveRunningAnim:function(a){var h=a.node,d=e.data(h,b);d||e.data(h,b,d={});d[c.stamp(a)]=a},removeRunningAnim:function(a){var h=a.node,d=e.data(h,b);d&&(delete d[c.stamp(a)],c.isEmptyObject(d)&&e.removeData(h,b))},isAnimPaused:function(a){var b=e.data(a.node,f);return b?!!b[c.stamp(a)]:0},removePausedAnim:function(a){var b=
a.node,d=e.data(b,f);d&&(delete d[c.stamp(a)],c.isEmptyObject(d)&&e.removeData(b,f))},savePausedAnim:function(a){var b=a.node,d=e.data(b,f);d||e.data(b,f,d={});d[c.stamp(a)]=a},isAnimRunning:function(a){var h=e.data(a.node,b);return h?!!h[c.stamp(a)]:0},isElPaused:function(a){return(a=e.data(a,f))&&!c.isEmptyObject(a)},isElRunning:function(a){return(a=e.data(a,b))&&!c.isEmptyObject(a)},pauseOrResumeQueue:function(a,h,d){a=e.data(a,"resume"===d?f:b);a=c.merge(a);c.each(a,function(a){if(void 0===h||
a.config.queue===h)a[d]()})},stopEl:function(a,h,d,f){d&&(void 0===f?g.clearQueues(a):!1!==f&&g.clearQueue(a,f));a=e.data(a,b);a=c.merge(a);c.each(a,function(a){(void 0===f||a.config.queue===f)&&a.stop(h)})}}});
KISSY.add("anim/base",["dom","./base/utils","./base/queue","promise"],function(c,j){function g(b,d,o,f,i){if(b.node)i=b;else{"string"===typeof d?(d=c.unparam(""+d,";",":"),c.each(d,function(a,b){var n=c.trim(b);n&&(d[n]=c.trim(a));(!n||n!==b)&&delete d[b]})):d=c.clone(d);if(c.isPlainObject(o))i=c.clone(o);else if(i={complete:i},o&&(i.duration=o),f)i.easing=f;i.node=b;i.to=d}i=c.merge(m,i);g.superclass.constructor.call(this);a.Defer(this);this.config=i;b=i.node;c.isPlainObject(b)||(b=e.get(i.node));
this.node=this.el=b;this._backupProps={};this._propsData={}}var e=j("dom"),b=j("./base/utils"),f=j("./base/queue"),a=j("promise"),h=e.NodeType,d=c.noop,l={toggle:1,hide:1,show:1},m={duration:1,easing:"linear"};c.extend(g,a,{prepareFx:d,runInternal:function(){var a=this,d=a.config,f=a.node,g,i=a._backupProps,j=a._propsData,k=d.to,m=d.delay||0,q=d.duration;b.saveRunningAnim(a);c.each(k,function(a,b){c.isPlainObject(a)||(a={value:a});j[b]=c.mix({delay:m,easing:d.easing,frame:d.frame,duration:q},a)});
if(f.nodeType===h.ELEMENT_NODE){if(k.width||k.height)k=f.style,c.mix(i,{overflow:k.overflow,"overflow-x":k.overflowX,"overflow-y":k.overflowY}),k.overflow="hidden","inline"===e.css(f,"display")&&"none"===e.css(f,"float")&&(10>c.UA.ieMode?k.zoom=1:k.display="inline-block");var r,p;p="none"===e.css(f,"display");c.each(j,function(b,c){g=b.value;if(l[g]){if("hide"===g&&p||"show"===g&&!p)return a.stop(!0),r=!1;i[c]=e.style(f,c);"toggle"===g&&(g=p?"show":"hide");"hide"===g?(b.value=0,i.display="none"):
(b.value=e.css(f,c),e.css(f,c,0),e.show(f))}});if(!1===r)return}a.startTime=c.now();c.isEmptyObject(j)?(a.__totalTime=1E3*q,a.__waitTimeout=setTimeout(function(){a.stop(!0)},a.__totalTime)):(a.prepareFx(),a.doStart())},isRunning:function(){return b.isAnimRunning(this)},isPaused:function(){return b.isAnimPaused(this)},pause:function(){this.isRunning()&&(this._runTime=c.now()-this.startTime,this.__totalTime-=this._runTime,b.removeRunningAnim(this),b.savePausedAnim(this),this.__waitTimeout?clearTimeout(this.__waitTimeout):
this.doStop());return this},doStop:d,doStart:d,resume:function(){var a=this;a.isPaused()&&(a.startTime=c.now()-a._runTime,b.removePausedAnim(a),b.saveRunningAnim(a),a.__waitTimeout?a.__waitTimeout=setTimeout(function(){a.stop(!0)},a.__totalTime):(a.beforeResume(),a.doStart()));return a},beforeResume:d,run:function(){var a;a=this.config.queue;!1===a?this.runInternal():(a=f.queue(this.node,a,this),1===a.length&&this.runInternal());return this},stop:function(a){var d=this.node,g=this.config.queue;if(this.isResolved()||
this.isRejected())return this;this.__waitTimeout&&(clearTimeout(this.__waitTimeout),this.__waitTimeout=0);if(!this.isRunning()&&!this.isPaused())return!1!==g&&f.remove(d,g,this),this;this.doStop(a);b.removeRunningAnim(this);b.removePausedAnim(this);var h=this.defer;if(a){var i,a=this.config.complete;c.isEmptyObject(i=this._backupProps)||e.css(this.node,i);a&&a.call(this);h.resolve([this])}else h.reject([this]);!1!==g&&(d=f.dequeue(d,g))&&d[0]&&d[0].runInternal();return this}});var s=g.Statics={isRunning:b.isElRunning,
isPaused:b.isElPaused,stop:b.stopEl,Q:f};c.each(["pause","resume"],function(a){s[a]=function(c,d){return null===d||"string"===typeof d||!1===d?b.pauseOrResumeQueue(c,d,a):b.pauseOrResumeQueue(c,void 0,a)}});return g});
