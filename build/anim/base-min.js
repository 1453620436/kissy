/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 27 22:16
*/
KISSY.add("anim/base/queue",["dom"],function(b,f){function g(a,b,h){var b=b||c,l,g=d.data(a,k);!g&&!h&&d.data(a,k,g={});g&&(l=g[b],!l&&!h&&(l=g[b]=[]));return l}var d=f("dom"),k=b.guid("ks-queue-"+b.now()+"-"),c=b.guid("ks-queue-"+b.now()+"-"),a;return a={queueCollectionKey:k,queue:function(b,a,d){b=g(b,a);b.push(d);return b},remove:function(j,d,h){var c=g(j,d,1);c&&(h=b.indexOf(h,c),-1<h&&c.splice(h,1));c&&!c.length&&a.clearQueue(j,d);return c},clearQueues:function(b){d.removeData(b,k)},clearQueue:function(a,
e){var e=e||c,h=d.data(a,k);h&&delete h[e];b.isEmptyObject(h)&&d.removeData(a,k)},dequeue:function(b,d){var c=g(b,d,1);c&&(c.shift(),c.length||a.clearQueue(b,d));return c}}});
KISSY.add("anim/base/utils",["./queue","dom"],function(b,f){var g=f("./queue"),d=f("dom"),k=b.guid("ks-anim-unqueued-"+b.now()+"-"),c=b.guid("ks-anim-paused-"+b.now()+"-");return{saveRunningAnim:function(a){var c=a.node,e=d.data(c,k);e||d.data(c,k,e={});e[b.stamp(a)]=a},removeRunningAnim:function(a){var c=a.node,e=d.data(c,k);e&&(delete e[b.stamp(a)],b.isEmptyObject(e)&&d.removeData(c,k))},isAnimPaused:function(a){var j=d.data(a.node,c);return j?!!j[b.stamp(a)]:0},removePausedAnim:function(a){var j=
a.node,e=d.data(j,c);e&&(delete e[b.stamp(a)],b.isEmptyObject(e)&&d.removeData(j,c))},savePausedAnim:function(a){var j=a.node,e=d.data(j,c);e||d.data(j,c,e={});e[b.stamp(a)]=a},isAnimRunning:function(a){var c=d.data(a.node,k);return c?!!c[b.stamp(a)]:0},isElPaused:function(a){return(a=d.data(a,c))&&!b.isEmptyObject(a)},isElRunning:function(a){return(a=d.data(a,k))&&!b.isEmptyObject(a)},pauseOrResumeQueue:function(a,j,e){a=d.data(a,"resume"===e?c:k);a=b.merge(a);b.each(a,function(b){if(void 0===j||
b.config.queue===j)b[e]()})},stopEl:function(a,c,e,h){e&&(void 0===h?g.clearQueues(a):!1!==h&&g.clearQueue(a,h));a=d.data(a,k);a=b.merge(a);b.each(a,function(b){(void 0===h||b.config.queue===h)&&b.stop(c)})}}});
KISSY.add("anim/base",["dom","ua","./base/utils","./base/queue","promise"],function(b,f){function g(a,c,e,k,i){if(a.node)i=a;else{"string"===typeof c&&(c=b.unparam(""+c,";",":"),b.each(c,function(a,o){var d=b.trim(o);d&&(c[d]=b.trim(a));(!d||d!==o)&&delete c[o]}));if(b.isPlainObject(e))i=b.clone(e);else if(i={complete:i},e&&(i.duration=e),k)i.easing=k;i.node=a;i.to=c}i=b.merge(s,i);g.superclass.constructor.call(this);j.Defer(this);this.config=i;a=i.node;b.isPlainObject(a)||(a=d.get(i.node));this.node=
this.el=a;this._backupProps={};this._propsData={};var a={},c=i.to,f;for(f in c)a[h(f)]=c[f];i.to=a}var d=f("dom"),k=f("ua"),c=f("./base/utils"),a=f("./base/queue"),j=f("promise"),e=d.NodeType,h=b.camelCase,l=b.noop,r={toggle:1,hide:1,show:1},s={duration:1,easing:"linear"};b.extend(g,j,{prepareFx:l,runInternal:function(){var a=this,h=a.config,m=a.node,g,i=a._backupProps,j=a._propsData,f=h.to,l=h.delay||0,p=h.duration;c.saveRunningAnim(a);b.each(f,function(a,c){b.isPlainObject(a)||(a={value:a});j[c]=
b.mix({delay:l,easing:h.easing,frame:h.frame,duration:p},a)});if(m.nodeType===e.ELEMENT_NODE){if(f.width||f.height)f=m.style,b.mix(i,{overflow:f.overflow,"overflow-x":f.overflowX,"overflow-y":f.overflowY}),f.overflow="hidden","inline"===d.css(m,"display")&&"none"===d.css(m,"float")&&(10>k.ieMode?f.zoom=1:f.display="inline-block");var q,n;n="none"===d.css(m,"display");b.each(j,function(b,c){g=b.value;if(r[g]){if("hide"===g&&n||"show"===g&&!n)return a.stop(!0),q=!1;i[c]=d.style(m,c);"toggle"===g&&(g=
n?"show":"hide");"hide"===g?(b.value=0,i.display="none"):(b.value=d.css(m,c),d.css(m,c,0),d.show(m))}});if(!1===q)return}a.startTime=b.now();b.isEmptyObject(j)?(a.__totalTime=1E3*p,a.__waitTimeout=setTimeout(function(){a.stop(!0)},a.__totalTime)):(a.prepareFx(),a.doStart())},isRunning:function(){return c.isAnimRunning(this)},isPaused:function(){return c.isAnimPaused(this)},pause:function(){this.isRunning()&&(this._runTime=b.now()-this.startTime,this.__totalTime-=this._runTime,c.removeRunningAnim(this),
c.savePausedAnim(this),this.__waitTimeout?clearTimeout(this.__waitTimeout):this.doStop());return this},doStop:l,doStart:l,resume:function(){var a=this;a.isPaused()&&(a.startTime=b.now()-a._runTime,c.removePausedAnim(a),c.saveRunningAnim(a),a.__waitTimeout?a.__waitTimeout=setTimeout(function(){a.stop(!0)},a.__totalTime):(a.beforeResume(),a.doStart()));return a},beforeResume:l,run:function(){var b;b=this.config.queue;!1===b?this.runInternal():(b=a.queue(this.node,b,this),1===b.length&&this.runInternal());
return this},stop:function(e){var f=this.node,g=this.config.queue;if(this.isResolved()||this.isRejected())return this;this.__waitTimeout&&(clearTimeout(this.__waitTimeout),this.__waitTimeout=0);if(!this.isRunning()&&!this.isPaused())return!1!==g&&a.remove(f,g,this),this;this.doStop(e);c.removeRunningAnim(this);c.removePausedAnim(this);var h=this.defer;if(e){var i,e=this.config.complete;b.isEmptyObject(i=this._backupProps)||d.css(this.node,i);e&&e.call(this);h.resolve([this])}else h.reject([this]);
!1!==g&&(f=a.dequeue(f,g))&&f[0]&&f[0].runInternal();return this}});var t=g.Statics={isRunning:c.isElRunning,isPaused:c.isElPaused,stop:c.stopEl,Q:a};b.each(["pause","resume"],function(a){t[a]=function(b,d){return null===d||"string"===typeof d||!1===d?c.pauseOrResumeQueue(b,d,a):c.pauseOrResumeQueue(b,void 0,a)}});return g});
