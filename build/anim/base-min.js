/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 25 17:46
*/
KISSY.add("anim/base/queue",["dom"],function(b,e){function k(b,a,i){var a=a||c,m,e=d.data(b,j);!e&&!i&&d.data(b,j,e={});e&&(m=e[a],!m&&!i&&(m=e[a]=[]));return m}var d=e("dom"),j=b.guid("ks-queue-"+b.now()+"-"),c=b.guid("ks-queue-"+b.now()+"-"),a;return a={queueCollectionKey:j,queue:function(b,a,d){b=k(b,a);b.push(d);return b},remove:function(d,f,i){var c=k(d,f,1);c&&(i=b.indexOf(i,c),-1<i&&c.splice(i,1));c&&!c.length&&a.clearQueue(d,f);return c},clearQueues:function(b){d.removeData(b,j)},clearQueue:function(a,
f){var f=f||c,i=d.data(a,j);i&&delete i[f];b.isEmptyObject(i)&&d.removeData(a,j)},dequeue:function(b,d){var c=k(b,d,1);c&&(c.shift(),c.length||a.clearQueue(b,d));return c}}});
KISSY.add("anim/base/utils",["./queue","dom"],function(b,e){var k=e("./queue"),d=e("dom"),j=b.guid("ks-anim-unqueued-"+b.now()+"-"),c=b.guid("ks-anim-paused-"+b.now()+"-");return{saveRunningAnim:function(a){var c=a.node,f=d.data(c,j);f||d.data(c,j,f={});f[b.stamp(a)]=a},removeRunningAnim:function(a){var c=a.node,f=d.data(c,j);f&&(delete f[b.stamp(a)],b.isEmptyObject(f)&&d.removeData(c,j))},isAnimPaused:function(a){var g=d.data(a.node,c);return g?!!g[b.stamp(a)]:0},removePausedAnim:function(a){var g=
a.node,f=d.data(g,c);f&&(delete f[b.stamp(a)],b.isEmptyObject(f)&&d.removeData(g,c))},savePausedAnim:function(a){var g=a.node,f=d.data(g,c);f||d.data(g,c,f={});f[b.stamp(a)]=a},isAnimRunning:function(a){var c=d.data(a.node,j);return c?!!c[b.stamp(a)]:0},isElPaused:function(a){return(a=d.data(a,c))&&!b.isEmptyObject(a)},isElRunning:function(a){return(a=d.data(a,j))&&!b.isEmptyObject(a)},pauseOrResumeQueue:function(a,e,f){a=d.data(a,"resume"===f?c:j);a=b.merge(a);b.each(a,function(b){if(void 0===e||
b.config.queue===e)b[f]()})},stopEl:function(a,c,f,e){f&&(void 0===e?k.clearQueues(a):!1!==e&&k.clearQueue(a,e));a=d.data(a,j);a=b.merge(a);b.each(a,function(b){(void 0===e||b.config.queue===e)&&b.stop(c)})}}});
KISSY.add("anim/base/short-hand",[],function(){return{background:["backgroundColor"],border:"borderBottomWidth,borderLeftWidth,borderRightWidth,borderTopWidth,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor".split(","),borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderBottom:["borderBottomWidth","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftColor"],borderTop:["borderTopWidth","borderTopColor"],borderRight:["borderRightWidth",
"borderRightColor"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/base","dom,ua,./base/utils,./base/queue,promise,./base/short-hand".split(","),function(b,e){function k(a,c,f,e,h){if(a.node)h=a;else{if(typeof c==="string"){c=b.unparam(""+c,";",":");b.each(c,function(a,d){var n=b.trim(d);n&&(c[n]=b.trim(a));(!n||n!==d)&&delete c[d]})}if(b.isPlainObject(f))h=b.clone(f);else{h={complete:h};if(f)h.duration=f;if(e)h.easing=e}h.node=a;h.to=c}h=b.merge(s,h);k.superclass.constructor.call(this);g.Defer(this);this.config=h;a=h.node;b.isPlainObject(a)||(a=
d.get(h.node));this.node=this.el=a;this._backupProps={};this._propsData={};var a={},c=h.to,j;for(j in c)a[i(j)]=c[j];h.to=a}var d=e("dom"),j=e("ua"),c=e("./base/utils"),a=e("./base/queue"),g=e("promise"),f=d.NodeType,i=b.camelCase,m=b.noop,r={toggle:1,hide:1,show:1},t=e("./base/short-hand"),s={duration:1,easing:"linear"};b.extend(k,g,{prepareFx:m,runInternal:function(){var a=this,e=a.config,l=a.node,i,h=a._backupProps,k=a._propsData,g=e.to,m=e.delay||0,p=e.duration;c.saveRunningAnim(a);b.each(g,function(a,
c){b.isPlainObject(a)||(a={value:a});k[c]=b.mix({delay:m,easing:e.easing,frame:e.frame,duration:p},a)});b.each(t,function(a,c){var e,f=k[c],n;if(f){n=f.value;e={};b.each(a,function(a){e[a]=d.css(l,a)});d.css(l,c,n);b.each(e,function(a,c){c in k||(k[c]=b.merge(f,{value:d.css(l,c)}));d.css(l,c,a)});delete k[c]}});if(l.nodeType===f.ELEMENT_NODE){if(g.width||g.height){g=l.style;b.mix(h,{overflow:g.overflow,"overflow-x":g.overflowX,"overflow-y":g.overflowY});g.overflow="hidden";if(d.css(l,"display")===
"inline"&&d.css(l,"float")==="none")j.ieMode<10?g.zoom=1:g.display="inline-block"}var q,o;o=d.css(l,"display")==="none";b.each(k,function(b,c){i=b.value;if(r[i]){if(i==="hide"&&o||i==="show"&&!o){a.stop(true);return q=false}h[c]=d.style(l,c);i==="toggle"&&(i=o?"show":"hide");if(i==="hide"){b.value=0;h.display="none"}else{b.value=d.css(l,c);d.css(l,c,0);d.show(l)}}});if(q===false)return}a.startTime=b.now();if(b.isEmptyObject(k)){a.__totalTime=p*1E3;a.__waitTimeout=setTimeout(function(){a.stop(true)},
a.__totalTime)}else{a.prepareFx();a.doStart()}},isRunning:function(){return c.isAnimRunning(this)},isPaused:function(){return c.isAnimPaused(this)},pause:function(){if(this.isRunning()){this._runTime=b.now()-this.startTime;this.__totalTime=this.__totalTime-this._runTime;c.removeRunningAnim(this);c.savePausedAnim(this);this.__waitTimeout?clearTimeout(this.__waitTimeout):this.doStop()}return this},doStop:m,doStart:m,resume:function(){var a=this;if(a.isPaused()){a.startTime=b.now()-a._runTime;c.removePausedAnim(a);
c.saveRunningAnim(a);if(a.__waitTimeout)a.__waitTimeout=setTimeout(function(){a.stop(true)},a.__totalTime);else{a.beforeResume();a.doStart()}}return a},beforeResume:m,run:function(){var b;b=this.config.queue;if(b===false)this.runInternal();else{b=a.queue(this.node,b,this);b.length===1&&this.runInternal()}return this},stop:function(e){var f=this.node,l=this.config.queue;if(this.isResolved()||this.isRejected())return this;if(this.__waitTimeout){clearTimeout(this.__waitTimeout);this.__waitTimeout=0}if(!this.isRunning()&&
!this.isPaused()){l!==false&&a.remove(f,l,this);return this}this.doStop(e);c.removeRunningAnim(this);c.removePausedAnim(this);var g=this.defer;if(e){var h,e=this.config.complete;b.isEmptyObject(h=this._backupProps)||d.css(this.node,h);e&&e.call(this);g.resolve([this])}else g.reject([this]);if(l!==false)(f=a.dequeue(f,l))&&f[0]&&f[0].runInternal();return this}});var u=k.Statics={isRunning:c.isElRunning,isPaused:c.isElPaused,stop:c.stopEl,Q:a};b.each(["pause","resume"],function(a){u[a]=function(b,d){return d===
null||typeof d==="string"||d===false?c.pauseOrResumeQueue(b,d,a):c.pauseOrResumeQueue(b,void 0,a)}});return k});
