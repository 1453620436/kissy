/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 9 13:52
*/
KISSY.add("anim/timer","dom,./base,./timer/easing,./timer/manager,./timer/fx,./timer/color,./timer/transform,./timer/short-hand".split(","),function(h,e){function c(a,b,f,l,d){if(!(this instanceof c))return new c(a,b,f,l,d);c.superclass.constructor.apply(this,arguments)}var k=e("dom"),b=e("./base"),j=e("./timer/easing"),g=e("./timer/manager"),n=e("./timer/fx");e("./timer/color");e("./timer/transform");var i=e("./timer/short-hand"),m=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;h.extend(c,b,{prepareFx:function(){var a=
this.node,b=this._propsData;h.each(b,function(a){a.duration=a.duration*1E3;a.delay=a.delay*1E3;if(typeof a.easing==="string")a.easing=j.toFn(a.easing)});h.each(i,function(f,d){var l,g=b[d],c;if(g){c=g.value;l={};h.each(f,function(b){l[b]=k.css(a,b)});k.css(a,d,c);h.each(l,function(f,d){d in b||(b[d]=h.merge(g,{value:k.css(a,d)}));k.css(a,d,f)});delete b[d]}});var f,l,d,g,c,e,q,t=0,p;h.isPlainObject(a)&&(t=1);for(f in b){l=b[f];d=l.value;e={isCustomFx:t,prop:f,anim:this,fxType:l.fxType,type:l.type,
propData:l};q=n.getFx(e);g=d;c=q.cur();d=d+"";p="";if(d=d.match(m)){g=parseFloat(d[2]);if((p=d[3])&&p!=="px"&&c){var r=0,s=g;do{++s;k.css(a,f,s+p);r=q.cur()}while(r===0);c=s/r*c;k.css(a,f,c+p)}d[1]&&(g=(d[1]==="-="?-1:1)*g+c)}e.from=c;e.to=g;e.unit=p;q.load(e);l.fx=q}},frame:function(){var a,b=1,f,l=this._propsData;for(a in l){f=l[a];f=f.fx;f.frame();if(this.isRejected()||this.isResolved())return;b=b&f.pos===1}l=h.now();a=this.config.duration*1E3;l=Math.max(0,this.startTime+a-l);this.defer.notify([this,
1-(l/a||0),l]);b&&this.stop(b)},doStop:function(a){var b,f=this._propsData;g.stop(this);if(a)for(b in f){a=f[b];(a=a.fx)&&a.frame(1)}},doStart:function(){g.start(this)}});c.Easing=j;c.Fx=n;h.mix(c,b.Statics);return h.Anim=c});
KISSY.add("anim/timer/easing",[],function(){function h(a){return a}function e(a,b,f,l){var d=3*a-3*f+1,g=3*f-6*a,c=3*a,j=3*b-3*l+1,e=3*l-6*b,h=3*b;return function(a){a:{for(var b=a,f,o,l=0;8>l;l++){o=((d*b+g)*b+c)*b-a;if(m(o)<i){a=b;break a}f=(3*d*b+2*g)*b+c;if(m(f)<i)break;b-=o/f}f=1;l=0;for(b=a;f>l;){o=((d*b+g)*b+c)*b-a;if(m(o)<i)break;0<o?f=b:l=b;b=(f+l)/2}a=b}return((j*a+e)*a+h)*a}}var c=Math.PI,k=Math.pow,b=Math.sin,j=parseFloat,g=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,n={swing:function(a){return 0.5-
Math.cos(a*c)/2},easeNone:h,linear:h,easeIn:function(a){return a*a},ease:e(0.25,0.1,0.25,1),"ease-in":e(0.42,0,1,1),"ease-out":e(0,0,0.58,1),"ease-in-out":e(0.42,0,0.58,1),"ease-out-in":e(0,0.42,1,0.58),toFn:function(a){var b;return(b=a.match(g))?e(j(b[1]),j(b[2]),j(b[3]),j(b[4])):n[a]||h},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:0-k(2,10*(a-=1))*b((a-0.075)*2*c/0.3)},elasticOut:function(a){return 0===a||1===a?a:k(2,-10*a)*b((a-0.075)*2*c/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*k(2,10*(a-=1))*b((a-0.1125)*2*c/0.45):0.5*k(2,-10*(a-=1))*b((a-0.1125)*2*c/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
f=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(f*a-b):0.5*((a-=2)*a*(f*a+b)+2)},bounceIn:function(a){return 1-n.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*n.bounceIn(2*a):0.5*n.bounceOut(2*a-1)+0.5}},i=1.0E-6,m=Math.abs;return n});
KISSY.add("anim/timer/manager",[],function(h){var e=h.stamp,c,k;c=function(b){return setTimeout(b,15)};k=function(b){clearTimeout(b)};return{runnings:{},timer:null,start:function(b){var c=e(b);this.runnings[c]||(this.runnings[c]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[e(b)];h.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=c(function g(){b.runFrames()?
b.stopTimer():b.timer=c(g)}))},stopTimer:function(){var b=this.timer;b&&(k(b),this.timer=0)},runFrames:function(){var b,c,g=this.runnings;for(b in g)g[b].frame();for(b in g){c=0;break}return void 0===c}}});
KISSY.add("anim/timer/fx",["dom"],function(h,e){function c(b){h.mix(this,b);this.pos=0;this.unit=this.unit||""}var k=e("dom");c.prototype={isCustomFx:0,constructor:c,load:function(b){h.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){if(1!==this.pos){var c=this.anim,g=this.prop,e=c.node,i=this.from,m=this.propData,a=this.to;if(void 0===b)var o=h.now(),b=m.duration,o=o-c.startTime-m.delay,b=0>=o?0:o>=b?1:m.easing(o/b);this.pos=b;i===a||0===b||(this.val=i=this.interpolate(i,a,this.pos),
m.frame?m.frame.call(this,c,this):this.isCustomFx||(void 0===i?(this.pos=1,i=a):i+=this.unit,this.val=i,"attr"===this.type?k.attr(e,g,i,1):k.css(e,g,i)))}},interpolate:function(b,c,g){return"number"===typeof b&&"number"===typeof c?Math.round(1E5*(b+(c-b)*g))/1E5:null},cur:function(){var b=this.prop,c,g,e=this.anim.node;if(this.isCustomFx)return e[b]||0;if(!(c=this.type))c=this.type=(!e.style||null==e.style[b])&&null!=k.attr(e,b,void 0,1)?"attr":"css";b="attr"===c?k.attr(e,b,void 0,1):k.css(e,b);return isNaN(g=
parseFloat(b))?!b||"auto"===b?0:b:g}};c.Factories={};c.FxTypes={};c.getFx=function(b){var e=c,g,h;if(g=b.fxType)e=c.FxTypes[g];else if(!b.isCustomFx&&(h=c.Factories[b.prop]))e=h;return new e(b)};return c});
KISSY.add("anim/timer/color",["./fx"],function(h,e){function c(b){var b=b+"",f;if(f=b.match(i))return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)];if(f=b.match(m))return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10),parseInt(f[4],10)];if(f=b.match(a)){for(b=1;b<f.length;b++)2>f[b].length&&(f[b]+=f[b]);return[parseInt(f[1],j),parseInt(f[2],j),parseInt(f[3],j)]}return n[b=b.toLowerCase()]?n[b]:[255,255,255]}function k(){k.superclass.constructor.apply(this,arguments)}var b=e("./fx"),
j=16,g=Math.floor,n={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},i=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,m=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,a=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;h.extend(k,b,{load:function(){k.superclass.load.apply(this,
arguments);this.from&&(this.from=c(this.from));this.to&&(this.to=c(this.to))},interpolate:function(a,b,c){var d=k.superclass.interpolate;if(3===a.length&&3===b.length)return"rgb("+[g(d(a[0],b[0],c)),g(d(a[1],b[1],c)),g(d(a[2],b[2],c))].join(", ")+")";if(4===a.length||4===b.length)return"rgba("+[g(d(a[0],b[0],c)),g(d(a[1],b[1],c)),g(d(a[2],b[2],c)),g(d(a[3]||1,b[3]||1,c))].join(", ")+")"}});h.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),
function(a){b.Factories[a]=k});return b.FxTypes.color=k});
KISSY.add("anim/timer/transform",["dom","./fx"],function(h,e){function c(a){a=a.split(/,/);return a=h.map(a,function(a){return b(a)})}function k(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function b(a){return Math.round(1E5*parseFloat(a))/1E5}function j(a){for(var a=a.split(")"),g=h.trim,f=-1,e=a.length-1,d,i,j=k();++f<e;)switch(d=a[f].split("("),i=g(d[0]),d=d[1],i){case "translateX":case "translateY":case "scaleX":case "scaleY":j[i]=b(d);break;case "rotate":case "skewX":case "skewY":var m=
b(d);h.endsWith(d,"deg")||(m=180*m/Math.PI);j[i]=m;break;case "translate":case "translate3d":d=d.split(",");j.translateX=b(d[0]);j.translateY=b(d[1]||0);break;case "scale":d=d.split(",");j.scaleX=b(d[0]);j.scaleY=b(d[1]||d[0]);break;case "matrix":return a=d,a=c(a),e=f=g=void 0,i=a[0],j=a[1],d=a[2],m=a[3],i*m-j*d?(g=Math.sqrt(i*i+j*j),e=(i*d+j*m)/(i*m-d*j),f=(i*m-j*d)/g,i*m<j*d&&(e=-e,g=-g)):g=f=e=0,{translateX:b(a[4]),translateY:b(a[5]),rotate:b(180*Math.atan2(j,i)/Math.PI),skewX:b(180*Math.atan(e)/
Math.PI),skewY:0,scaleX:b(g),scaleY:b(f)}}return j}function g(){g.superclass.constructor.apply(this,arguments)}var n=e("dom"),i=e("./fx"),m=h.Feature.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";h.extend(g,i,{load:function(){g.superclass.load.apply(this,arguments);this.from=(this.from=n.style(this.anim.node,"transform")||this.from)&&"none"!==this.from?j(this.from):k();this.to=this.to?j(this.to):k()},interpolate:function(a,b,c){var e=
g.superclass.interpolate,d={};d.translateX=e(a.translateX,b.translateX,c);d.translateY=e(a.translateY,b.translateY,c);d.rotate=e(a.rotate,b.rotate,c);d.skewX=e(a.skewX,b.skewX,c);d.skewY=e(a.skewY,b.skewY,c);d.scaleX=e(a.scaleX,b.scaleX,c);d.scaleY=e(a.scaleY,b.scaleY,c);return h.substitute(m+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",d)}});return i.Factories.transform=g});
KISSY.add("anim/timer/short-hand",[],function(){return{background:["backgroundColor"],border:"borderBottomWidth,borderLeftWidth,borderRightWidth,borderTopWidth,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor".split(","),borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderBottom:["borderBottomWidth","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftColor"],borderTop:["borderTopWidth","borderTopColor"],borderRight:["borderRightWidth",
"borderRightColor"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
