/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 14 22:13
*/
KISSY.add("anim/timer","dom,util,./base,./timer/easing,./timer/manager,./timer/fx,./timer/color,./timer/transform,./timer/short-hand".split(","),function(l,d){function j(a,f,g,b,c){if(!(this instanceof j))return new j(a,f,g,b,c);j.superclass.constructor.apply(this,arguments)}var k=d("dom"),e=d("util"),c=d("./base"),b=d("./timer/easing"),h=d("./timer/manager"),o=d("./timer/fx");d("./timer/color");d("./timer/transform");var p=d("./timer/short-hand"),a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;e.extend(j,c,
{prepareFx:function(){var c=this.node,f=this._propsData;e.each(f,function(a){a.duration=a.duration*1E3;a.delay=a.delay*1E3;if(typeof a.easing==="string")a.easing=b.toFn(a.easing)});e.each(p,function(a,g){var b,h=f[g],i;if(h){i=h.value;b={};e.each(a,function(a){b[a]=k.css(c,a)});k.css(c,g,i);e.each(b,function(a,g){g in f||(f[g]=e.merge(h,{value:k.css(c,g)}));k.css(c,g,a)});delete f[g]}});var g,q,h,i,j,d,n,v=0,r;e.isPlainObject(c)&&(v=1);for(g in f){q=f[g];h=q.value;d={isCustomFx:v,prop:g,anim:this,
fxType:q.fxType,type:q.type,propData:q};n=o.getFx(d);i=h;j=n.cur();h=h+"";r="";if(h=h.match(a)){i=parseFloat(h[2]);if((r=h[3])&&r!=="px"&&j){var t=0,u=i;do{++u;k.css(c,g,u+r);t=n.cur()}while(t===0);j=u/t*j;k.css(c,g,j+r)}h[1]&&(i=(h[1]==="-="?-1:1)*i+j)}d.from=j;d.to=i;d.unit=r;n.load(d);q.fx=n}},frame:function(){var a,f=1,g,b=this._propsData;for(a in b){g=b[a];g=g.fx;g.frame();if(this.isRejected()||this.isResolved())return;f=f&g.pos===1}b=e.now();a=this.config.duration*1E3;b=Math.max(0,this.startTime+
a-b);this.defer.notify([this,1-(b/a||0),b]);f&&this.stop(f)},doStop:function(a){var f,g=this._propsData;h.stop(this);if(a)for(f in g){a=g[f];(a=a.fx)&&a.frame(1)}},doStart:function(){h.start(this)}});j.Easing=b;j.Fx=o;e.mix(j,c.Statics);return l.Anim=j});
KISSY.add("anim/timer/easing",[],function(){function l(a){return a}function d(a,b,f,g){var c=3*a-3*f+1,h=3*f-6*a,i=3*a,e=3*b-3*g+1,j=3*g-6*b,d=3*b;return function(a){a:{for(var f=a,g,b,k=0;8>k;k++){b=((c*f+h)*f+i)*f-a;if(p(b)<o){a=f;break a}g=(3*c*f+2*h)*f+i;if(p(g)<o)break;f-=b/g}g=1;k=0;for(f=a;g>k;){b=((c*f+h)*f+i)*f-a;if(p(b)<o)break;0<b?g=f:k=f;f=(g+k)/2}a=f}return((e*a+j)*a+d)*a}}var j=Math.PI,k=Math.pow,e=Math.sin,c=parseFloat,b=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,h={swing:function(a){return 0.5-
Math.cos(a*j)/2},easeNone:l,linear:l,easeIn:function(a){return a*a},ease:d(0.25,0.1,0.25,1),"ease-in":d(0.42,0,1,1),"ease-out":d(0,0,0.58,1),"ease-in-out":d(0.42,0,0.58,1),"ease-out-in":d(0,0.42,1,0.58),toFn:function(a){var e;return(e=a.match(b))?d(c(e[1]),c(e[2]),c(e[3]),c(e[4])):h[a]||l},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:0-k(2,10*(a-=1))*e((a-0.075)*2*j/0.3)},elasticOut:function(a){return 0===a||1===a?a:k(2,-10*a)*e((a-0.075)*2*j/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*k(2,10*(a-=1))*e((a-0.1125)*2*j/0.45):0.5*k(2,-10*(a-=1))*e((a-0.1125)*2*j/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
f=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(f*a-b):0.5*((a-=2)*a*(f*a+b)+2)},bounceIn:function(a){return 1-h.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*h.bounceIn(2*a):0.5*h.bounceOut(2*a-1)+0.5}},o=1.0E-6,p=Math.abs;return h});
KISSY.add("anim/timer/manager",["util"],function(l,d){var j=d("util"),k=j.stamp,e,c;e=function(b){return setTimeout(b,15)};c=function(b){clearTimeout(b)};return{runnings:{},timer:null,start:function(b){var c=k(b);this.runnings[c]||(this.runnings[c]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[k(b)];j.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;
b.timer||(b.timer=e(function o(){b.runFrames()?b.stopTimer():b.timer=e(o)}))},stopTimer:function(){var b=this.timer;b&&(c(b),this.timer=0)},runFrames:function(){var b,c,e=this.runnings;for(b in e)e[b].frame();for(b in e){c=0;break}return void 0===c}}});
KISSY.add("anim/timer/fx",["util","dom"],function(l,d){function j(c){k.mix(this,c);this.pos=0;this.unit=this.unit||""}var k=d("util"),e=d("dom");j.prototype={isCustomFx:0,constructor:j,load:function(c){k.mix(this,c);this.pos=0;this.unit=this.unit||""},frame:function(c){if(1!==this.pos){var b=this.anim,h=this.prop,j=b.node,d=this.from,a=this.propData,l=this.to;if(void 0===c)var f=k.now(),c=a.duration,f=f-b.startTime-a.delay,c=0>=f?0:f>=c?1:a.easing(f/c);this.pos=c;d===l||0===c||(this.val=d=this.interpolate(d,
l,this.pos),a.frame?a.frame.call(this,b,this):this.isCustomFx||(void 0===d?(this.pos=1,d=l):d+=this.unit,this.val=d,"attr"===this.type?e.attr(j,h,d,1):e.css(j,h,d)))}},interpolate:function(c,b,e){return"number"===typeof c&&"number"===typeof b?Math.round(1E5*(c+(b-c)*e))/1E5:null},cur:function(){var c=this.prop,b,h,d=this.anim.node;if(this.isCustomFx)return d[c]||0;if(!(b=this.type))b=this.type=(!d.style||null==d.style[c])&&null!=e.attr(d,c,void 0,1)?"attr":"css";c="attr"===b?e.attr(d,c,void 0,1):
e.css(d,c);return isNaN(h=parseFloat(c))?!c||"auto"===c?0:c:h}};j.Factories={};j.FxTypes={};j.getFx=function(c){var b=j,d,e;if(d=c.fxType)b=j.FxTypes[d];else if(!c.isCustomFx&&(e=j.Factories[c.prop]))b=e;return new b(c)};return j});
KISSY.add("anim/timer/color",["util","./fx"],function(l,d){function j(f){var f=f+"",g;if(g=f.match(p))return[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10)];if(g=f.match(a))return[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10),parseInt(g[4],10)];if(g=f.match(s)){for(f=1;f<g.length;f++)2>g[f].length&&(g[f]+=g[f]);return[parseInt(g[1],b),parseInt(g[2],b),parseInt(g[3],b)]}return o[f=f.toLowerCase()]?o[f]:[255,255,255]}function k(){k.superclass.constructor.apply(this,arguments)}var e=d("util"),
c=d("./fx"),b=16,h=Math.floor,o={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},p=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,s=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;e.extend(k,c,{load:function(){k.superclass.load.apply(this,
arguments);this.from&&(this.from=j(this.from));this.to&&(this.to=j(this.to))},interpolate:function(a,b,c){var d=k.superclass.interpolate;if(3===a.length&&3===b.length)return"rgb("+[h(d(a[0],b[0],c)),h(d(a[1],b[1],c)),h(d(a[2],b[2],c))].join(", ")+")";if(4===a.length||4===b.length)return"rgba("+[h(d(a[0],b[0],c)),h(d(a[1],b[1],c)),h(d(a[2],b[2],c)),h(d(a[3]||1,b[3]||1,c))].join(", ")+")"}});e.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),
function(a){c.Factories[a]=k});return c.FxTypes.color=k});
KISSY.add("anim/timer/transform",["util","feature","dom","./fx"],function(l,d){function j(a){a=a.split(/,/);return a=h.map(a,function(a){return e(a)})}function k(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function e(a){return Math.round(1E5*parseFloat(a))/1E5}function c(a){for(var a=a.split(")"),b=h.trim,c=-1,d=a.length-1,i,l,m=k();++c<d;)switch(i=a[c].split("("),l=b(i[0]),i=i[1],l){case "translateX":case "translateY":case "scaleX":case "scaleY":m[l]=e(i);break;
case "rotate":case "skewX":case "skewY":var n=e(i);h.endsWith(i,"deg")||(n=180*n/Math.PI);m[l]=n;break;case "translate":case "translate3d":i=i.split(",");m.translateX=e(i[0]);m.translateY=e(i[1]||0);break;case "scale":i=i.split(",");m.scaleX=e(i[0]);m.scaleY=e(i[1]||i[0]);break;case "matrix":return a=i,a=j(a),d=c=b=void 0,l=a[0],m=a[1],i=a[2],n=a[3],l*n-m*i?(b=Math.sqrt(l*l+m*m),d=(l*i+m*n)/(l*n-i*m),c=(l*n-m*i)/b,l*n<m*i&&(d=-d,b=-b)):b=c=d=0,{translateX:e(a[4]),translateY:e(a[5]),rotate:e(180*Math.atan2(m,
l)/Math.PI),skewX:e(180*Math.atan(d)/Math.PI),skewY:0,scaleX:e(b),scaleY:e(c)}}return m}function b(){b.superclass.constructor.apply(this,arguments)}var h=d("util"),o=d("feature"),p=d("dom"),a=d("./fx"),s=o.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";h.extend(b,a,{load:function(){b.superclass.load.apply(this,arguments);this.from=(this.from=p.style(this.anim.node,"transform")||this.from)&&"none"!==this.from?c(this.from):k();this.to=
this.to?c(this.to):k()},interpolate:function(a,c,d){var e=b.superclass.interpolate,i={};i.translateX=e(a.translateX,c.translateX,d);i.translateY=e(a.translateY,c.translateY,d);i.rotate=e(a.rotate,c.rotate,d);i.skewX=e(a.skewX,c.skewX,d);i.skewY=e(a.skewY,c.skewY,d);i.scaleX=e(a.scaleX,c.scaleX,d);i.scaleY=e(a.scaleY,c.scaleY,d);return h.substitute(s+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",i)}});return a.Factories.transform=b});
KISSY.add("anim/timer/short-hand",[],function(){return{background:["backgroundColor"],border:"borderBottomWidth,borderLeftWidth,borderRightWidth,borderTopWidth,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor".split(","),borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderBottom:["borderBottomWidth","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftColor"],borderTop:["borderTopWidth","borderTopColor"],borderRight:["borderRightWidth",
"borderRightColor"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
