/*
Copyright 2013, KISSY v1.50dev
MIT Licensed
build time: Nov 27 00:37
*/
KISSY.add("anim/timer/easing",[],function(){function l(a){return a}function i(a,b,h,c){var n=3*a-3*h+1,j=3*h-6*a,d=3*a,g=3*b-3*c+1,m=3*c-6*b,e=3*b;return function(a){a:{for(var b=a,c,h,k=0;8>k;k++){h=((n*b+j)*b+d)*b-a;if(o(h)<p){a=b;break a}c=(3*n*b+2*j)*b+d;if(o(c)<p)break;b-=h/c}c=1;k=0;for(b=a;c>k;){h=((n*b+j)*b+d)*b-a;if(o(h)<p)break;0<h?c=b:k=b;b=(c+k)/2}a=b}return((g*a+m)*a+e)*a}}var f=Math.PI,g=Math.pow,b=Math.sin,d=parseFloat,m=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,e={swing:function(a){return-Math.cos(a*
f)/2+0.5},easeNone:l,linear:l,easeIn:function(a){return a*a},ease:i(0.25,0.1,0.25,1),"ease-in":i(0.42,0,1,1),"ease-out":i(0,0,0.58,1),"ease-in-out":i(0.42,0,0.58,1),"ease-out-in":i(0,0.42,1,0.58),toFn:function(a){var b;return(b=a.match(m))?i(d(b[1]),d(b[2]),d(b[3]),d(b[4])):e[a]||l},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(g(2,10*(a-=1))*b(2*(a-0.075)*f/0.3))},elasticOut:function(a){return 0===a||1===a?a:g(2,-10*a)*b(2*(a-0.075)*f/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*g(2,10*(a-=1))*b(2*(a-0.1125)*f/0.45):0.5*g(2,-10*(a-=1))*b(2*(a-0.1125)*f/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
h=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(h*a-b):0.5*((a-=2)*a*(h*a+b)+2)},bounceIn:function(a){return 1-e.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*e.bounceIn(2*a):0.5*e.bounceOut(2*a-1)+0.5}},p=1.0E-6,o=Math.abs;return e});
KISSY.add("anim/timer/manager",[],function(l){var i=l.stamp,f,g;f=function(b){return setTimeout(b,15)};g=function(b){clearTimeout(b)};return{runnings:{},timer:null,start:function(b){var d=i(b);this.runnings[d]||(this.runnings[d]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[i(b)];l.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=f(function m(){b.runFrames()?
b.stopTimer():b.timer=f(m)}))},stopTimer:function(){var b=this.timer;b&&(g(b),this.timer=0)},runFrames:function(){var b,d,g=this.runnings;for(b in g)g[b].frame();for(b in g){d=0;break}return void 0===d}}});
KISSY.add("anim/timer/fx",["dom"],function(l,i){function f(b){l.mix(this,b);this.pos=0;this.unit=this.unit||""}var g=i("dom");f.prototype={isCustomFx:0,constructor:f,load:function(b){l.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){if(1!==this.pos){var d=this.anim,f=this.prop,e=d.node,i=this.from,o=this.propData,a=this.to;if(void 0===b)var k=l.now(),b=o.duration,k=k-d.startTime-o.delay,b=0>=k?0:k>=b?1:o.easing(k/b);this.pos=b;i===a||0===b||(this.val=b=this.interpolate(i,a,this.pos),
o.frame?o.frame.call(this,d,this):this.isCustomFx||(void 0===b?(this.pos=1,b=a,f+" update directly ! : "+b+" : "+i+" : "+a):b+=this.unit,this.val=b,"attr"==this.type?g.attr(e,f,b,1):g.css(e,f,b)))}},interpolate:function(b,d,g){if("number"===typeof b&&"number"===typeof d)return Math.round(1E5*(b+(d-b)*g))/1E5},cur:function(){var b=this.prop,d,f,e=this.anim.node;if(this.isCustomFx)return e[b]||0;if(!(d=this.type))d=this.type=(!e.style||null==e.style[b])&&null!=g.attr(e,b,void 0,1)?"attr":"css";b="attr"==
d?g.attr(e,b,void 0,1):g.css(e,b);return isNaN(f=parseFloat(b))?!b||"auto"===b?0:b:f}};f.Factories={};f.FxTypes={};f.getFx=function(b){var d=f,g,e;if(g=b.fxType)d=f.FxTypes[g];else if(!b.isCustomFx&&(e=f.Factories[b.prop]))d=e;return new d(b)};return f});
KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer/color",["./fx","./short-hand"],function(l,i){function f(b){var b=b+"",c;if(c=b.match(o))return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])];if(c=b.match(a))return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])];if(c=b.match(k)){for(b=1;b<c.length;b++)2>c[b].length&&(c[b]+=c[b]);return[parseInt(c[1],m),parseInt(c[2],m),parseInt(c[3],m)]}if(p[b=b.toLowerCase()])return p[b];"only allow rgb or hex color string : "+b;return[255,255,255]}function g(){g.superclass.constructor.apply(this,
arguments)}var b=i("./fx"),d=i("./short-hand"),m=16,e=Math.floor,p={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},o=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,k=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;
d.background.push("backgroundColor");d.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];d.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");d.borderBottom.push("borderBottomColor");d.borderLeft.push("borderLeftColor");d.borderRight.push("borderRightColor");d.borderTop.push("borderTopColor");l.extend(g,b,{load:function(){g.superclass.load.apply(this,arguments);this.from&&(this.from=f(this.from));this.to&&(this.to=f(this.to))},
interpolate:function(a,b,k){var d=g.superclass.interpolate;if(3==a.length&&3==b.length)return"rgb("+[e(d(a[0],b[0],k)),e(d(a[1],b[1],k)),e(d(a[2],b[2],k))].join(", ")+")";if(4==a.length||4==b.length)return"rgba("+[e(d(a[0],b[0],k)),e(d(a[1],b[1],k)),e(d(a[2],b[2],k)),e(d(a[3]||1,b[3]||1,k))].join(", ")+")";"unknown value : "+a}});l.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){b.Factories[a]=g});return b.FxTypes.color=
g});
KISSY.add("anim/timer/transform",["dom","./fx"],function(l,i){function f(d){d=d.split(/,/);return d=l.map(d,function(a){return b(a)})}function g(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function b(b){return Math.round(1E5*parseFloat(b))/1E5}function d(d){for(var d=d.split(")"),a=l.trim,k=-1,h=d.length-1,c,n,j=g();++k<h;)switch(c=d[k].split("("),n=a(c[0]),c=c[1],n){case "translateX":case "translateY":case "scaleX":case "scaleY":j[n]=b(c);break;case "rotate":case "skewX":case "skewY":var e=b(c);
l.endsWith(c,"deg")||(e=180*e/Math.PI);j[n]=e;break;case "translate":case "translate3d":c=c.split(",");j.translateX=b(c[0]);j.translateY=b(c[1]||0);break;case "scale":c=c.split(",");j.scaleX=b(c[0]);j.scaleY=b(c[1]||c[0]);break;case "matrix":return d=c,d=f(d),h=k=a=void 0,n=d[0],j=d[1],c=d[2],e=d[3],n*e-j*c?(a=Math.sqrt(n*n+j*j),n/=a,j/=a,h=n*c+j*e,c-=n*h,e-=j*h,k=Math.sqrt(c*c+e*e),c/=k,e/=k,h/=k,n*e<j*c&&(n=-n,j=-j,h=-h,a=-a)):a=k=h=0,{translateX:b(d[4]),translateY:b(d[5]),rotate:b(180*Math.atan2(j,
n)/Math.PI),skewX:b(180*Math.atan(h)/Math.PI),skewY:0,scaleX:b(a),scaleY:b(k)}}return j}function m(){m.superclass.constructor.apply(this,arguments)}var e=i("dom"),p=i("./fx");l.extend(m,p,{load:function(){m.superclass.load.apply(this,arguments);this.from=(this.from=e.style(this.anim.node,"transform")||this.from)&&"none"!=this.from?d(this.from):g();this.to=this.to?d(this.to):g()},interpolate:function(b,a,d){var h=m.superclass.interpolate,c={};c.translateX=h(b.translateX,a.translateX,d);c.translateY=
h(b.translateY,a.translateY,d);c.rotate=h(b.rotate,a.rotate,d);c.skewX=h(b.skewX,a.skewX,d);c.skewY=h(b.skewY,a.skewY,d);c.scaleX=h(b.scaleX,a.scaleX,d);c.scaleY=h(b.scaleY,a.scaleY,d);return l.substitute("translate3d({translateX}px,{translateY}px,0) rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",c)}});return p.Factories.transform=m});
KISSY.add("anim/timer","dom,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(","),function(l,i){function f(){var a;f.superclass.constructor.apply(this,arguments);l.each(a=this.to,function(b,c){var d=o(c);if(c!=d){a[d]=a[c];delete a[c]}})}var g=i("dom"),b=i("./base"),d=i("./timer/easing"),m=i("./timer/manager"),e=i("./timer/fx"),p=i("./timer/short-hand");i("./timer/color");i("./timer/transform");var o=g._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;
l.extend(f,b,{prepareFx:function(){var b=this.node,h=this._propsData;l.each(h,function(a){a.duration=a.duration*1E3;a.delay=a.delay*1E3;if(typeof a.easing=="string")a.easing=d.toFn(a.easing)});l.each(p,function(a,c){var d,e=h[c],f;if(e){f=e.value;d={};l.each(a,function(a){d[a]=g.css(b,a)});g.css(b,c,f);l.each(d,function(a,c){c in h||(h[c]=l.merge(e,{value:g.css(b,c)}));g.css(b,c,a)});delete h[c]}});var c,f,j,i,m,o,r,u=0,q;l.isPlainObject(b)&&(u=1);for(c in h){f=h[c];j=f.value;o={isCustomFx:u,prop:c,
anim:this,fxType:f.fxType,type:f.type,propData:f};r=e.getFx(o);i=j;m=r.cur();j=j+"";q="";if(j=j.match(a)){i=parseFloat(j[2]);if((q=j[3])&&q!=="px"&&m){var s=0,t=i;do{++t;g.css(b,c,t+q);s=r.cur()}while(s==0);m=t/s*m;g.css(b,c,m+q)}j[1]&&(i=(j[1]==="-="?-1:1)*i+m)}o.from=m;o.to=i;o.unit=q;r.load(o);f.fx=r}},frame:function(){var a,b=1,c,d=this._propsData;for(a in d){c=d[a];c=c.fx;c.frame();if(this.isRejected()||this.isResolved())return;b=b&c.pos==1}d=l.now();a=this.config.duration*1E3;d=Math.max(0,this.startTime+
a-d);this.defer.notify([this,1-(d/a||0),d]);b&&this.stop(b)},doStop:function(a){var b,c=this._propsData;m.stop(this);if(a)for(b in c){a=c[b];(a=a.fx)&&a.frame(1)}},doStart:function(){m.start(this)}});f.Easing=d;f.Fx=e;return f});
