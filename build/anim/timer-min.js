/*
Copyright 2013, KISSY v1.50
MIT Licensed
build time: Dec 3 23:12
*/
KISSY.add("anim/timer/easing",[],function(){function k(a){return a}function h(a,b,o,f){var c=3*a-3*o+1,t=3*o-6*a,i=3*a,e=3*b-3*f+1,d=3*f-6*b,g=3*b;return function(a){a:{for(var b=a,o,l,f=0;8>f;f++){l=((c*b+t)*b+i)*b-a;if(j(l)<p){a=b;break a}o=(3*c*b+2*t)*b+i;if(j(o)<p)break;b-=l/o}o=1;f=0;for(b=a;o>f;){l=((c*b+t)*b+i)*b-a;if(j(l)<p)break;0<l?o=b:f=b;b=(o+f)/2}a=b}return((e*a+d)*a+g)*a}}var d=Math.PI,g=Math.pow,b=Math.sin,c=parseFloat,m=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,e={swing:function(a){return-Math.cos(a*
d)/2+0.5},easeNone:k,linear:k,easeIn:function(a){return a*a},ease:h(0.25,0.1,0.25,1),"ease-in":h(0.42,0,1,1),"ease-out":h(0,0,0.58,1),"ease-in-out":h(0.42,0,0.58,1),"ease-out-in":h(0,0.42,1,0.58),toFn:function(a){var b;return(b=a.match(m))?h(c(b[1]),c(b[2]),c(b[3]),c(b[4])):e[a]||k},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(g(2,10*(a-=1))*b(2*(a-0.075)*d/0.3))},elasticOut:function(a){return 0===a||1===a?a:g(2,-10*a)*b(2*(a-0.075)*d/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*g(2,10*(a-=1))*b(2*(a-0.1125)*d/0.45):0.5*g(2,-10*(a-=1))*b(2*(a-0.1125)*d/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
o=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(o*a-b):0.5*((a-=2)*a*(o*a+b)+2)},bounceIn:function(a){return 1-e.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*e.bounceIn(2*a):0.5*e.bounceOut(2*a-1)+0.5}},p=1.0E-6,j=Math.abs;return e});
KISSY.add("anim/timer/manager",[],function(k){var h=k.stamp,d,g;d=function(b){return setTimeout(b,15)};g=function(b){clearTimeout(b)};return{runnings:{},timer:null,start:function(b){var c=h(b);this.runnings[c]||(this.runnings[c]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[h(b)];k.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=d(function m(){b.runFrames()?
b.stopTimer():b.timer=d(m)}))},stopTimer:function(){var b=this.timer;b&&(g(b),this.timer=0)},runFrames:function(){var b,c,d=this.runnings;for(b in d)d[b].frame();for(b in d){c=0;break}return void 0===c}}});
KISSY.add("anim/timer/fx",["dom"],function(k,h){function d(b){k.mix(this,b);this.pos=0;this.unit=this.unit||""}var g=h("dom");d.prototype={isCustomFx:0,constructor:d,load:function(b){k.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){if(1!==this.pos){var c=this.anim,d=this.prop,e=c.node,h=this.from,j=this.propData,a=this.to;if(void 0===b)var l=k.now(),b=j.duration,l=l-c.startTime-j.delay,b=0>=l?0:l>=b?1:j.easing(l/b);this.pos=b;h===a||0===b||(this.val=b=this.interpolate(h,a,this.pos),
j.frame?j.frame.call(this,c,this):this.isCustomFx||(void 0===b?(this.pos=1,b=a,d+" update directly ! : "+b+" : "+h+" : "+a):b+=this.unit,this.val=b,"attr"===this.type?g.attr(e,d,b,1):g.css(e,d,b)))}},interpolate:function(b,c,d){if("number"===typeof b&&"number"===typeof c)return Math.round(1E5*(b+(c-b)*d))/1E5},cur:function(){var b=this.prop,c,d,e=this.anim.node;if(this.isCustomFx)return e[b]||0;if(!(c=this.type))c=this.type=(!e.style||null==e.style[b])&&null!=g.attr(e,b,void 0,1)?"attr":"css";b="attr"===
c?g.attr(e,b,void 0,1):g.css(e,b);return isNaN(d=parseFloat(b))?!b||"auto"===b?0:b:d}};d.Factories={};d.FxTypes={};d.getFx=function(b){var c=d,g,e;if(g=b.fxType)c=d.FxTypes[g];else if(!b.isCustomFx&&(e=d.Factories[b.prop]))c=e;return new c(b)};return d});
KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer/color",["./fx","./short-hand"],function(k,h){function d(b){var b=b+"",f;if(f=b.match(j))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])];if(f=b.match(a))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])];if(f=b.match(l)){for(b=1;b<f.length;b++)2>f[b].length&&(f[b]+=f[b]);return[parseInt(f[1],m),parseInt(f[2],m),parseInt(f[3],m)]}if(p[b=b.toLowerCase()])return p[b];"only allow rgb or hex color string : "+b;return[255,255,255]}function g(){g.superclass.constructor.apply(this,
arguments)}var b=h("./fx"),c=h("./short-hand"),m=16,e=Math.floor,p={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},j=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,l=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;
c.background.push("backgroundColor");c.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];c.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");c.borderBottom.push("borderBottomColor");c.borderLeft.push("borderLeftColor");c.borderRight.push("borderRightColor");c.borderTop.push("borderTopColor");k.extend(g,b,{load:function(){g.superclass.load.apply(this,arguments);this.from&&(this.from=d(this.from));this.to&&(this.to=d(this.to))},
interpolate:function(a,b,l){var c=g.superclass.interpolate;if(3===a.length&&3===b.length)return"rgb("+[e(c(a[0],b[0],l)),e(c(a[1],b[1],l)),e(c(a[2],b[2],l))].join(", ")+")";if(4===a.length||4===b.length)return"rgba("+[e(c(a[0],b[0],l)),e(c(a[1],b[1],l)),e(c(a[2],b[2],l)),e(c(a[3]||1,b[3]||1,l))].join(", ")+")";"unknown value : "+a}});k.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){b.Factories[a]=g});return b.FxTypes.color=
g});
KISSY.add("anim/timer/transform",["dom","./fx"],function(k,h){function d(a){a=a.split(/,/);return a=k.map(a,function(a){return c(a)})}function g(a){var a=d(a),b,f,q,e=a[0],i=a[1],g=a[2],h=a[3];e*h-i*g?(b=Math.sqrt(e*e+i*i),e/=b,i/=b,q=e*g+i*h,g-=e*q,h-=i*q,f=Math.sqrt(g*g+h*h),q/=f,e*(h/f)<i*(g/f)&&(e=-e,i=-i,q=-q,b=-b)):b=f=q=0;return{translateX:c(a[4]),translateY:c(a[5]),rotate:c(180*Math.atan2(i,e)/Math.PI),skewX:c(180*Math.atan(q)/Math.PI),skewY:0,scaleX:c(b),scaleY:c(f)}}function b(){return{translateX:0,translateY:0,
rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function c(a){return Math.round(1E5*parseFloat(a))/1E5}function m(a){function e(a){return-1<a.indexOf("deg")?parseInt(a,10)*(2*Math.PI/360):parseFloat(a)}for(var a=a.split(")"),f=k.trim,d=-1,h=a.length-1,i,j,n=b();++d<h;)switch(i=a[d].split("("),j=f(i[0]),i=i[1],j){case "translateX":case "translateY":case "scaleX":case "scaleY":n[j]=c(i);break;case "rotate":case "skewX":case "skewY":n[j]=c(e(i));break;case "skew":i=i.split(",");n.skewX=c(e(i[0]));1<i.length&&
(n.skewY=c(e(i[1])));break;case "translate":case "translate3d":i=i.split(",");n.translateX=c(i[0]);n.translateY=c(i[1]||0);break;case "scale":i=i.split(",");n.scaleX=c(i[0]);n.scaleY=c(i[1]||i[0]);break;case "matrix":return g(i)}return n}function e(){e.superclass.constructor.apply(this,arguments)}var p=h("dom"),j=h("./fx"),a=k.Features.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";k.extend(e,j,{load:function(){e.superclass.load.apply(this,
arguments);this.from=(this.from=p.style(this.anim.node,"transform")||this.from)&&"none"!==this.from?m(this.from):b();this.to=this.to?m(this.to):b()},interpolate:function(b,c,f){var d=e.superclass.interpolate,g={};g.translateX=d(b.translateX,c.translateX,f);g.translateY=d(b.translateY,c.translateY,f);g.rotate=d(b.rotate,c.rotate,f);g.skewX=d(b.skewX,c.skewX,f);g.skewY=d(b.skewY,c.skewY,f);g.scaleX=d(b.scaleX,c.scaleX,f);g.scaleY=d(b.scaleY,c.scaleY,f);return k.substitute(a+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",
g)}});return j.Factories.transform=e});
KISSY.add("anim/timer","dom,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(","),function(k,h){function d(){var a;d.superclass.constructor.apply(this,arguments);k.each(a=this.to,function(b,c){var d=j(c);if(c!==d){a[d]=a[c];delete a[c]}})}var g=h("dom"),b=h("./base"),c=h("./timer/easing"),m=h("./timer/manager"),e=h("./timer/fx"),p=h("./timer/short-hand");h("./timer/color");h("./timer/transform");var j=g._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;
k.extend(d,b,{prepareFx:function(){var b=this.node,d=this._propsData;k.each(d,function(a){a.duration=a.duration*1E3;a.delay=a.delay*1E3;if(typeof a.easing==="string")a.easing=c.toFn(a.easing)});k.each(p,function(a,c){var f,e=d[c],h;if(e){h=e.value;f={};k.each(a,function(a){f[a]=g.css(b,a)});g.css(b,c,h);k.each(f,function(a,c){c in d||(d[c]=k.merge(e,{value:g.css(b,c)}));g.css(b,c,a)});delete d[c]}});var f,h,j,i,m,n,s,w=0,r;k.isPlainObject(b)&&(w=1);for(f in d){h=d[f];j=h.value;n={isCustomFx:w,prop:f,
anim:this,fxType:h.fxType,type:h.type,propData:h};s=e.getFx(n);i=j;m=s.cur();j=j+"";r="";if(j=j.match(a)){i=parseFloat(j[2]);if((r=j[3])&&r!=="px"&&m){var u=0,v=i;do{++v;g.css(b,f,v+r);u=s.cur()}while(u===0);m=v/u*m;g.css(b,f,m+r)}j[1]&&(i=(j[1]==="-="?-1:1)*i+m)}n.from=m;n.to=i;n.unit=r;s.load(n);h.fx=s}},frame:function(){var a,b=1,c,d=this._propsData;for(a in d){c=d[a];c=c.fx;c.frame();if(this.isRejected()||this.isResolved())return;b=b&c.pos===1}d=k.now();a=this.config.duration*1E3;d=Math.max(0,
this.startTime+a-d);this.defer.notify([this,1-(d/a||0),d]);b&&this.stop(b)},doStop:function(a){var b,c=this._propsData;m.stop(this);if(a)for(b in c){a=c[b];(a=a.fx)&&a.frame(1)}},doStart:function(){m.start(this)}});d.Easing=c;d.Fx=e;return d});
