/*
Copyright 2013, KISSY v1.40dev
MIT Licensed
build time: Sep 3 19:05
*/
KISSY.add("anim/timer/easing",function(){function k(a){return a}function h(a,b,c,l){var s=3*a-3*c+1,e=3*c-6*a,d=3*a,k=3*b-3*l+1,i=3*l-6*b,h=3*b;return function(a){a:{for(var c=a,b,l,g=0;8>g;g++){l=((s*c+e)*c+d)*c-a;if(m(l)<f){a=c;break a}b=(3*s*c+2*e)*c+d;if(m(b)<f)break;c-=l/b}b=1;g=0;for(c=a;b>g;){l=((s*c+e)*c+d)*c-a;if(m(l)<f)break;0<l?b=c:g=c;c=(b+g)/2}a=c}return((k*a+i)*a+h)*a}}var j=Math.PI,i=Math.pow,n=Math.sin,b=parseFloat,d=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,e={swing:function(a){return-Math.cos(a*
j)/2+0.5},easeNone:k,linear:k,easeIn:function(a){return a*a},ease:h(0.25,0.1,0.25,1),"ease-in":h(0.42,0,1,1),"ease-out":h(0,0,0.58,1),"ease-in-out":h(0.42,0,0.58,1),"ease-out-in":h(0,0.42,1,0.58),toFn:function(a){var g;return(g=a.match(d))?h(b(g[1]),b(g[2]),b(g[3]),b(g[4])):e[a]||k},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(i(2,10*(a-=1))*n((a-0.075)*2*j/0.3))},elasticOut:function(a){return 0===a||1===a?a:i(2,-10*a)*n((a-0.075)*2*j/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*i(2,10*(a-=1))*n((a-0.1125)*2*j/0.45):0.5*i(2,-10*(a-=1))*n((a-0.1125)*2*j/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
c=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(c*a-b):0.5*((a-=2)*a*(c*a+b)+2)},bounceIn:function(a){return 1-e.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*e.bounceIn(2*a):0.5*e.bounceOut(2*a-1)+0.5}},f=1.0E-6,m=Math.abs;return e});
KISSY.add("anim/timer/manager",function(k,h){var j=k.stamp,i,n;i=function(b){return setTimeout(b,15)};n=function(b){clearTimeout(b)};return{runnings:{},timer:null,start:function(b){var d=j(b);this.runnings[d]||(this.runnings[d]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[j(b)];k.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=i(function e(){b.runFrames()?
b.stopTimer():b.timer=i(e)}))},stopTimer:function(){var b=this.timer;b&&(n(b),this.timer=0)},runFrames:function(){var b,d,e=this.runnings;for(b in e)e[b].frame();for(b in e){d=0;break}return d===h}}});
KISSY.add("anim/timer/fx",function(k,h,j){function i(b){k.mix(this,b);this.pos=0;this.unit=this.unit||""}function n(b,d){return(!b.style||null==b.style[d])&&null!=h.attr(b,d,j,1)?1:0}i.prototype={isCustomFx:0,constructor:i,load:function(b){k.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){if(1!==this.pos){var d=this.anim,e=this.prop,f=d.node,m=this.from,a=this.propData,g=this.to;if(b===j)var c=k.now(),b=a.duration,c=c-d.startTime-a.delay,b=0>=c?0:c>=b?1:a.easing(c/b);this.pos=b;
m===g||0===b||(this.val=m=this.interpolate(m,g,this.pos),a.frame?a.frame.call(this,d,this):this.isCustomFx||(m===j?(this.pos=1,m=g):m+=this.unit,this.val=m,n(f,e)?h.attr(f,e,m,1):h.css(f,e,m)))}},interpolate:function(b,d,e){return"number"===typeof b&&"number"===typeof d?Math.round(1E5*(b+(d-b)*e))/1E5:j},cur:function(){var b=this.prop,d=this.anim.node;if(this.isCustomFx)return d[b]||0;if(n(d,b))return h.attr(d,b,j,1);var e,b=h.css(d,b);return isNaN(e=parseFloat(b))?!b||"auto"===b?0:b:e}};i.Factories=
{};i.getFx=function(b){var d=i,e;if(!b.isCustomFx&&(e=i.Factories[b.prop]))d=e;return new d(b)};return i},{requires:["dom"]});
KISSY.add("anim/timer/short-hand",function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer/color",function(k,h,j,i){function n(c){var c=c+"",b;if(b=c.match(m))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(b=c.match(a))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])];if(b=c.match(g)){for(c=1;c<b.length;c++)2>b[c].length&&(b[c]+=b[c]);return[parseInt(b[1],d),parseInt(b[2],d),parseInt(b[3],d)]}return f[c=c.toLowerCase()]?f[c]:[255,255,255]}function b(){b.superclass.constructor.apply(this,arguments)}var d=16,e=Math.floor,f={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},m=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,g=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;i.background.push("backgroundColor");i.borderColor=["borderBottomColor","borderLeftColor",
"borderRightColor","borderTopColor"];i.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");i.borderBottom.push("borderBottomColor");i.borderLeft.push("borderLeftColor");i.borderRight.push("borderRightColor");i.borderTop.push("borderTopColor");k.extend(b,j,{load:function(){b.superclass.load.apply(this,arguments);this.from&&(this.from=n(this.from));this.to&&(this.to=n(this.to))},interpolate:function(a,g,f){var d=b.superclass.interpolate;return 3==a.length&&3==g.length?
"rgb("+[e(d(a[0],g[0],f)),e(d(a[1],g[1],f)),e(d(a[2],g[2],f))].join(", ")+")":4==a.length||4==g.length?"rgba("+[e(d(a[0],g[0],f)),e(d(a[1],g[1],f)),e(d(a[2],g[2],f)),e(d(a[3]||1,g[3]||1,f))].join(", ")+")":k.log("anim/color unknown value : "+a)}});k.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){j.Factories[a]=b});return b},{requires:["dom","./fx","./short-hand"]});
KISSY.add("anim/timer/transform",function(k,h,j){function i(f){f=f.split(/,/);return f=k.map(f,function(f){return b(f)})}function n(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function b(b){return Math.round(1E5*parseFloat(b))/1E5}function d(f){for(var f=f.split(")"),d=k.trim,a=-1,g=f.length-1,c,l,e=n();++a<g;)switch(c=f[a].split("("),l=d(c[0]),c=c[1],l){case "translateX":case "translateY":case "scaleX":case "scaleY":e[l]=b(c);break;case "rotate":case "skewX":case "skewY":var h=
b(c);k.endsWith(c,"deg")||(h=180*h/Math.PI);e[l]=h;break;case "translate":case "translate3d":c=c.split(",");e.translateX=b(c[0]);e.translateY=b(c[1]||0);break;case "scale":c=c.split(",");e.scaleX=b(c[0]);e.scaleY=b(c[1]||c[0]);break;case "matrix":return f=c,f=i(f),g=a=d=void 0,l=f[0],e=f[1],c=f[2],h=f[3],l*h-e*c?(d=Math.sqrt(l*l+e*e),l/=d,e/=d,g=l*c+e*h,c-=l*g,h-=e*g,a=Math.sqrt(c*c+h*h),c/=a,h/=a,g/=a,l*h<e*c&&(l=-l,e=-e,g=-g,d=-d)):d=a=g=0,{translateX:b(f[4]),translateY:b(f[5]),rotate:b(180*Math.atan2(e,
l)/Math.PI),skewX:b(180*Math.atan(g)/Math.PI),skewY:0,scaleX:b(d),scaleY:b(a)}}return e}function e(){e.superclass.constructor.apply(this,arguments)}k.extend(e,j,{load:function(){e.superclass.load.apply(this,arguments);this.from=(this.from=h.style(this.anim.node,"transform")||this.from)&&"none"!=this.from?d(this.from):n();this.to=this.to?d(this.to):n()},interpolate:function(b,d,a){var g=e.superclass.interpolate,c={};c.translateX=g(b.translateX,d.translateX,a);c.translateY=g(b.translateY,d.translateY,
a);c.rotate=g(b.rotate,d.rotate,a);c.skewX=g(b.skewX,d.skewX,a);c.skewY=g(b.skewY,d.skewY,a);c.scaleX=g(b.scaleX,d.scaleX,a);c.scaleY=g(b.scaleY,d.scaleY,a);return k.substitute("translate3d({translateX}px,{translateY}px,0) rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",c)}});return j.Factories.transform=e},{requires:["dom","./fx"]});
KISSY.add("anim/timer",function(k,h,j,i,n,b,d,e){function f(){var a;f.superclass.constructor.apply(this,arguments);k.each(a=this.to,function(b,d){var e=m(d);d!=e&&(a[e]=a[d],delete a[d])})}var m=h._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;k.extend(f,i,{prepareFx:function(){var b=this.node,c=this._propsData;k.each(c,function(a){a.duration*=1E3;a.delay*=1E3;"string"==typeof a.easing&&(a.easing=n.toFn(a.easing))});k.each(e,function(a,d){var e,f=c[d],l;f&&(l=f.value,e={},k.each(a,function(a){e[a]=
h.css(b,a)}),h.css(b,d,l),k.each(e,function(a,d){d in c||(c[d]=k.merge(f,{value:h.css(b,d)}));h.css(b,d,a)}),delete c[d])});var f,i,j,m,o,p,r,v=0,q;k.isPlainObject(b)&&(v=1);for(f in c){i=c[f];j=i.value;p={isCustomFx:v,prop:f,anim:this,propData:i};r=d.getFx(p);m=j;o=r.cur();j+="";q="";if(j=j.match(a)){m=parseFloat(j[2]);if((q=j[3])&&"px"!==q&&o){var t=0,u=m;do++u,h.css(b,f,u+q),t=r.cur();while(0==t);o*=u/t;h.css(b,f,o+q)}j[1]&&(m=("-="===j[1]?-1:1)*m+o)}p.from=o;p.to=m;p.unit=q;r.load(p);i.fx=r}},
frame:function(){var a,b=1,d,e=this._propsData;for(a in e){d=e[a];d=d.fx;d.frame();if(this.__stopped)return;b&=1==d.pos}(!1===this.fire("step")||b)&&this.stop(b)},doStop:function(a){var c,d=this._propsData;b.stop(this);if(a)for(c in d)a=d[c],a=a.fx,a.frame(1)},doStart:function(){b.start(this)}});f.Easing=n;f.Fx=d;return f},{requires:"dom,event,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(",")});
