/*
Copyright 2013, KISSY v1.50dev
MIT Licensed
build time: Nov 11 23:43
*/
KISSY.add("anim/timer/easing",function(){function i(a){return a}function h(a,c,f,b){var d=3*a-3*f+1,g=3*f-6*a,e=3*a,i=3*c-3*b+1,h=3*b-6*c,k=3*c;return function(a){a:{for(var c=a,b,f,n=0;8>n;n++){f=((d*c+g)*c+e)*c-a;if(o(f)<l){a=c;break a}b=(3*d*c+2*g)*c+e;if(o(b)<l)break;c-=f/b}b=1;n=0;for(c=a;b>n;){f=((d*c+g)*c+e)*c-a;if(o(f)<l)break;0<f?b=c:n=c;c=(b+n)/2}a=c}return((i*a+h)*a+k)*a}}var e=Math.PI,d=Math.pow,b=Math.sin,c=parseFloat,g=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,k={swing:function(a){return-Math.cos(a*
e)/2+0.5},easeNone:i,linear:i,easeIn:function(a){return a*a},ease:h(0.25,0.1,0.25,1),"ease-in":h(0.42,0,1,1),"ease-out":h(0,0,0.58,1),"ease-in-out":h(0.42,0,0.58,1),"ease-out-in":h(0,0.42,1,0.58),toFn:function(a){var b;return(b=a.match(g))?h(c(b[1]),c(b[2]),c(b[3]),c(b[4])):k[a]||i},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(d(2,10*(a-=1))*b(2*(a-0.075)*e/0.3))},elasticOut:function(a){return 0===a||1===a?a:d(2,-10*a)*b(2*(a-0.075)*e/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*d(2,10*(a-=1))*b(2*(a-0.1125)*e/0.45):0.5*d(2,-10*(a-=1))*b(2*(a-0.1125)*e/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var c,
b=(c=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(b*a-c):0.5*((a-=2)*a*(b*a+c)+2)},bounceIn:function(a){return 1-k.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*k.bounceIn(2*a):0.5*k.bounceOut(2*a-1)+0.5}},l=1.0E-6,o=Math.abs;return k});
KISSY.add("anim/timer/manager",function(i){var h=i.stamp,e,d;e=function(b){return setTimeout(b,15)};d=function(b){clearTimeout(b)};return{runnings:{},timer:null,start:function(b){var c=h(b);this.runnings[c]||(this.runnings[c]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[h(b)];i.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=e(function g(){b.runFrames()?
b.stopTimer():b.timer=e(g)}))},stopTimer:function(){var b=this.timer;b&&(d(b),this.timer=0)},runFrames:function(){var b,c,d=this.runnings;for(b in d)d[b].frame();for(b in d){c=0;break}return void 0===c}}});
KISSY.add("anim/timer/fx",function(i,h){function e(d){i.mix(this,d);this.pos=0;this.unit=this.unit||""}e.prototype={isCustomFx:0,constructor:e,load:function(d){i.mix(this,d);this.pos=0;this.unit=this.unit||""},frame:function(d){if(1!==this.pos){var b=this.anim,c=this.prop,g=b.node,e=this.from,l=this.propData,o=this.to;if(void 0===d)var a=i.now(),d=l.duration,a=a-b.startTime-l.delay,d=0>=a?0:a>=d?1:l.easing(a/d);this.pos=d;e===o||0===d||(this.val=d=this.interpolate(e,o,this.pos),l.frame?l.frame.call(this,
b,this):this.isCustomFx||(void 0===d?(this.pos=1,d=o,c+" update directly ! : "+d+" : "+e+" : "+o):d+=this.unit,this.val=d,"attr"==this.type?h.attr(g,c,d,1):h.css(g,c,d)))}},interpolate:function(d,b,c){if("number"===typeof d&&"number"===typeof b)return Math.round(1E5*(d+(b-d)*c))/1E5},cur:function(){var d=this.prop,b,c,g=this.anim.node;if(this.isCustomFx)return g[d]||0;if(!(b=this.type))b=this.type=(!g.style||null==g.style[d])&&null!=h.attr(g,d,void 0,1)?"attr":"css";d="attr"==b?h.attr(g,d,void 0,
1):h.css(g,d);return isNaN(c=parseFloat(d))?!d||"auto"===d?0:d:c}};e.Factories={};e.FxTypes={};e.getFx=function(d){var b=e,c,g;if(c=d.fxType)b=e.FxTypes[c];else if(!d.isCustomFx&&(g=e.Factories[d.prop]))b=g;return new b(d)};return e},{requires:["dom"]});
KISSY.add("anim/timer/short-hand",function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer/color",function(i,h,e){function d(c){var c=c+"",b;if(b=c.match(re_RGB))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(b=c.match(re_RGBA))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])];if(b=c.match(re_hex)){for(c=1;c<b.length;c++)2>b[c].length&&(b[c]+=b[c]);return[parseInt(b[1],HEX_BASE),parseInt(b[2],HEX_BASE),parseInt(b[3],HEX_BASE)]}if(KEYWORDS[c=c.toLowerCase()])return KEYWORDS[c];"only allow rgb or hex color string : "+c;return[255,255,255]}
function b(){b.superclass.constructor.apply(this,arguments)}re_hex=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;COLORS="backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(",");e.background.push("backgroundColor");e.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];e.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");e.borderBottom.push("borderBottomColor");e.borderLeft.push("borderLeftColor");
e.borderRight.push("borderRightColor");e.borderTop.push("borderTopColor");i.extend(b,h,{load:function(){b.superclass.load.apply(this,arguments);this.from&&(this.from=d(this.from));this.to&&(this.to=d(this.to))},interpolate:function(c,d,e){var l=b.superclass.interpolate;if(3==c.length&&3==d.length)return"rgb("+[floor(l(c[0],d[0],e)),floor(l(c[1],d[1],e)),floor(l(c[2],d[2],e))].join(", ")+")";if(4==c.length||4==d.length)return"rgba("+[floor(l(c[0],d[0],e)),floor(l(c[1],d[1],e)),floor(l(c[2],d[2],e)),
floor(l(c[3]||1,d[3]||1,e))].join(", ")+")";"unknown value : "+c}});i.each(COLORS,function(c){h.Factories[c]=b});return h.FxTypes.color=b},{requires:["./fx","./short-hand"]});
KISSY.add("anim/timer/transform",function(i,h,e){function d(b){b=b.split(/,/);return b=i.map(b,function(b){return c(b)})}function b(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function c(b){return Math.round(1E5*parseFloat(b))/1E5}function g(e){for(var e=e.split(")"),h=i.trim,a=-1,n=e.length-1,f,m,j=b();++a<n;)switch(f=e[a].split("("),m=h(f[0]),f=f[1],m){case "translateX":case "translateY":case "scaleX":case "scaleY":j[m]=c(f);break;case "rotate":case "skewX":case "skewY":var g=
c(f);i.endsWith(f,"deg")||(g=180*g/Math.PI);j[m]=g;break;case "translate":case "translate3d":f=f.split(",");j.translateX=c(f[0]);j.translateY=c(f[1]||0);break;case "scale":f=f.split(",");j.scaleX=c(f[0]);j.scaleY=c(f[1]||f[0]);break;case "matrix":return e=f,e=d(e),n=a=h=void 0,m=e[0],j=e[1],f=e[2],g=e[3],m*g-j*f?(h=Math.sqrt(m*m+j*j),m/=h,j/=h,n=m*f+j*g,f-=m*n,g-=j*n,a=Math.sqrt(f*f+g*g),f/=a,g/=a,n/=a,m*g<j*f&&(m=-m,j=-j,n=-n,h=-h)):h=a=n=0,{translateX:c(e[4]),translateY:c(e[5]),rotate:c(180*Math.atan2(j,
m)/Math.PI),skewX:c(180*Math.atan(n)/Math.PI),skewY:0,scaleX:c(h),scaleY:c(a)}}return j}function k(){k.superclass.constructor.apply(this,arguments)}i.extend(k,e,{load:function(){k.superclass.load.apply(this,arguments);this.from=(this.from=h.style(this.anim.node,"transform")||this.from)&&"none"!=this.from?g(this.from):b();this.to=this.to?g(this.to):b()},interpolate:function(b,c,a){var d=k.superclass.interpolate,f={};f.translateX=d(b.translateX,c.translateX,a);f.translateY=d(b.translateY,c.translateY,
a);f.rotate=d(b.rotate,c.rotate,a);f.skewX=d(b.skewX,c.skewX,a);f.skewY=d(b.skewY,c.skewY,a);f.scaleX=d(b.scaleX,c.scaleX,a);f.scaleY=d(b.scaleY,c.scaleY,a);return i.substitute("translate3d({translateX}px,{translateY}px,0) rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",f)}});return e.Factories.transform=k},{requires:["dom","./fx"]});
KISSY.add("anim/timer",function(i,h,e,d,b,c,g){function k(){var a;k.superclass.constructor.apply(this,arguments);i.each(a=this.to,function(b,c){var d=l(c);c!=d&&(a[d]=a[c],delete a[c])})}var l=h._camelCase,o=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;i.extend(k,e,{prepareFx:function(){var a=this.node,b=this._propsData;i.each(b,function(a){a.duration*=1E3;a.delay*=1E3;"string"==typeof a.easing&&(a.easing=d.toFn(a.easing))});i.each(g,function(c,d){var e,f=b[d],g;f&&(g=f.value,e={},i.each(c,function(b){e[b]=
h.css(a,b)}),h.css(a,d,g),i.each(e,function(c,d){d in b||(b[d]=i.merge(f,{value:h.css(a,d)}));h.css(a,d,c)}),delete b[d])});var e,m,j,l,k,p,r,u=0,q;i.isPlainObject(a)&&(u=1);for(e in b){m=b[e];j=m.value;p={isCustomFx:u,prop:e,anim:this,fxType:m.fxType,type:m.type,propData:m};r=c.getFx(p);l=j;k=r.cur();j+="";q="";if(j=j.match(o)){l=parseFloat(j[2]);if((q=j[3])&&"px"!==q&&k){var s=0,t=l;do++t,h.css(a,e,t+q),s=r.cur();while(0==s);k*=t/s;h.css(a,e,k+q)}j[1]&&(l=("-="===j[1]?-1:1)*l+k)}p.from=k;p.to=l;
p.unit=q;r.load(p);m.fx=r}},frame:function(){var a,b=1,c,d=this._propsData;for(a in d){c=d[a];c=c.fx;c.frame();if(this.isRejected()||this.isResolved())return;b&=1==c.pos}d=i.now();a=1E3*this.config.duration;d=Math.max(0,this.startTime+a-d);this.defer.notify([this,1-(d/a||0),d]);b&&this.stop(b)},doStop:function(a){var c,d=this._propsData;b.stop(this);if(a)for(c in d)a=d[c],(a=a.fx)&&a.frame(1)},doStart:function(){b.start(this)}});k.Easing=d;k.Fx=c;return k},{requires:"dom,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(",")});
