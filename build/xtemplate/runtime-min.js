/*
Copyright 2013, KISSY v1.40dev
MIT Licensed
build time: Sep 11 14:27
*/
KISSY.add("xtemplate/runtime/commands",function(f){var l;return l={each:function(d,a){var b=a.params[0],c="",g;if(b){var k=[0,0].concat(d);if(f.isArray(b)){g=b.length;for(var n=0;n<g;n++)k[0]=b[n],k[1]={xcount:g,xindex:n},c+=a.fn(k)}else for(g in b)k[0]=b[g],k[1]={xindex:g},c+=a.fn(k)}else a.inverse&&(c=a.inverse(d));return c},"with":function(d,a){var b=a.params[0],c=[0].concat(d),g="";b?(c[0]=b,g=a.fn(c)):a.inverse&&(g=a.inverse(d));return g},"if":function(d,a){var b="";a.params[0]?a.fn&&(b=a.fn(d)):
a.inverse&&(b=a.inverse(d));return b},set:function(d,a){for(var b=d.length-1;0<=b;b--)if("object"==typeof d[b]){f.mix(d[b],a.hash);break}return""},include:function(d,a){var b=a.params,d=(a.hash?[a.hash]:[]).concat(d);if(!b||1!=b.length)return"include must has one param","";var c=this.config.name,b=b[0];if("."==b.charAt(0)){if("unspecified"==c)return"parent template does not have name for relative sub tpl name: "+b,"";b=f.Path.resolve(c,"../",b)}c=this.config.loader.call(this,b);a=f.merge(this.config);
a.name=b;a.commands=this.config.commands;a.macros=this.config.macros;return this.invokeEngine(c,d,a)},macro:function(d,a){var b=a.params,c=b[0],g=b.slice(1),b=this.config.macros;if(a.fn)b[c]||(b[c]={paramNames:g,fn:a.fn});else{var k={},b=b[c];b||(b=f.require(c))||"can not find macro module:"+name;f.each(b.paramNames,function(b,a){k[b]=g[a]});c=d.concat();c.unshift(k);return b.fn.call(this,c)}return""},parse:function(d,a){return l.include.call(this,[],a)}}});
KISSY.add("xtemplate/runtime",function(f,l){function d(g,b){for(var a=b.split("."),c=g,d=a.length,e=0;e<d&&!(c=c[a[e]],!c);e++);return c}function a(g,a){this.tpl=g;a=f.merge(c,a);a.commands=f.merge(a.commands,l);a.utils=b;a.macros=a.macros||{};this.config=a}var b={runBlockCommand:function(a,k,c,m,o){var e=a.config,h=f[e.silent?"log":"error"],i=e.commands,e=d(i,m);if(!e)if(!c.params&&!c.hash){var j=b.getProperty(m,k);!1===j?(h("can not find property: '"+m+"' at line "+o),j=""):j=j[0];e=i["if"];f.isArray(j)?
e=i.each:"object"==typeof j&&(e=i["with"]);c.params=[j]}else return"can not find command module: "+m+"' at line "+o,"";h="";try{h=e.call(a,k,c)}catch(l){l.message+": '"+m+"' at line "+o}return h},getPropertyOrRunCommand:function(a,c,n,m,o,e){var h,i=a.config,j=d(i.commands,m),i=f[i.silent?"log":"error"];if(j)try{h=j.call(a,c,n)}catch(l){return l.message+": '"+m+"' at line "+e,""}else{a=b.getProperty(m,c,o);if(!1===a){i("can not find property: '"+m+"' at line "+e,"warn");return}h=a[0]}return h},getProperty:function(a,
b,c){"."===a&&(a="this");var a=a.split("."),d=a.length,f=c||0,e,h,i,j=b.length;"root"==a[0]&&(f=j-1,a.shift(),d--);for(;f<j;f++){e=b[f];i=1;for(c=0;c<d;c++)if(h=a[c],"this"!==h){if("object"!=typeof e||!(h in e)){i=0;break}e=e[h]}if(i)return"function"==typeof e&&(e=e.call(b[0])),[e]}return!1}},c={silent:!0,name:"unspecified",escapeHtml:!0,loader:function(a){var b=f.require(a);b||'template "'+a+'" does not exist, need to be required or used first!';return b}};f.mix(a,{commands:l,utils:b,addCommand:function(a,
b){l[a]=b},removeCommand:function(a){delete l[a]}});a.prototype={constructor:a,invokeEngine:function(a,b,c){return(new this.constructor(a,c)).render(b,!0)},removeCommand:function(a){delete this.config.commands[a]},addCommand:function(a,b){this.config.commands[a]=b},render:function(a,b){b||(a=[a]);return this.tpl(a)}};return a},{requires:["./runtime/commands"]});
