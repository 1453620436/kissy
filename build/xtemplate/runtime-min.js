/*
Copyright 2013, KISSY v1.40dev
MIT Licensed
build time: Sep 16 15:19
*/
KISSY.add("xtemplate/runtime/commands",function(e){var j;return j={each:function(d,b){var a=b.params[0],c="",g;if(a){var h=[0,0].concat(d);if(e.isArray(a)){g=a.length;for(var k=0;k<g;k++)h[0]=a[k],h[1]={xcount:g,xindex:k},c+=b.fn(h)}else for(g in a)h[0]=a[g],h[1]={xindex:g},c+=b.fn(h)}else b.inverse&&(c=b.inverse(d));return c},"with":function(d,b){var a=b.params[0],c=[0].concat(d),e="";a?(c[0]=a,e=b.fn(c)):b.inverse&&(e=b.inverse(d));return e},"if":function(d,b){var a="";b.params[0]?b.fn&&(a=b.fn(d)):
b.inverse&&(a=b.inverse(d));return a},set:function(d,b){for(var a=d.length-1;0<=a;a--)if("object"==typeof d[a]){e.mix(d[a],b.hash);break}return""},include:function(d,b){var a=b.params,d=(b.hash?[b.hash]:[]).concat(d);if(!a||1!=a.length)return"include must has one param","";var c=this.config.name,a=a[0];if("."==a.charAt(0)){if("unspecified"==c)return"parent template does not have name for relative sub tpl name: "+a,"";a=e.Path.resolve(c,"../",a)}c=this.config.loader.call(this,a);b=e.merge(this.config);
b.name=a;b.commands=this.config.commands;b.macros=this.config.macros;return this.invokeEngine(c,d,b)},macro:function(d,b){var a=b.params,c=a[0],g=a.slice(1),a=this.config.macros;if(b.fn)a[c]||(a[c]={paramNames:g,fn:b.fn});else{var h={},a=a[c];a||(a=e.require(c))||"can not find macro module:"+name;e.each(a.paramNames,function(a,q){h[a]=g[q]});c=d.concat();c.unshift(h);return a.fn.call(this,c)}return""},parse:function(d,b){return j.include.call(this,[],b)}}});
KISSY.add("xtemplate/runtime",function(e,j,d){function b(a,b){for(var c=b.split("."),d=a,e=c.length,f=0;f<e&&!(d=d[c[f]],!d);f++);return d}function a(a,b,c){"."===a&&(a="this");var a=a.split("."),d=a.length,e=c||0,f,l,g,i=b.length;"root"==a[0]&&(e=i-1,a.shift(),d--);for(;e<i;e++){f=b[e];g=1;for(c=0;c<d;c++)if(l=a[c],"this"!==l){if("object"!=typeof f||!(l in f)){g=0;break}f=f[l]}if(g)return"function"==typeof f&&(f=f.call(b[0])),[f]}return!1}function c(a,b){this.tpl=a;b=e.merge(k,b);b.commands=e.merge(b.commands,
j);b.utils=h;b.macros=b.macros||{};this.config=b}var g=e.escapeHtml,h={runBlockCommand:function(c,o,g,h,j){var f=c.config,l=e[f.silent?"log":"error"],m=f.commands,f=b(m,h);if(!f)if(!g.params&&!g.hash){var i=a(h,o);!1===i?(l("can not find property: '"+h+"' at line "+j),i=""):i=i[0];f=m["if"];e.isArray(i)?f=m.each:"object"==typeof i&&(f=m["with"]);g.params=[i]}else return"can not find command module: "+h+"' at line "+j,"";l="";try{l=f.call(c,o,g)}catch(k){k.message+": '"+h+"' at line "+j}l===d&&(l=
"");return l},getExpression:function(a,b){a===d&&(a="");return b&&a?g(a):a},getPropertyOrRunCommand:function(c,h,j,k,r,f,l,m){var i,n=c.config,p=b(n.commands,k),n=e[n.silent?"log":"error"];if(p)try{i=p.call(c,h,j)}catch(s){return s.message+": '"+k+"' at line "+f,""}else{c=a(k,h,r);if(!1===c)return n("can not find property: '"+k+"' at line "+f,"warn"),m?d:"";i=c[0]}!m&&i===d&&(i="");return l&&i?g(i):i}},k={silent:!0,name:"unspecified",loader:function(a){var b=e.require(a);b||'template "'+a+'" does not exist, need to be required or used first!';
return b}};e.mix(c,{commands:j,utils:h,addCommand:function(a,b){j[a]=b},removeCommand:function(a){delete j[a]}});c.prototype={constructor:c,invokeEngine:function(a,b,c){return(new this.constructor(a,c)).render(b,!0)},removeCommand:function(a){delete this.config.commands[a]},addCommand:function(a,b){this.config.commands[a]=b},render:function(a,b){b||(a=[a]);return this.tpl(a,e)}};return c},{requires:["./runtime/commands"]});
