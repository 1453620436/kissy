/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Apr 2 17:18
*/
KISSY.add("xtemplate/runtime/scope",[],function(j){function l(d,c){this.data=d||{};this.affix=c;this.root=this}l.prototype={isScope:1,setParent:function(d){this.parent=d;this.root=d.root},getParent:function(){return this.parent},getRoot:function(){return this.root},set:function(d,c){this.affix||(this.affix={});this.affix[d]=c},setData:function(d){this.data=d},getData:function(){return this.data},mix:function(d){this.affix||(this.affix={});j.mix(this.affix,d)},has:function(d){var c=this.data,b=this.affix;
return"this"===d||b&&d in b?!0:"object"===typeof c&&d in c},get:function(d){var c=this.data,b=this.affix;if("this"===d)return this.data;if(b&&d in b)return b[d];if("object"===typeof c&&d in c)return c[d]},resolve:function(d,c){if(!c&&"string"!==typeof d&&1===d.length&&this.has(d[0]))return this.get(d[0]);var b=d;"string"===typeof d&&(b=d.split("."));var a,f,e,h,i,g=this;if("root"===b[0])b.shift(),g=g.root;else if(c)for(;g&&c--;)g=g.parent;var k=0;for(a=b.length;g;){i=1;e=g;for(f=0;f<a;f++)if(h=b[f],
"this"===h)k=1;else if(e===g)if(g.has(h))e=g.get(h),k=1;else{i=0;break}else{if(null==e||"object"!==typeof e||!(h in e)){i=0;break}e=e[h]}if(i)return e&&e.isScope&&(e=e.data),"function"===typeof e&&(e=e.call(this.data)),e;if(k)break;g=g.parent}}};return l});
KISSY.add("xtemplate/runtime/commands",["./scope"],function(j,l){var d=l("./scope"),c={each:function(b,a,f){var e=a.params,h=e[0],i=e[2]||"xindex",e=e[1],g,k,m;if(h)if(j.isArray(h)){g=h.length;k=new d;m=k.affix={xcount:g};for(var c=0;c<g;c++)k.data=h[c],m[i]=c,e&&(m[e]=h[c]),k.setParent(b),f=a.fn(k,f)}else for(g in k=new d,m=k.affix={},h)k.data=h[g],m[i]=g,e&&(m[e]=h[g]),k.setParent(b),f=a.fn(k,f);else a.inverse&&(f=a.inverse(b,f));return f},"with":function(b,a,f){var e=a.params[0];e?(e=new d(e),
e.setParent(b),f=a.fn(e,f)):a.inverse&&(f=a.inverse(b,f));return f},"if":function(b,a,f){a.params[0]?a.fn&&(f=a.fn(b,f)):a.inverse&&(f=a.inverse(b,f));return f},set:function(b,a,f){b.mix(a.hash);return f},include:function(b,a,f,e,h){e=a.params;a.hash&&(a=new d(a.hash),a.setParent(b),b=a);return this.include(e[0],b,f,h)},parse:function(b,a,f,e,h){return c.include.call(this,new d,a,f,h)},extend:function(b,a,f,e,d){d.extendTplName=a.params[0];return f},block:function(b,a,f,e,d){var c=a.params,e=c[0],
g;2===c.length&&(g=c[0],e=c[1]);var c=d.blocks=d.blocks||{},k=c[e],a={fn:a.fn,type:g};if(k){if(k.type)if("append"===k.type)a.next=k,c[e]=a;else if("prepend"===k.type){var m;for(g=k;g&&"prepend"===g.type;)m=g,g=g.next;a.next=g;m.next=a}}else c[e]=a;if(!d.extendTplName)for(g=c[e];g;)g.fn&&(f=g.fn.call(this,b,f)),g=g.next;return f},macro:function(b,a,f,e,c){b=a.params;e=b[0];b=b.slice(1);c=c.macros=c.macros||{};if(a.fn)c[e]={paramNames:b,fn:a.fn};else{var a={},c=c[e],i;if(c&&(i=c.paramNames)){for(var e=
0,g=i.length;e<g;e++)a[i[e]]=b[e];i=new d(a);f=c.fn.call(this,i,f)}}return f}};return c});
KISSY.add("xtemplate/runtime/linked-buffer",[],function(j,l){function d(b){this.list=b;this.data=""}function c(b){this.head=new d(this);this.callback=b;this.data=""}d.prototype={constructor:d,isBuffer:1,write:function(b,a){if(b||0===b)this.data+=a?j.escapeHtml(b):b;return this},async:function(b){var a=this.list,c=new d(a),a=new d(a);a.next=this.next;c.next=a;this.next=c;this.ready=!0;b(c);return a},error:function(b){var a=this.list.callback;a&&(a(b,l),this.list.callback=null)},end:function(b,a){this.list.callback&&
(this.write(b,a),this.ready=!0,this.list.flush());return this}};c.prototype={constructor:c,flush:function(){for(var b=this.head;b;){if(b.ready)this.data+=b.data;else return;this.head=b=b.next}this.callback(null,this.data)}};c.Buffer=d;return c});
KISSY.add("xtemplate/runtime",["util","./runtime/commands","./runtime/scope","./runtime/linked-buffer"],function(j,l){function d(g,b){var a=g.split("/"),e=b.split("/");a.pop();for(var c=0,d=e.length;c<d;c++){var f=e[c];"."!==f&&(".."===f?a.pop():a.push(f))}return a.join("/")}function c(g,a,b,c){var e=g.tpl,c=c||{};c.extendTplName=null;e.TPL_NAME&&!g.name&&(g.name=e.TPL_NAME);b=e.call(g,a,j,b,c);(e=c.extendTplName)&&(b=g.include(e,a,b,c));return b.end()}function b(b,a){this.tpl=b;a=a||{};a.name&&(this.name=
a.name);this.config=a}l("util");var a=l("./runtime/commands"),f={},e=l("./runtime/scope"),h=l("./runtime/linked-buffer"),i={callCommand:function(a,b,c,e,d,h){var i=a.config.commands;if(-1===d.indexOf("."))d=i&&i[d]||f[d];else{d=d.split(".");if(i=i&&i[d[0]]||f[d[0]])for(var l=d.length,j=1;j<l&&!(i=i[d[j]],!i);j++);d=i}return d?d.call(a,b,c,e,h):e}};j.mix(b,{nativeCommands:a,utils:i,addCommand:function(a,b){f[a]=b},removeCommand:function(a){delete f[a]}});b.prototype={constructor:b,Scope:e,nativeCommands:a,
utils:i,load:function(a,b){var c=j.require(a);c?b(void 0,c):b('template "'+a+'" does not exist, better required or used first for performance!',void 0)},removeCommand:function(a){var b=this.config;b.commands&&delete b.commands[a]},addCommand:function(a,b){var c=this.config;c.commands=c.commands||{};c.commands[a]=b},include:function(a,e,f,i){var h=this,j=h.name;if("."===a.charAt(0)){if(!j)throw Error("parent template does not have name for relative sub tpl name: "+a);a=d(j,a)}return f.async(function(d){h.load(a,
function(f,j){f?d.error(f):(j instanceof b||(j=new h.constructor(j,h.config),j.name=a),c(j,e,d,i))})})},render:function(a,b){var d="",b=b||function(a,b){d=b};!this.name&&this.tpl.TPL_NAME&&(this.name=this.tpl.TPL_NAME);c(this,new e(a),(new h(b)).head);return d}};b.Scope=e;return b});
