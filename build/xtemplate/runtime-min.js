/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 22 02:16
*/
KISSY.add("xtemplate/runtime/scope",[],function(l){function g(c,a){this.data=c||{};this.affix=a;this.root=this}g.prototype={isScope:1,setParent:function(c){this.parent=c;this.root=c.root},getParent:function(){return this.parent},getRoot:function(){return this.root},set:function(c,a){this.affix||(this.affix={});this.affix[c]=a},setData:function(c){this.data=c},getData:function(){return this.data},mix:function(c){this.affix||(this.affix={});l.mix(this.affix,c)},has:function(c){var a=this.data,e=this.affix;
return"this"===c||e&&c in e?!0:"object"===typeof a&&c in a},get:function(c){var a=this.data,e=this.affix;if("this"===c)return this.data;if(e&&c in e)return e[c];if("object"===typeof a&&c in a)return a[c]},resolve:function(c,a){var e=this;if(!a&&"string"!==typeof c&&1===c.length&&e.has(c[0]))return e.get(c[0]);var b=c;"string"===typeof c&&(b=c.split("."));var k,f,d,i,h;if("root"===b[0])b.shift(),e=e.root;else if(a)for(;e&&a--;)e=e.parent;var j=0;for(k=b.length;e;){h=1;d=e;for(f=0;f<k;f++)if(i=b[f],
"this"===i)j=1;else if(d===e)if(e.has(i))d=e.get(i),j=1;else{h=0;break}else{if(null==d||"object"!==typeof d||!(i in d)){h=0;break}d=d[i]}if(h)return d&&d.isScope&&(d=d.data),"function"===typeof d&&(d=d.call(this.data)),d;if(j)break;e=e.parent}}};return g});
KISSY.add("xtemplate/runtime/commands",["./scope"],function(l,g){var c=g("./scope"),a={each:function(e,b,a){var f=b.params,d=f[0],i=f[2]||"xindex",f=f[1],h,j,m;if(d)if(l.isArray(d)){h=d.length;j=new c;m=j.affix={xcount:h};for(var n=0;n<h;n++)j.data=d[n],m[i]=n,f&&(m[f]=d[n]),j.setParent(e),a=b.fn(j,a)}else for(h in j=new c,m=j.affix={},d)j.data=d[h],m[i]=h,f&&(m[f]=d[h]),j.setParent(e),a=b.fn(j,a);else b.inverse&&(a=b.inverse(e,a));return a},"with":function(e,b,a){var f=b.params[0];f?(f=new c(f),
f.setParent(e),a=b.fn(f,a)):b.inverse&&(a=b.inverse(e,a));return a},"if":function(e,b,a){b.params[0]?b.fn&&(a=b.fn(e,a)):b.inverse&&(a=b.inverse(e,a));return a},set:function(a,b,c){a.mix(b.hash);return c},include:function(a,b,k,f){var d=b.params;b.hash&&(b=new c(b.hash),b.setParent(a),a=b);return this.include(d[0],a,k,f)},parse:function(e,b,k,f){return a.include.call(this,new c,b,k,f)},extend:function(a,b,c,f){f.extendTplName=b.params[0];return c},block:function(a,b,c,f){var d=b.params,i=d[0],h;2===
d.length&&(h=d[0],i=d[1]);var d=f.blocks=f.blocks||{},j=d[i],b={fn:b.fn,type:h};if(j){if(j.type)if("append"===j.type)b.next=j,d[i]=b;else if("prepend"===j.type){var m;for(h=j;h&&"prepend"===h.type;)m=h,h=h.next;b.next=h;m.next=b}}else d[i]=b;if(!f.extendTplName)for(h=d[i];h;)h.fn&&(c=h.fn.call(this,a,c)),h=h.next;return c},macro:function(a,b,g,f){var a=b.params,d=a[0],a=a.slice(1),f=f.macros=f.macros||{};if(b.fn)f[d]={paramNames:a,fn:b.fn};else{var b={},d=f[d],i;if(d&&(i=d.paramNames)){for(var f=
0,h=i.length;f<h;f++)b[i[f]]=a[f];i=new c(b);g=d.fn.call(this,i,g)}}return g}};return a});
KISSY.add("xtemplate/runtime/linked-buffer",[],function(l){function g(a){this.list=a;this.data=""}function c(a){this.head=new g(this);this.callback=a;this.data=""}g.prototype={constructor:g,isBuffer:1,write:function(a,c){if(a||0===a)this.data+=c?l.escapeHtml(a):a;return this},async:function(a){var c=this.list,b=new g(c),c=new g(c);c.next=this.next;b.next=c;this.next=b;this.ready=!0;a(b);return c},end:function(a,c){this.write(a,c);this.ready=!0;this.list.flush();return this}};c.prototype={constructor:c,
flush:function(){for(var a=this.head;a;){if(a.ready)this.data+=a.data;else return;this.head=a=a.next}this.callback(null,this.data)}};c.Buffer=g;return c});
KISSY.add("xtemplate/runtime",["./runtime/commands","./runtime/scope","./runtime/linked-buffer"],function(l,g){function c(a,c,b,d){var f=a.tpl,d=d||{};d.extendTplName=null;f.TPL_NAME&&!a.name&&(a.name=f.TPL_NAME);b=f.call(a,c,l,b,d);(f=d.extendTplName)&&(b=a.include(f,c,b,d));return b}function a(a,b){this.tpl=a;b=b||{};b.name&&(this.name=b.name);this.config=b}var e=g("./runtime/commands"),b={},k=g("./runtime/scope"),f=g("./runtime/linked-buffer"),d={callCommand:function(a,c,d,f,e){var g=a.config.commands;
if(-1===e.indexOf("."))e=g&&g[e]||b[e];else{e=e.split(".");if(g=g&&g[e[0]]||b[e[0]])for(var k=e.length,l=1;l<k&&!(g=g[e[l]],!g);l++);e=g}return e?e.call(a,c,d,f):f}};l.mix(a,{nativeCommands:e,utils:d,addCommand:function(a,c){b[a]=c},removeCommand:function(a){delete b[a]}});a.prototype={constructor:a,Scope:k,nativeCommands:e,utils:d,load:function(a){var b=new this.constructor(l.require(a),this.config);b.name=a;return b},removeCommand:function(a){var b=this.config;b.commands&&delete b.commands[a]},
addCommand:function(a,b){var c=this.config;c.commands=c.commands||{};c.commands[a]=b},include:function(a,b,d,f){var e=this.name;if("."===a.charAt(0)){if(!e)throw Error("parent template does not have name for relative sub tpl name: "+a);e=e.split("/");a=a.split("/");e.pop();for(var g=0,l=a.length;g<l;g++){var k=a[g];"."!==k&&(".."===k?e.pop():e.push(k))}a=e.join("/")}return c(this.load(a),b,d,f)},render:function(a,b){var d="",b=b||function(a,b){d=b};!this.name&&this.tpl.TPL_NAME&&(this.name=this.tpl.TPL_NAME);
c(this,new k(a),(new f(b)).head).end();return d}};a.Scope=k;return a});
