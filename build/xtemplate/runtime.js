/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Apr 15 17:57
*/
KISSY.add("xtemplate/runtime/scope",function(n){function k(c,b){this.data=c||{};this.affix=b;this.root=this}k.prototype={isScope:1,setParent:function(c){this.parent=c;this.root=c.root},set:function(c,b){this.affix||(this.affix={});this.affix[c]=b},setData:function(c){this.data=c},getData:function(){return this.data},mix:function(c){this.affix||(this.affix={});n.mix(this.affix,c)},get:function(c){var b=this.data,h=b&&b[c];if(void 0!==h)return h;var a=this.affix;return a&&c in a?a[c]:"this"===c?b:"root"===
c?this.root.data:h},resolve:function(c,b){if(!b&&1===c.length)return this.get(c[0]);var h,a,d;a=this;if("root"===c[0])c.shift(),a=a.root;else if(b)for(;a&&b--;)a=a.parent;h=c.length;var e=c[0];do d=a.get(e);while(void 0===d&&(a=a.parent));if(d&&a){for(a=1;d&&a<h;a++)d=d[c[a]];"function"===typeof d&&(d=d.call(this.data));return d}}};return k});
KISSY.add("xtemplate/runtime/commands",["./scope"],function(n,k){var c=k("./scope"),b={each:function(h,a,d){var e=a.params,b=e[0],g=e[2]||"xindex",e=e[1],j,l,m;if(b)if(n.isArray(b)){j=b.length;l=new c;m=l.affix={xcount:j};for(var o=0;o<j;o++)l.data=b[o],m[g]=o,e&&(m[e]=b[o]),l.setParent(h),d=a.fn(l,d)}else for(j in l=new c,m=l.affix={},b)l.data=b[j],m[g]=j,e&&(m[e]=b[j]),l.setParent(h),d=a.fn(l,d);else a.inverse&&(d=a.inverse(h,d));return d},"with":function(h,a,d){var b=a.params[0];b?(b=new c(b),
b.setParent(h),d=a.fn(b,d)):a.inverse&&(d=a.inverse(h,d));return d},"if":function(h,a,b){a.params[0]?a.fn&&(b=a.fn(h,b)):a.inverse&&(b=a.inverse(h,b));return b},set:function(b,a,d){b.mix(a.hash);return d},include:function(b,a,d,e,f){e=a.params;a.hash&&(a=new c(a.hash),a.setParent(b),b=a);return this.include(e[0],b,d,f)},parse:function(h,a,d,e,f){return b.include.call(this,new c,a,d,f)},extend:function(b,a,d,c,f){f.extendTplName=a.params[0];return d},block:function(b,a,d,c,f){var g=a.params,c=g[0],
j;2===g.length&&(j=g[0],c=g[1]);var g=f.blocks=f.blocks||{},l=g[c],a={fn:a.fn,type:j};if(l){if(l.type)if("append"===l.type)a.next=l,g[c]=a;else if("prepend"===l.type){var m;for(j=l;j&&"prepend"===j.type;)m=j,j=j.next;a.next=j;m.next=a}}else g[c]=a;if(!f.extendTplName)for(j=g[c];j;)j.fn&&(d=j.fn.call(this,b,d)),j=j.next;return d},macro:function(b,a,d,e,f){b=a.params;e=b[0];b=b.slice(1);f=f.macros=f.macros||{};if(a.fn)f[e]={paramNames:b,fn:a.fn};else{var a={},f=f[e],g;if(f&&(g=f.paramNames)){for(var e=
0,j=g.length;e<j;e++)a[g[e]]=b[e];g=new c(a);d=f.fn.call(this,g,d)}}return d}};return b});
KISSY.add("xtemplate/runtime/linked-buffer",function(n){function k(b){this.list=b;this.data=""}function c(b){this.head=new k(this);this.callback=b;this.data=""}k.prototype={constructor:k,isBuffer:1,write:function(b,c){if(b||0===b)this.data+=c?n.escapeHtml(b):b;return this},async:function(b){var c=this.list,a=new k(c),c=new k(c);c.next=this.next;a.next=c;this.next=a;this.ready=!0;b(a);return c},error:function(b){var c=this.list.callback;c&&(c(b,void 0),this.list.callback=null)},end:function(b,c){this.list.callback&&
(this.write(b,c),this.ready=!0,this.list.flush());return this}};c.prototype={constructor:c,flush:function(){for(var b=this.head;b;){if(b.ready)this.data+=b.data;else return;this.head=b=b.next}this.callback(null,this.data)}};c.Buffer=k;return c});
KISSY.add("xtemplate/runtime",["util","./runtime/commands","./runtime/scope","./runtime/linked-buffer"],function(n,k){function c(b,a){var c=b.split("/"),d=a.split("/");c.pop();for(var i=0,e=d.length;i<e;i++){var h=d[i];"."!==h&&(".."===h?c.pop():c.push(h))}return c.join("/")}function b(b,a,c,d){var i=b.tpl,d=d||{};d.extendTplName=null;i.TPL_NAME&&!b.name&&(b.name=i.TPL_NAME);c=i.call(b,a,c,d);(i=d.extendTplName)&&(c=b.include(i,a,c,d));return c.end()}function h(b,a){this.tpl=b;a=a||{};a.name&&(this.name=
a.name);this.config=a}k("util");var a=k("./runtime/commands"),d={},e=k("./runtime/scope"),f=k("./runtime/linked-buffer"),g={callCommand:function(b,a,c,e,i,h){var f=b.config.commands;if(-1===i.indexOf("."))i=f&&f[i]||d[i];else{i=i.split(".");if(f=f&&f[i[0]]||d[i[0]])for(var g=i.length,k=1;k<g&&!(f=f[i[k]],!f);k++);i=f}return i?i.call(b,a,c,e,h):e}};n.mix(h,{nativeCommands:a,utils:g,addCommand:function(b,a){d[b]=a},removeCommand:function(b){delete d[b]}});h.prototype={constructor:h,Scope:e,nativeCommands:a,
utils:g,load:function(b,a){var c=n.require(b);c?a(void 0,c):a('template "'+b+'" does not exist, better required or used first for performance!',void 0)},removeCommand:function(b){var a=this.config;a.commands&&delete a.commands[b]},addCommand:function(b,a){var c=this.config;c.commands=c.commands||{};c.commands[b]=a},include:function(a,d,e,f){var i=this,g=i.name;if("."===a.charAt(0)){if(!g)throw Error("parent template does not have name for relative sub tpl name: "+a);a=c(g,a)}return e.async(function(c){i.load(a,
function(e,g){e?c.error(e):(g instanceof h||(g=new i.constructor(g,i.config),g.name=a),b(g,d,c,f))})})},render:function(a,c){var d="",c=c||function(a,b){d=b};!this.name&&this.tpl.TPL_NAME&&(this.name=this.tpl.TPL_NAME);b(this,new e(a),(new f(c)).head);return d}};h.Scope=e;return h});
