/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Apr 29 15:13
*/
KISSY.add("tabs",["component/container","tabs/bar","tabs/body","tabs/tab","tabs/panel"],function(e,d){var a=d("component/container"),f=d("tabs/bar"),c=d("tabs/body");d("tabs/tab");var g=d("tabs/panel"),a=a.extend({initializer:function(){var b=this.get("items");if(b){var c=this.get("children"),a=this.get("barOrientation"),f,g=this.get("prefixCls"),d={prefixCls:g,xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},g={prefixCls:g,xclass:"tabs-body",lazyRender:this.get("lazyRender"),children:[]},
i=d.children,j=g.children;e.each(b,function(b){f=f||b.selected;i.push({content:b.title,selected:b.selected});j.push({content:b.content,selected:b.selected})});!f&&i.length&&(i[0].selected=!0,j[0].selected=!0);c[h[a]]=d;c[1-h[a]]=g}},beforeCreateDom:function(b){b.elCls.push(this.getBaseCssClass(this.get("barOrientation")))},decorateDom:function(){this.get("bar").set("changeType",this.get("changeType"))},bindUI:function(){this.on("afterSelectedTabChange",function(b){this.setSelectedTab(b.newVal)})},
addItem:function(b,c){var a=this.get("bar"),f,g,d=a.get("children"),e=this.get("body");"undefined"===typeof c&&(c=d.length);f={content:b.title};g={content:b.content};a.addChild(f,c);f=d[c];e.addChild(g,c);b.selected&&(a.set("selectedTab",f),e.set("selectedPanelIndex",c));return this},removeItemAt:function(b,c){var a=this.get("bar"),f=a.get("children"),g=a.getChildAt(b),d=this.get("body");g.get("selected")&&(1===f.length?a.set("selectedTab",null):0===b?a.set("selectedTab",a.getChildAt(b+1)):a.set("selectedTab",
a.getChildAt(b-1)));a.removeChild(a.getChildAt(b),c);d.removeChild(d.getChildAt(b),c);return this},removeItemByTab:function(b,a){return this.removeItemAt(e.indexOf(b,this.get("bar").get("children")),a)},removeItemByPanel:function(b,a){return this.removeItemAt(e.indexOf(b,this.get("body").get("children")),a)},getSelectedTab:function(){var b=this.get("bar"),a=null;e.each(b.get("children"),function(b){if(b.get("selected"))return a=b,!1});return a},getSelectedPanel:function(){var b=this.get("body"),a=
null;e.each(b.get("children"),function(b){if(b.get("selected"))return a=b,!1});return a},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(b){return this.get("bar").get("children")[b]},getPanelAt:function(b){return this.get("body").get("children")[b]},setSelectedTab:function(b){var a=this.get("bar"),c=this.get("body");a.set("selectedTab",b);c.set("selectedPanelIndex",e.indexOf(b,a.get("children")));return this},
setSelectedPanel:function(a){var c=this.get("bar"),f=this.get("body"),a=e.indexOf(a,f.get("children"));f.set("selectedPanelIndex",a);c.set("selectedTab",this.getTabAt(a));return this},_onSetBarOrientation:function(a){this.$el.removeClass(this.getBaseCssClass("top bottom left right")).addClass(this.getBaseCssClass(a))}},{ATTRS:{items:{},changeType:{},lazyRender:{value:!1},handleGestureEvents:{value:!1},allowTextSelection:{value:!0},focusable:{value:!1},bar:{getter:function(){return this.get("children")[h[this.get("barOrientation")]]}},
body:{getter:function(){return this.get("children")[1-h[this.get("barOrientation")]]}},barOrientation:{render:1,sync:0,value:"top",parse:function(a){return(a=a[0].className.match(/(top|bottom|left|right)\b/))&&a[1]||void 0}}},xclass:"tabs"});a.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};var h={top:0,left:0,bottom:1,right:0};a.ChangeType=f.ChangeType;a.Bar=f;a.Body=c;a.Panel=g;return a});
KISSY.add("tabs/bar",["toolbar"],function(e,d){var a=d("toolbar").extend({beforeCreateDom:function(a){a.elAttrs.role="tablist"},bindUI:function(){var a=this;a.on("afterSelectedChange",function(c){c.newVal&&c.target.isTabsTab&&a.set("selectedTab",c.target)})},syncUI:function(){var a=this,c=a.get("children");e.each(c,function(c){if(c.get("selected"))return a.setInternal("selectedTab",c),!1})},handleKeyDownInternal:function(a){var c=this.get("selectedTab"),a=this.getNextItemByKeyDown(a,c);if("boolean"===
typeof a)return a;a.set("selected",!0);return!0},_onSetSelectedTab:function(a,c){var d;a&&(c&&(d=c.prevVal)&&d.set("selected",!1),a.set("selected",!0))},_onSetHighlightedItem:function(a,c){this.callSuper(a,c);"mouse"===this.get("changeType")&&this._onSetSelectedTab.apply(this,arguments)}},{ATTRS:{selectedTab:{},changeType:{value:"click"},defaultChildCfg:{value:{xclass:"tabs-tab"}}},xclass:"tabs-bar"});a.ChangeType={CLICK:"click",MOUSE:"mouse"};return a});
KISSY.add("tabs/body",["component/container"],function(e,d){function a(a,d,e){if(a.get("lazyRender")){var b=a.get("children")[e];if(!b.get("selected"))return b}return f.superclass[d].call(a,e)}var f=d("component/container").extend({bindUI:function(){var a=this;a.on("afterSelectedPanelIndexChange",function(d){var f=a.get("children"),b=d.newVal,e;f[b]&&((e=f[d.prevVal])&&e.set("selected",!1),a.selectPanelByIndex(b))})},syncUI:function(){var a=this,d=a.get("children");e.each(d,function(d,b){if(d.get("selected"))return a.set("selectedPanelIndex",
b),!1})},createChild:function(c){return a(this,"createChild",c)},renderChild:function(c){return a(this,"renderChild",c)},selectPanelByIndex:function(a){this.get("children")[a].set("selected",!0);this.get("lazyRender")&&this.renderChild(a)}},{ATTRS:{selectedPanelIndex:{},allowTextSelection:{value:!0},focusable:{value:!1},lazyRender:{},handleGestureEvents:{value:!1},defaultChildCfg:{value:{xclass:"tabs-panel"}}},xclass:"tabs-body"});return f});
KISSY.add("tabs/tab",["button"],function(e,d){return d("button").extend({isTabsTab:!0,beforeCreateDom:function(a){var d=a.elAttrs;d.role="tab";a.selected&&(d["aria-selected"]=!0,a.elCls.push(this.getBaseCssClasses("selected")))},handleClickInternal:function(a){this.callSuper(a);this.set("selected",!0)},_onSetSelected:function(a){var d=this.$el,c=this.getBaseCssClasses("selected");d[a?"addClass":"removeClass"](c).attr("aria-selected",!!a)}},{ATTRS:{handleGestureEvents:{value:!1},focusable:{value:!1},
selected:{render:1,sync:0,parse:function(a){return a.hasClass(this.getBaseCssClass("selected"))}}},xclass:"tabs-tab"})});
KISSY.add("tabs/panel",["component/container"],function(e,d){return d("component/container").extend({isTabsPanel:1,beforeCreateDom:function(a){a.elAttrs.role="tabpanel";a.selected?a.elCls.push(this.getBaseCssClasses("selected")):a.elAttrs["aria-hidden"]=!1},_onSetSelected:function(a){var d=this.$el,c=this.getBaseCssClasses("selected");d[a?"addClass":"removeClass"](c).attr("aria-hidden",!a)}},{ATTRS:{selected:{render:1,sync:0,parse:function(a){return a.hasClass(this.getBaseCssClass("selected"))}},
focusable:{value:!1},allowTextSelection:{value:!0}},xclass:"tabs-panel"})});
