/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 9 14:08
*/
KISSY.add("tabs",["component/container","tabs/bar","tabs/body","tabs/tab","tabs/panel"],function(g,f){function e(b){this.removeItemByTab(b.target)}function d(b){this.setSelectedTab(b.newVal)}function c(b){var c={};c.content=b.title;c.selected=b.selected;c.closable=b.closable;return c}var a=f("component/container"),h=f("tabs/bar"),i=f("tabs/body");f("tabs/tab");var k=f("tabs/panel"),a=a.extend({initializer:function(){var b=this.get("items");if(b){var a=this.get("children"),d=this.get("barOrientation"),
h,e=this.get("prefixCls"),i={prefixCls:e,xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},e={prefixCls:e,xclass:"tabs-body",lazyRender:this.get("lazyRender"),children:[]},f=i.children,k=e.children;g.each(b,function(b){h=h||b.selected;f.push(c(b));k.push({content:b.content,selected:b.selected})});!h&&f.length&&(f[0].selected=!0,k[0].selected=!0);a[l[d]]=i;a[1-l[d]]=e}},beforeCreateDom:function(b){b.elCls.push(this.getBaseCssClass(this.get("barOrientation")))},decorateDom:function(){this.get("bar").set("changeType",
this.get("changeType"))},bindUI:function(){this.on("afterSelectedTabChange",d);this.on("afterTabClose",e)},addItem:function(b,a){var d=this.get("bar"),h,e,i=d.get("children"),f=this.get("body");"undefined"===typeof a&&(a=i.length);h=c(b);e={content:b.content};d.addChild(h,a);h=i[a];f.addChild(e,a);b.selected&&(d.set("selectedTab",h),f.set("selectedPanelIndex",a));return this},removeItemAt:function(b,c){var a=this.get("bar"),d=a.get("children"),h=a.getChildAt(b),e=this.get("body");h.get("selected")&&
(1===d.length?a.set("selectedTab",null):0===b?a.set("selectedTab",a.getChildAt(b+1)):a.set("selectedTab",a.getChildAt(b-1)));a.removeChild(a.getChildAt(b),c);e.removeChild(e.getChildAt(b),c);return this},removeItemByTab:function(b,a){return this.removeItemAt(g.indexOf(b,this.get("bar").get("children")),a)},removeItemByPanel:function(b,a){return this.removeItemAt(g.indexOf(b,this.get("body").get("children")),a)},getSelectedTab:function(){var b=this.get("bar"),a=null;g.each(b.get("children"),function(b){if(b.get("selected"))return a=
b,!1});return a},getSelectedPanel:function(){var b=this.get("body"),a=null;g.each(b.get("children"),function(b){if(b.get("selected"))return a=b,!1});return a},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(b){return this.get("bar").get("children")[b]},getPanelAt:function(b){return this.get("body").get("children")[b]},setSelectedTab:function(b){var a=this.get("bar"),c=this.get("body");a.set("selectedTab",b);
c.set("selectedPanelIndex",g.indexOf(b,a.get("children")));return this},setSelectedPanel:function(b){var a=this.get("bar"),c=this.get("body"),b=g.indexOf(b,c.get("children"));c.set("selectedPanelIndex",b);a.set("selectedTab",this.getTabAt(b));return this},_onSetBarOrientation:function(b){this.$el.removeClass(this.getBaseCssClass("top bottom left right")).addClass(this.getBaseCssClass(b))}},{ATTRS:{items:{},changeType:{},lazyRender:{value:!1},handleGestureEvents:{value:!1},allowTextSelection:{value:!0},
focusable:{value:!1},bar:{getter:function(){return this.get("children")[l[this.get("barOrientation")]]}},body:{getter:function(){return this.get("children")[1-l[this.get("barOrientation")]]}},barOrientation:{render:1,sync:0,value:"top",parse:function(b){return(b=b[0].className.match(/(top|bottom|left|right)\b/))&&b[1]||void 0}}},xclass:"tabs"});a.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};var l={top:0,left:0,bottom:1,right:0};a.ChangeType=h.ChangeType;a.Bar=h;a.Body=i;a.Panel=
k;return a});
KISSY.add("tabs/bar",["toolbar"],function(g,f){var e=f("toolbar").extend({beforeCreateDom:function(d){d.elAttrs.role="tablist"},bindUI:function(){var d=this;d.on("afterSelectedChange",function(c){c.newVal&&c.target.isTabsTab&&d.set("selectedTab",c.target)})},syncUI:function(){var d=this,c=d.get("children");g.each(c,function(a){if(a.get("selected"))return d.setInternal("selectedTab",a),!1})},handleKeyDownInternal:function(d){var c=this.get("selectedTab"),d=this.getNextItemByKeyDown(d,c);if("boolean"===
typeof d)return d;d.set("selected",!0);return!0},_onSetSelectedTab:function(d,c){var a;d&&(c&&(a=c.prevVal)&&a.set("selected",!1),d.set("selected",!0))},_onSetHighlightedItem:function(d,c){this.callSuper(d,c);"mouse"===this.get("changeType")&&this._onSetSelectedTab.apply(this,arguments)}},{ATTRS:{selectedTab:{},changeType:{value:"click"},defaultChildCfg:{valueFn:function(){return{xclass:"tabs-tab"}}}},xclass:"tabs-bar"});e.ChangeType={CLICK:"click",MOUSE:"mouse"};return e});
KISSY.add("tabs/body",["component/container"],function(g,f){function e(c,a,h){if(c.get("lazyRender")){var e=c.get("children")[h];if(!e.get("selected"))return e}return d.superclass[a].call(c,h)}var d=f("component/container").extend({bindUI:function(){var c=this;c.on("afterSelectedPanelIndexChange",function(a){var d=c.get("children"),e=a.newVal,f;d[e]&&((f=d[a.prevVal])&&f.set("selected",!1),c.selectPanelByIndex(e))})},syncUI:function(){var c=this,a=c.get("children");g.each(a,function(a,d){if(a.get("selected"))return c.set("selectedPanelIndex",
d),!1})},createChild:function(c){return e(this,"createChild",c)},renderChild:function(c){return e(this,"renderChild",c)},selectPanelByIndex:function(c){this.get("children")[c].set("selected",!0);this.get("lazyRender")&&this.renderChild(c)}},{ATTRS:{selectedPanelIndex:{},allowTextSelection:{value:!0},focusable:{value:!1},lazyRender:{},handleGestureEvents:{value:!1},defaultChildCfg:{valueFn:function(){return{xclass:"tabs-panel"}}}},xclass:"tabs-body"});return d});
KISSY.add("tabs/tab",["button","./tab-xtpl","component/extension/content-box"],function(g,f){function e(){this.fire("afterTabClose")}var d=f("button"),c=f("./tab-xtpl"),a=f("component/extension/content-box");return d.extend([a],{initializer:function(){this.publish("beforeTabClose",{defaultFn:e,defaultTargetOnly:!0})},isTabsTab:!0,beforeCreateDom:function(a){var c=a.elAttrs;c.role="tab";a.selected&&(c["aria-selected"]=!0,a.elCls.push(this.getBaseCssClasses("selected")));a.closable&&a.elCls.push(this.getBaseCssClasses("closable"))},
handleClickInternal:function(a){this.get("closable")&&a.target===this.get("closeBtn")[0]?this.fire("beforeTabClose"):(this.callSuper(a),this.set("selected",!0))},_onSetSelected:function(a){var c=this.$el,d=this.getBaseCssClasses("selected");c[a?"addClass":"removeClass"](d).attr("aria-selected",!!a)}},{ATTRS:{contentTpl:{value:c},handleGestureEvents:{value:!1},focusable:{value:!1},closable:{value:!1,render:1,sync:0,parse:function(){return!!this.get("closeBtn")}},closeBtn:{selector:function(){return"."+
this.getBaseCssClass("close")}},selected:{render:1,sync:0,parse:function(a){return a.hasClass(this.getBaseCssClass("selected"))}}},xclass:"tabs-tab"})});
KISSY.add("tabs/tab-xtpl",[],function(g,f,e,d){g=function(c,a,d){var e=this,f=e.root.utils.callFn,g=e.root.nativeCommands["if"];a.write('<div class="',0);var b={escape:1},j=[];j.push("content");b.params=j;if((b=f(e,c,b,a,["getBaseCssClasses"],0,1))&&b.isBuffer)a=b,b=d;a.write(b,!0);a.write('">',0);b=c.resolve(["content"],0);a.write(b,!1);a.write("</div>\r\n",0);var b={escape:1},j=[],m=c.resolve(["closable"],0);j.push(m);b.params=j;b.fn=function(a,b){b.write('\r\n<span class="',0);var c={escape:1},
g=[];g.push("close");c.params=g;if((c=f(e,a,c,b,["getBaseCssClasses"],0,3))&&c.isBuffer)b=c,c=d;b.write(c,!0);b.write('">close</span>\r\n',0);return b};return a=g.call(e,c,b,a,2)};g.TPL_NAME=d.name;g.version="5.0.0";return g});
KISSY.add("tabs/panel",["component/container"],function(g,f){return f("component/container").extend({isTabsPanel:1,beforeCreateDom:function(e){e.elAttrs.role="tabpanel";e.selected?e.elCls.push(this.getBaseCssClasses("selected")):e.elAttrs["aria-hidden"]=!1},_onSetSelected:function(e){var d=this.$el,c=this.getBaseCssClasses("selected");d[e?"addClass":"removeClass"](c).attr("aria-hidden",!e)}},{ATTRS:{selected:{render:1,sync:0,parse:function(e){return e.hasClass(this.getBaseCssClass("selected"))}},
focusable:{value:!1},allowTextSelection:{value:!0}},xclass:"tabs-panel"})});
