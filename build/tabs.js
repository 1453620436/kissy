/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Aug 26 16:11
*/
KISSY.add("tabs","component/container,tabs/bar,tabs/body,tabs/tab,tabs/panel,util".split(","),function(f,b,h,g){function e(c){this.removeItemByTab(c.target)}function a(c){this.setSelectedTab(c.newVal)}function j(c){var a={};a.content=c.title;a.selected=c.selected;a.closable=c.closable;return a}var d=b("component/container"),f=b("tabs/bar"),h=b("tabs/body");b("tabs/tab");var k=b("tabs/panel"),i=b("util"),m={top:0,left:0,bottom:1,right:0},b=d.extend({initializer:function(){var c=this.get("items");if(c){var a=
this.get("children"),d=this.get("barOrientation"),b,e=this.get("prefixCls"),f={prefixCls:e,xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},e={prefixCls:e,xclass:"tabs-body",lazyRender:this.get("lazyRender"),children:[]},k=f.children,g=e.children;i.each(c,function(c){b=b||c.selected;k.push(j(c));g.push({content:c.content,selected:c.selected})});if(!b&&k.length){k[0].selected=true;g[0].selected=true}a[m[d]]=f;a[1-m[d]]=e}},beforeCreateDom:function(c){c.elCls.push(this.getBaseCssClass(this.get("barOrientation")))},
decorateDom:function(){this.get("bar").set("changeType",this.get("changeType"))},bindUI:function(){this.on("afterSelectedTabChange",a);this.on("afterTabClose",e)},addItem:function(c,a){var d=this.get("bar"),b,e,f=d.get("children"),k=this.get("body");if(typeof a==="undefined")a=f.length;b=j(c);e={content:c.content};d.addChild(b,a);b=f[a];k.addChild(e,a);if(c.selected){d.set("selectedTab",b);k.set("selectedPanelIndex",a)}return this},removeItemAt:function(c,a){var d=this.get("bar"),b=d.get("children"),
e=d.getChildAt(c),j=this.get("body");e.get("selected")&&(b.length===1?d.set("selectedTab",null):c===0?d.set("selectedTab",d.getChildAt(c+1)):d.set("selectedTab",d.getChildAt(c-1)));d.removeChild(d.getChildAt(c),a);j.removeChild(j.getChildAt(c),a);return this},removeItemByTab:function(c,a){return this.removeItemAt(i.indexOf(c,this.get("bar").get("children")),a)},removeItemByPanel:function(c,a){return this.removeItemAt(i.indexOf(c,this.get("body").get("children")),a)},getSelectedTab:function(){var c=
this.get("bar"),a=null;i.each(c.get("children"),function(c){if(c.get("selected")){a=c;return false}});return a},getSelectedPanel:function(){var c=this.get("body"),a=null;i.each(c.get("children"),function(c){if(c.get("selected")){a=c;return false}});return a},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(c){return this.get("bar").get("children")[c]},getPanelAt:function(c){return this.get("body").get("children")[c]},
setSelectedTab:function(c){var a=this.get("bar"),d=this.get("body");a.set("selectedTab",c);d.set("selectedPanelIndex",i.indexOf(c,a.get("children")));return this},setSelectedPanel:function(a){var d=this.get("bar"),b=this.get("body"),a=i.indexOf(a,b.get("children"));b.set("selectedPanelIndex",a);d.set("selectedTab",this.getTabAt(a));return this},_onSetBarOrientation:function(a){this.$el.removeClass(this.getBaseCssClass("top bottom left right")).addClass(this.getBaseCssClass(a))}},{ATTRS:{handleGestureEvents:{value:false},
allowTextSelection:{value:true},focusable:{value:false},items:{},changeType:{},lazyRender:{value:false},bar:{getter:function(){return this.get("children")[m[this.get("barOrientation")]]}},body:{getter:function(){return this.get("children")[1-m[this.get("barOrientation")]]}},barOrientation:{render:1,sync:0,value:"top",parse:function(a){return(a=a[0].className.match(/(top|bottom|left|right)\b/))&&a[1]||void 0}}},xclass:"tabs"});b.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};b.ChangeType=
f.ChangeType;b.Bar=f;b.Body=h;b.Panel=k;g.exports=b});
KISSY.add("tabs/bar",["toolbar","util"],function(f,b,h,g){var f=b("toolbar"),e=b("util"),b=f.extend({beforeCreateDom:function(a){a.elAttrs.role="tablist"},bindUI:function(){var a=this;a.on("afterSelectedChange",function(b){b.newVal&&b.target.isTabsTab&&a.set("selectedTab",b.target)})},syncUI:function(){var a=this,b=a.get("children");e.each(b,function(d){if(d.get("selected"))return a.setInternal("selectedTab",d),!1})},handleKeyDownInternal:function(a){var b=this.get("selectedTab"),a=this.getNextItemByKeyDown(a,
b);if("boolean"===typeof a)return a;a.set("selected",!0);return!0},_onSetSelectedTab:function(a,b){var d;a&&(b&&(d=b.prevVal)&&d.set("selected",!1),a.set("selected",!0))},_onSetHighlightedItem:function(a,b){this.callSuper(a,b);"mouse"===this.get("changeType")&&this._onSetSelectedTab.apply(this,arguments)}},{ATTRS:{selectedTab:{},changeType:{value:"click"},defaultChildCfg:{valueFn:function(){return{xclass:"tabs-tab"}}}},xclass:"tabs-bar"});b.ChangeType={CLICK:"click",MOUSE:"mouse"};g.exports=b});
KISSY.add("tabs/body",["component/container","util"],function(f,b,h,g){function e(a,b,e){if(a.get("lazyRender")){var f=a.get("children")[e];if(!f.get("selected"))return f}return j.superclass[b].call(a,e)}var f=b("component/container"),a=b("util"),j=f.extend({bindUI:function(){var a=this;a.on("afterSelectedPanelIndexChange",function(b){var e=a.get("children"),f=b.newVal,c;e[f]&&((c=e[b.prevVal])&&c.set("selected",!1),a.selectPanelByIndex(f))})},syncUI:function(){var b=this,e=b.get("children");a.each(e,
function(a,e){if(a.get("selected"))return b.set("selectedPanelIndex",e),!1})},createChild:function(a){return e(this,"createChild",a)},renderChild:function(a){return e(this,"renderChild",a)},selectPanelByIndex:function(a){this.get("children")[a].set("selected",!0);this.get("lazyRender")&&this.renderChild(a)}},{ATTRS:{allowTextSelection:{value:!0},focusable:{value:!1},handleGestureEvents:{value:!1},selectedPanelIndex:{},lazyRender:{},defaultChildCfg:{valueFn:function(){return{xclass:"tabs-panel"}}}},
xclass:"tabs-body"});g.exports=j});
KISSY.add("tabs/tab",["button","./tab-xtpl","component/extension/content-box"],function(f,b,h,g){function e(){this.fire("afterTabClose")}f=b("button");h=b("./tab-xtpl");b=b("component/extension/content-box");g.exports=f.extend([b],{initializer:function(){this.publish("beforeTabClose",{defaultFn:e,defaultTargetOnly:!0})},isTabsTab:!0,beforeCreateDom:function(a){var b=a.elAttrs;b.role="tab";a.selected&&(b["aria-selected"]=!0,a.elCls.push(this.getBaseCssClasses("selected")));a.closable&&a.elCls.push(this.getBaseCssClasses("closable"))},
handleClickInternal:function(a){this.get("closable")&&a.target===this.get("closeBtn")[0]?this.fire("beforeTabClose"):(this.callSuper(a),this.set("selected",!0))},_onSetSelected:function(a){var b=this.$el,e=this.getBaseCssClasses("selected");b[a?"addClass":"removeClass"](e).attr("aria-selected",!!a)}},{ATTRS:{allowTextSelection:{value:!1},focusable:{value:!1},handleGestureEvents:{value:!1},contentTpl:{value:h},closable:{value:!1,render:1,sync:0,parse:function(){return!!this.get("closeBtn")}},closeBtn:{selector:function(){return"."+
this.getBaseCssClass("close")}},selected:{render:1,sync:0,parse:function(a){return a.hasClass(this.getBaseCssClass("selected"))}}},xclass:"tabs-tab"})});
KISSY.add("tabs/tab-xtpl",[],function(f,b,h,g){g.exports=function(b,a,f){var d=this,g=d.pos={line:1,col:1},i=d.root.utils.callFn,h=d.root.nativeCommands["if"];a.append('<div class="');var c={escape:1},l=[];l.push("content");c.params=l;g.line=1;g.col=33;if((c=i(d,b,c,a,["getBaseCssClasses"]))&&c.isBuffer)a=c,c=f;a.writeEscaped(c);a.append('">');c=b.resolve(["content"]);a.write(c);a.append("</div>\r\n");var c={escape:1},l=[],n=b.resolve(["closable"]);l.push(n);c.params=l;c.fn=function(a,b){b.append('\r\n<span class="');
var c={escape:1},e=[];e.push("close");c.params=e;g.line=3;g.col=33;if((c=i(d,a,c,b,["getBaseCssClasses"]))&&c.isBuffer)b=c,c=f;b.writeEscaped(c);b.append('">close</span>\r\n');return b};g.line=2;g.col=5;return a=h.call(d,b,c,a)};g.exports.TPL_NAME=g.name});
KISSY.add("tabs/panel",["component/container"],function(f,b,h,g){f=b("component/container");g.exports=f.extend({isTabsPanel:1,beforeCreateDom:function(b){b.elAttrs.role="tabpanel";b.selected?b.elCls.push(this.getBaseCssClasses("selected")):b.elAttrs["aria-hidden"]=!1},_onSetSelected:function(b){var a=this.$el,f=this.getBaseCssClasses("selected");a[b?"addClass":"removeClass"](f).attr("aria-hidden",!b)}},{ATTRS:{allowTextSelection:{value:!0},focusable:{value:!1},handleGestureEvents:{value:!1},selected:{render:1,
sync:0,parse:function(b){return b.hasClass(this.getBaseCssClass("selected"))}}},xclass:"tabs-panel"})});
