/*
Copyright 2013, KISSY v1.50
MIT Licensed
build time: Dec 26 01:25
*/
KISSY.add("navigation-view/bar-xtpl",[],function(){return function(d){var a;a=this.config.utils;var e=a.renderOutput,f=a.runInlineCommand,g=a.getPropertyOrRunCommand;a='<div class="';var b={},c=[];c.push("title-wrap");b.params=c;b=f(this,d,b,"getBaseCssClasses",1);a+=e(b,!0);a+='">\r\n    <div class="';b={};c=[];c.push("title");b.params=c;b=f(this,d,b,"getBaseCssClasses",2);a+=e(b,!0);a+='" id="ks-navigation-bar-title-';b=g(this,d,{},"id",0,2);a+=e(b,!0);a+='">';b=g(this,d,{},"title",0,2);a+=e(b,
!0);a+='</div>\r\n</div>\r\n<div class="';b={};c=[];c.push("content");b.params=c;b=f(this,d,b,"getBaseCssClasses",4);a+=e(b,!0);a+='" id="ks-navigation-bar-content-';b=g(this,d,{},"id",0,4);a+=e(b,!0);a+='">\r\n    <div class="';b={};c=[];c.push("back");b.params=c;b=f(this,d,b,"getBaseCssClasses",5);a+=e(b,!0);a+='" style="display: none"\r\n         id="ks-navigation-bar-back-';b=g(this,d,{},"id",0,6);a+=e(b,!0);a+='">';g=g(this,d,{},"backText",0,6);a+=e(g,!0);a+='</div>\r\n    <div class="';g={};
b=[];b.push("center");g.params=b;d=f(this,d,g,"getBaseCssClasses",7);a+=e(d,!0);return a+'"></div>\r\n</div>'}});
KISSY.add("navigation-view/bar-render",["./bar-xtpl","component/control"],function(d,a){var e=a("./bar-xtpl");return a("component/control").getDefaultRender().extend({createDom:function(){this.fillChildrenElsBySelectors({titleEl:"#ks-navigation-bar-title-{id}",contentEl:"#ks-navigation-bar-content-{id}",backEl:"#ks-navigation-bar-back-{id}"})},_onSetTitle:function(a){this.control.get("titleEl").html(a)},_onSetBackText:function(a){this.control.get("backEl").html(a)}},{ATTRS:{contentTpl:{value:e}}})});
KISSY.add("navigation-view/bar",["component/control","./bar-render"],function(d,a){function e(a){var b;b=a.clone(!0);b[0].id=a[0].id+"-proxy";a.parent().append(b);var d=a.offset();b.css("position","absolute");b.offset(d);b.css({width:a.css("width"),height:a.css("height")});return b}function f(a,b,d){a.animate(b,{duration:0.25,useTransition:!0,easing:"ease-in-out",complete:d})}function g(a,b,d){var h=a.get("el"),e=a.get("backEl"),c=a.get("titleEl"),a=Math.min(h[0].offsetWidth/3,200),g=e[0].offsetWidth,
e=h[0].offsetWidth,h=c.offset().left-h.offset().left,c=c[0].offsetWidth,f=b.width,i;d?(b=-f,f=Math.min(h-f,a)):(f=-f,b=Math.min(h,a));a={element:{from:{transform:"translateX("+b+"px) translateZ(0)"},to:{transform:"translateX(0) translateZ(0)",opacity:1}},ghost:{to:{transform:"translateX("+f+"px) translateZ(0)",opacity:0}}};g=-h+g;c>h&&(i=-h-c);d?(f=e-h-c,b=void 0!==i?i:g):(f=void 0!==i?i:g,b=Math.max(0,e-h-c));return{back:a,title:{element:{from:{transform:"translateX("+b+"px) translateZ(0)"},to:{transform:"translateX(0) translateZ(0)",
opacity:1}},ghost:{to:{transform:"translateX("+f+"px) translateZ(0)",opacity:0}}}}}var b=a("component/control"),c=a("./bar-render");return b.extend({forward:function(a){this.go(a,!0)},go:function(a,b,d){var c=this.get("backEl"),l={width:c[0].offsetWidth},j=e(c);c.css("opacity",0);c[b?"show":"hide"]();var b=this.get("titleEl"),k=e(b.parent());b.css("opacity",0);this.set("title",a);a=g(this,l,d);c.css(a.back.element.from);"none"!==c.css("display")&&f(c,a.back.element.to);b.css(a.title.element.from);
f(b,a.title.element.to);"none"!==j.css("display")?f(j,a.back.ghost.to,function(){j.remove()}):j.remove();f(k,a.title.ghost.to,function(){k.remove()})},back:function(a,b){this.go(a,b,!0)}},{xclass:"navigation-bar",ATTRS:{xrender:{value:c},contentEl:{view:1},backEl:{view:1},titleEl:{view:1},title:{value:"",view:1},backText:{value:"Back",view:1}}})});KISSY.add("navigation-view",["navigation-view/bar"],function(d,a){return{Bar:a("navigation-view/bar")}});
