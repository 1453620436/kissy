/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Jan 13 20:37
*/
KISSY.add("navigation-view/bar-xtpl",[],function(){return function(j){var b,f=this;b=this.config.utils;var h=b.runBlockCommand,i=b.renderOutput,k=b.getProperty,o=b.runInlineCommand,l=b.getPropertyOrRunCommand;b="";var n={},a=[],k=k(f,j,"withTitle",0,1);a.push(k);n.params=a;n.fn=function(a){var d;d='\r\n<div class="';var m={},e=[];e.push("title-wrap");m.params=e;m=o(f,a,m,"getBaseCssClasses",2);d+=i(m,!0);d+='">\r\n    <div class="';m={};e=[];e.push("title");m.params=e;m=o(f,a,m,"getBaseCssClasses",
3);d+=i(m,!0);d+='" id="ks-navigation-bar-title-';m=l(f,a,{},"id",0,3);d+=i(m,!0);d+='">';a=l(f,a,{},"title",0,3);d+=i(a,!0);return d+"</div>\r\n</div>\r\n"};b+=h(f,j,n,"if",1);b+='\r\n<div class="';h={};k=[];k.push("content");h.params=k;h=o(f,j,h,"getBaseCssClasses",6);b+=i(h,!0);b+='" id="ks-navigation-bar-content-';h=l(f,j,{},"id",0,6);b+=i(h,!0);b+='">\r\n    <div class="';h={};k=[];k.push("center");h.params=k;h=o(f,j,h,"getBaseCssClasses",7);b+=i(h,!0);b+='" id="ks-navigation-bar-center-';j=
l(f,j,{},"id",0,7);b+=i(j,!0);return b+'"></div>\r\n</div>'}});
KISSY.add("navigation-view/bar-render",["./bar-xtpl","component/control"],function(j,b){var f=b("./bar-xtpl");return b("component/control").getDefaultRender().extend({createDom:function(){var b={centerEl:"#ks-navigation-bar-center-{id}",contentEl:"#ks-navigation-bar-content-{id}"};this.control._withTitle&&(b.titleEl="#ks-navigation-bar-title-{id}");this.fillChildrenElsBySelectors(b)},_onSetTitle:function(b){this.control._withTitle&&this.control.get("titleEl").html(b)},_onSetBackText:function(b){this.control._backBtn&&
this.control._backBtn.set("content",b)}},{ATTRS:{contentTpl:{value:f}}})});
KISSY.add("navigation-view/bar",["component/control","./bar-render","button"],function(j,b){function f(a){var c;c=a.clone(!0);c[0].id=a[0].id+"-proxy";a.parent().append(c);var d=a.offset();c.css("position","absolute");c.offset(d);c.css({width:a.css("width"),height:a.css("height")});return c}function h(a,c,d){a.animate(c,{duration:0.25,useTransition:!0,easing:"ease-in-out",complete:d})}function i(a,c,d,b){var e=a.get("el"),g=a.get("titleEl"),a=Math.min(e[0].offsetWidth/3,200),h=c[0].offsetWidth,c=
e[0].offsetWidth,e=g.offset().left-e.offset().left,g=g[0].offsetWidth,f=d.width,i;b?(d=-f,f=Math.min(e-f,a)):(f=-f,d=Math.min(e,a));a={element:{from:{transform:"translateX("+d+"px) translateZ(0)"},to:{transform:"translateX(0) translateZ(0)",opacity:1}},ghost:{to:{transform:"translateX("+f+"px) translateZ(0)",opacity:0}}};h=-e+h;g>e&&(i=-e-g);b?(f=c-e-g,d=void 0!==i?i:h):(f=void 0!==i?i:h,d=Math.max(0,c-e-g));return{back:a,title:{element:{from:{transform:"translateX("+d+"px) translateZ(0)"},to:{transform:"translateX(0) translateZ(0)",
opacity:1}},ghost:{to:{transform:"translateX("+f+"px) translateZ(0)",opacity:0}}}}}function k(){this.fire("back")}var o=b("component/control"),l=b("./bar-render"),n=b("button");return o.extend({initializer:function(){this._withTitle=this.get("withTitle")},renderUI:function(){var a=this.get("prefixCls");this._buttons={};this.get("withBackButton")&&(this._backBtn=(new n({prefixCls:a+"navigation-bar-",elCls:a+"navigation-bar-back",elBefore:this.get("contentEl")[0].firstChild,visible:!1,content:this.get("backText")})).render())},
bindUI:function(){if(this._backBtn)this._backBtn.on("click",k,this)},addButton:function(a,c){var d=this.get("prefixCls");c.prefixCls=d+"navigation-bar-";!c.elBefore&&!c.render&&(d=c.align=c.align||"left","left"===d?c.elBefore=this.get("centerEl"):"right"===d&&(c.render=this.get("contentEl")),delete c.align);this._buttons[a]=(new n(c)).render();return this._buttons[a]},insertButtonBefore:function(a,c,d){c.elBefore=d.get("el");return this.addButton(a,c)},removeButton:function(a){this._buttons[a].destroy();
delete this._buttons[a]},getButton:function(a){return this._buttons[a]},forward:function(a){this.go(a,!0)},go:function(a,c,d){var b=this,e=b._backBtn;if(!e||!b._withTitle){if(b._withTitle&&b.get("titleEl").html(a),e)e[c?"show":"hide"]()}else{var g=e.get("el");g.stop(!0);b.ghostBackEl&&b.ghostBackEl.stop(!0);var k={width:g[0].offsetWidth},j=f(g);b.ghostBackEl=j;g.css("opacity",0);e[c?"show":"hide"]();b.ghostBackEl&&b.ghostBackEl.stop(!0);c=i(b,g,k,d);g.css(c.back.element.from);e.get("visible")&&h(g,
c.back.element.to);"none"!==j.css("display")?h(j,c.back.ghost.to,function(){j.remove();b.ghostBackEl=null}):(j.remove(),b.ghostBackEl=null);e=b.get("titleEl");e.stop(!0);var l=f(e.parent());b.ghostTitleEl=l;e.css("opacity",0);b.set("title",a);e.css(c.title.element.from);h(e,c.title.element.to);h(l,c.title.ghost.to,function(){l.remove();b.ghostTitleEl=null})}},back:function(a,c){this.go(a,c,!0)}},{xclass:"navigation-bar",ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},xrender:{value:l},centerEl:{},
contentEl:{},titleEl:{},title:{value:"",view:1},withBackButton:{value:1},withTitle:{value:1,view:1},backText:{value:"Back",view:1}}})});
KISSY.add("navigation-view",["node","component/container","navigation-view/bar","component/extension/content-xtpl","component/extension/content-render"],function(j,b){function f(a){a.target===this.get("bar")&&this.pop()}var h=b("node").all,i=b("component/container"),k=b("navigation-view/bar"),o=b("component/extension/content-xtpl"),l=b("component/extension/content-render"),n=0,l=i.getDefaultRender().extend([l],{renderUI:function(){var a=h(j.substitute('<div class="{prefixCls}navigation-view-loading"><div class="{prefixCls}navigation-view-loading-outer"><div class="{prefixCls}navigation-view-loading-inner"></div></div></div>',
{prefixCls:this.control.get("prefixCls")}));this.control.get("contentEl").append(a);this.control.loadingEl=a}});return i.extend({initializer:function(){this.publish("back",{defaultFn:f,defaultTargetOnly:!1})},renderUI:function(){this.viewStack=[];var a;a=this.get("barCfg");a.elBefore=this.get("el")[0].firstChild;this.setInternal("bar",a=(new k(a)).render());a.addTarget(this)},push:function(a){var c=this,b=this.get("bar");a.get("render")||c.addChild(a);var f=a.get("el");f.css("transform","translateX(-9999px) translateZ(0)");
a.uuid=n++;var e,g=this.loadingEl;this.viewStack.push(a);(e=this.activeView)&&e.leave?e.leave():c.waitingView&&c.waitingView.leave&&c.waitingView.leave();a.enter&&a.enter();e?(e=e.get("el"),e.stop(!0),e.animate({transform:"translateX(-"+e[0].offsetWidth+"px) translateZ(0)"},{useTransition:!0,easing:"ease-in-out",duration:0.25}),a.promise?(g.stop(!0),g.css("left","100%"),g.show(),g.animate({left:"0"},{useTransition:!0,easing:"ease-in-out",duration:0.25}),this.activeView=null):(f.stop(!0),f.css("transform",
"translateX("+e[0].offsetWidth+"px) translateZ(0)"),f.animate({transform:""},{useTransition:!0,easing:"ease-in-out",duration:0.25}),this.activeView=a,c.waitingView=null),b.forward(a.get("title")||"")):(b.set("title",a.get("title")),a.promise||(a.get("el").css("transform",""),this.activeView=a,c.waitingView=null,g.hide()));a.promise&&(c.waitingView=a,a.promise.then(function(){if(c.waitingView&&c.waitingView.uuid===a.uuid){c.activeView=a;c.waitingView=null;a.get("el").css("transform","");b.set("title",
a.get("title")||"");g.hide()}}))},pop:function(){var a=this;if(1<this.viewStack.length){this.viewStack.pop();var b=this.viewStack[this.viewStack.length-1];b.uuid=n++;var d,f=this.loadingEl,e=this.get("bar");(d=this.activeView)&&d.leave?d.leave():a.waitingView&&a.waitingView.leave&&a.waitingView.leave();b.enter&&b.enter();if(d){var g=d.get("el");g.stop(!0);g.animate({transform:"translateX("+d.get("el")[0].offsetWidth+"px) translateZ(0)"},{useTransition:!0,easing:"ease-in-out",duration:0.25});b.promise?
(this.activeView=null,f.stop(!0),f.css("left","-100%"),f.show(),f.animate({left:"0"},{useTransition:!0,easing:"ease-in-out",duration:0.25})):(d=b.get("el"),d.stop(!0),d.css("transform","translateX(-"+g[0].offsetWidth+"px) translateZ(0)"),d.animate({transform:""},{useTransition:!0,easing:"ease-in-out",duration:0.25}),this.activeView=b)}else b.promise||(b.get("el").css("transform",""),this.activeView=b,a.waitingView=null,f.hide());e.back(b.get("title")||"",1<this.viewStack.length);b.promise&&(a.waitingView=
b,b.promise.then(function(){a.waitingView&&a.waitingView.uuid===b.uuid&&(a.waitingView=null,a.activeView=b,b.get("el").css("transform",""),e.set("title",b.get("title")||""),f.hide())}))}}},{xclass:"navigation-view",ATTRS:{barCfg:{value:{}},handleMouseEvents:{value:!1},focusable:{value:!1},xrender:{value:l},contentTpl:{value:o}}})});
