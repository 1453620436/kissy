/*
Copyright 2013, KISSY v1.50
MIT Licensed
build time: Dec 27 22:09
*/
KISSY.add("navigation-view/bar-xtpl",[],function(){return function(d){var a;a=this.config.utils;var e=a.renderOutput,h=a.runInlineCommand,c=a.getPropertyOrRunCommand;a='<div class="';var b={},g=[];g.push("title-wrap");b.params=g;b=h(this,d,b,"getBaseCssClasses",1);a+=e(b,!0);a+='">\r\n    <div class="';b={};g=[];g.push("title");b.params=g;b=h(this,d,b,"getBaseCssClasses",2);a+=e(b,!0);a+='" id="ks-navigation-bar-title-';b=c(this,d,{},"id",0,2);a+=e(b,!0);a+='">';b=c(this,d,{},"title",0,2);a+=e(b,
!0);a+='</div>\r\n</div>\r\n<div class="';b={};g=[];g.push("content");b.params=g;b=h(this,d,b,"getBaseCssClasses",4);a+=e(b,!0);a+='" id="ks-navigation-bar-content-';c=c(this,d,{},"id",0,4);a+=e(c,!0);a+='">\r\n    <div class="';c={};b=[];b.push("center");c.params=b;d=h(this,d,c,"getBaseCssClasses",5);a+=e(d,!0);return a+'"></div>\r\n</div>'}});
KISSY.add("navigation-view/bar-render",["./bar-xtpl","component/control"],function(d,a){var e=a("./bar-xtpl");return a("component/control").getDefaultRender().extend({createDom:function(){this.fillChildrenElsBySelectors({titleEl:"#ks-navigation-bar-title-{id}",contentEl:"#ks-navigation-bar-content-{id}"})},_onSetTitle:function(a){this.control.get("titleEl").html(a)},_onSetBackText:function(a){this.control.get("backButton").set("content",a)}},{ATTRS:{contentTpl:{value:e}}})});
KISSY.add("navigation-view/bar",["component/control","./bar-render","button"],function(d,a){function e(l){var a;a=l.clone(!0);a[0].id=l[0].id+"-proxy";l.parent().append(a);var b=l.offset();a.css("position","absolute");a.offset(b);a.css({width:l.css("width"),height:l.css("height")});return a}function h(a,b,k){a.animate(b,{duration:0.25,useTransition:!0,easing:"ease-in-out",complete:k})}function c(a,b,k,j){var f=a.get("el"),i=a.get("titleEl"),a=Math.min(f[0].offsetWidth/3,200),e=b[0].offsetWidth,b=
f[0].offsetWidth,f=i.offset().left-f.offset().left,i=i[0].offsetWidth,c=k.width,d;j?(k=-c,c=Math.min(f-c,a)):(c=-c,k=Math.min(f,a));a={element:{from:{transform:"translateX("+k+"px) translateZ(0)"},to:{transform:"translateX(0) translateZ(0)",opacity:1}},ghost:{to:{transform:"translateX("+c+"px) translateZ(0)",opacity:0}}};e=-f+e;i>f&&(d=-f-i);j?(c=b-f-i,k=void 0!==d?d:e):(c=void 0!==d?d:e,k=Math.max(0,b-f-i));return{back:a,title:{element:{from:{transform:"translateX("+k+"px) translateZ(0)"},to:{transform:"translateX(0) translateZ(0)",
opacity:1}},ghost:{to:{transform:"translateX("+c+"px) translateZ(0)",opacity:0}}}}}var b=a("component/control"),g=a("./bar-render"),m=a("button");return b.extend({renderUI:function(){var a=this.get("prefixCls");this.set("backBtn",(new m({prefixCls:a+"navigation-bar-back-",elBefore:this.get("contentEl")[0].firstChild,visible:!1,content:this.get("backText")})).render())},forward:function(a){this.go(a,!0)},go:function(a,b,d){var j=this.get("backBtn").get("el"),f={width:j[0].offsetWidth},i=e(j);j.css("opacity",
0);j[b?"show":"hide"]();var b=this.get("titleEl"),g=e(b.parent());b.css("opacity",0);this.set("title",a);a=c(this,j,f,d);j.css(a.back.element.from);"none"!==j.css("display")&&h(j,a.back.element.to);b.css(a.title.element.from);h(b,a.title.element.to);"none"!==i.css("display")?h(i,a.back.ghost.to,function(){i.remove()}):i.remove();h(g,a.title.ghost.to,function(){g.remove()})},back:function(a,b){this.go(a,b,!0)}},{xclass:"navigation-bar",ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},xrender:{value:g},
contentEl:{view:1},titleEl:{view:1},title:{value:"",view:1},backText:{value:"Back",view:1}}})});
KISSY.add("navigation-view","node,component/container,component/control,navigation-view/bar,component/extension/content-xtpl,component/extension/content-render".split(","),function(d,a){var e=a("node").all,h=a("component/container"),c=a("component/control"),b=a("navigation-view/bar"),g=a("component/extension/content-xtpl"),m=a("component/extension/content-render"),c=c.extend({pause:function(){},resume:function(){}},{xclass:"navigation-sub-view",ATTRS:{handleMouseEvents:{value:false},promise:{},focusable:{value:false}}}),
m=h.getDefaultRender().extend([m],{renderUI:function(){var a=e(d.substitute('<div class="{prefixCls}navigation-view-loading"><div class="{prefixCls}navigation-view-loading-outer"><div class="{prefixCls}navigation-view-loading-inner"></div></div></div>',{prefixCls:this.control.get("prefixCls")}));this.control.get("contentEl").append(a);this.control.setInternal("loadingEl",a)}});return h.extend({renderUI:function(){this.viewStack=[];var a;this.setInternal("bar",a=(new b({elBefore:this.get("el")[0].firstChild})).render());
a.get("backBtn").on("click",this.onBack,this)},onBack:function(){this.pop()},push:function(a){var b=this,c=this.get("bar");a.get("rendered")?a.resume():this.addChild(a);a.get("el").css("transform","translateX(-9999px) translateZ(0)");var d,f=this.get("loadingEl");if(d=this.get("activeView")){var e=d.get("el");this.viewStack.push(d);f.css("left","100%");e.animate({transform:"translateX(-"+e[0].offsetWidth+"px) translateZ(0)"},{useTransition:true,easing:"ease-in-out",duration:0.25});f.show();f.animate({left:"0"},
{useTransition:true,easing:"ease-in-out",duration:0.25});this.set("activeView",null);c.forward(a.get("title"))}else c.set("title",a.get("title"));b.waitingView=a;a.get("promise").then(function(){if(b.waitingView===a){b.set("activeView",a);a.get("el").css("transform","");f.hide()}})},pop:function(){var a=this;if(this.viewStack.length){var b=this.viewStack.pop();b.resume();var c,d=this.get("loadingEl"),e=this.get("bar");if(c=this.get("activeView")){this.viewStack.push(c);d.css("left","-100%");c.get("el").animate({transform:"translateX("+
c.get("el")[0].offsetWidth+"px) translateZ(0)"},{useTransition:true,easing:"ease-in-out",duration:0.25});d.show();d.animate({left:"0"},{useTransition:true,easing:"ease-in-out",duration:0.25});this.set("activeView",null)}e.back(b.get("title"));a.waitingView=b;b.get("promise").then(function(){if(a.waitingView===b){a.set("activeView",b);b.get("el").css("transform","");d.hide()}})}}},{SubView:c,xclass:"navigation-view",ATTRS:{activeView:{},loadingEl:{},handleMouseEvents:{value:false},focusable:{value:false},
xrender:{value:m},contentTpl:{value:g},defaultChildCfg:{value:{xclass:"navigation-sub-view"}}}})});
