/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 26 21:38
*/
KISSY.add("event/dom/base","./base/dom-event,./base/object,./base/key-codes,./base/special-events,./base/mouseenter,util".split(","),function(a,b){var d=b("./base/dom-event"),i=b("./base/object"),j=b("./base/key-codes"),n=b("./base/special-events");b("./base/mouseenter");return b("util").merge({add:d.on,remove:d.detach,KeyCode:j,Special:n,Object:i},d)});
KISSY.add("event/dom/base/dom-event","event/base,./utils,dom,./special,./observable,./object,util".split(","),function(a,b){function d(f,c){var h=o[c]||{},g;if(!f.originalType&&(g=h.typeFix)){f.originalType=c;c=g}return c}function i(f,c,h){var e,a,b,h=g.merge(h),c=d(h,c);e=l.getDomEventObservablesHolder(f,1);if(!(b=e.handle)){b=e.handle=function(c){var f=c.type,q=b.currentTarget;if(!(l.triggeredEvent===f||typeof KISSY==="undefined"))if(f=l.getDomEventObservable(q,f)){c.currentTarget=q;c=new p(c);
return f.notify(c)}};b.currentTarget=f}if(!(a=e.observables))a=e.observables={};e=a[c];if(!e){e=a[c]=new l({type:c,currentTarget:f});e.setup()}e.on(h);f=null}function j(f,c,h){var h=g.merge(h),c=d(h,c),f=l.getDomEventObservablesHolder(f),e=(f||{}).observables;if(f&&e)if(c)(c=e[c])&&c.detach(h);else for(c in e)e[c].detach(h)}var n=b("event/base"),m=b("./utils"),k=b("dom"),o=b("./special"),l=b("./observable"),p=b("./object"),g=b("util"),f=n.Utils,e={on:function(q,c,e,g){q=k.query(q);f.batchForType(function(c,
q,e,g){for(var e=f.normalizeParam(q,e,g),h,q=e.type,g=c.length-1;g>=0;g--){h=c[g];i(h,q,e)}},1,q,c,e,g);return q},detach:function(e,c,g,a){e=k.query(e);f.batchForType(function(c,e,g,q){for(var g=f.normalizeParam(e,g,q),h,a,e=g.type,q=c.length-1;q>=0;q--){h=c[q];j(h,e,g);if(g.deep&&h.getElementsByTagName){a=h.getElementsByTagName("*");for(h=a.length-1;h>=0;h--)j(a[h],e,g)}}},1,e,c,g,a);return e},delegate:function(f,c,g,a,b){return e.on(f,c,{fn:a,context:b,filter:g})},undelegate:function(f,c,g,a,b){return e.detach(f,
c,{fn:a,context:b,filter:g})},fire:function(g,c,e,a){var b;if(c.isEventObject){e=c;c=c.type}e=e||{};e.synthetic=1;f.splitAndRun(c,function(c){var n,d,m;f.fillGroupsForEvent(c,e);c=e.type;if((d=o[c])&&d.typeFix)c=d.typeFix;g=k.query(g);for(d=g.length-1;d>=0;d--){n=g[d];m=l.getDomEventObservable(n,c);!a&&!m&&(m=new l({type:c,currentTarget:n}));if(m){n=m.fire(e,a);b!==false&&n!==void 0&&(b=n)}}});return b},fireHandler:function(f,c,g){return e.fire(f,c,g,1)},clone:function(f,c){var e;if(e=l.getDomEventObservablesHolder(f)){var a=
m.data(f);a&&a===m.data(c)&&m.removeData(c);g.each(e.observables,function(f,e){g.each(f.observers,function(f){i(c,e,f)})})}}};return e});
KISSY.add("event/dom/base/utils",["dom"],function(a,b){var d=b("dom"),i="ksEventTargetId_"+ +new Date,j=a.Env.host.document;return{simpleAdd:j&&j.addEventListener?function(a,b,d,j){a.addEventListener&&a.addEventListener(b,d,!!j)}:function(a,b,d){a.attachEvent&&a.attachEvent("on"+b,d)},simpleRemove:j&&j.removeEventListener?function(a,b,d,j){a.removeEventListener&&a.removeEventListener(b,d,!!j)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)},data:function(a,b){return d.data(a,i,b)},removeData:function(a){return d.removeData(a,
i)}}});KISSY.add("event/dom/base/special",[],function(){return{}});
KISSY.add("event/dom/base/observable","util,event/base,dom,./special,./utils,./observer,./object".split(","),function(a,b){function d(g){i.mix(this,g);this.reset()}var i=b("util"),j=b("event/base"),n=b("dom"),m=b("./special"),k=b("./utils"),o=b("./observer"),l=b("./object"),p=j.Utils;i.extend(d,j.Observable,{setup:function(){var g=this.type,f=m[g]||{},e=this.currentTarget,a=k.data(e).handle;(!f.setup||f.setup.call(e,g)===false)&&k.simpleAdd(e,g,a)},constructor:d,reset:function(){d.superclass.reset.call(this);
this.lastCount=this.delegateCount=0},notify:function(g){var f=g.target,e=g.type,a=this.currentTarget,c=this.observers,b=[],d,m,j=this.delegateCount||0,k,i;if(j&&f.nodeType)for(;f!==a;){if(f.disabled!==true||e!=="click"){var l={},o,p,r;k=[];for(m=0;m<j;m++){i=c[m];r=i.filter;p=r+"";o=l[p];o===void 0&&(o=l[p]=n.test(f,r));o&&k.push(i)}k.length&&b.push({currentTarget:f,currentTargetObservers:k})}f=f.parentNode||a}j<c.length&&b.push({currentTarget:a,currentTargetObservers:c.slice(j)});m=0;for(f=b.length;!g.isPropagationStopped()&&
m<f;++m){e=b[m];k=e.currentTargetObservers;e=e.currentTarget;g.currentTarget=e;for(e=0;!g.isImmediatePropagationStopped()&&e<k.length;e++){a=k[e];a=a.notify(g,this);d!==false&&a!==void 0&&(d=a)}}return d},fire:function(a,f){var a=a||{},e=""+this.type,b,c,h=m[e]||{};b=h.bubbles!==false;var k=this.currentTarget;if(!(h.fire&&h.fire.call(k,f)===false)){if(!a.isEventObject){c=a;a=new l({type:e});i.mix(a,c)}a.currentTarget=k;a.target=a.target||k;if(!(h.preFire&&h.preFire.call(k,a,f)===false)){c=k;var j=
n.getWindow(c),o=j.document,h=[],p,s="on"+e,t=0;do{h.push(c);c=c.parentNode||c.ownerDocument||c===o&&j}while(!f&&c&&b);c=h[t];do{a.currentTarget=c;if(b=d.getDomEventObservable(c,e)){b=b.notify(a);b!==void 0&&p!==false&&(p=b)}c[s]&&c[s].call(c)===false&&a.preventDefault();c=h[++t]}while(!f&&c&&!a.isPropagationStopped());if(!f&&!a.isDefaultPrevented()){try{if(k[e]&&!i.isWindow(k)){d.triggeredEvent=e;k[e]()}}catch(v){}d.triggeredEvent=""}return p}}},on:function(a){var f=this.observers,e=m[this.type]||
{},a=a instanceof o?a:new o(a);if(this.findObserver(a)===-1){if(a.filter){f.splice(this.delegateCount,0,a);this.delegateCount++}else if(a.last){f.push(a);this.lastCount++}else f.splice(f.length-this.lastCount,0,a);e.add&&e.add.call(this.currentTarget,a)}},detach:function(a){var f,e=m[this.type]||{},b="filter"in a,c=a.filter,h=a.context,d=a.fn,k=this.currentTarget,j=this.observers,a=a.groups;if(j.length){a&&(f=p.getGroupsRe(a));var n,i,l,o,u=j.length;if(d||b||f){h=h||k;n=a=0;for(i=[];a<u;++a){l=j[a];
o=l.context||k;if(h!==o||d&&d!==l.fn||b&&(c&&c!==l.filter||!c&&!l.filter)||f&&!l.groups.match(f))i[n++]=l;else{l.filter&&this.delegateCount&&this.delegateCount--;l.last&&this.lastCount&&this.lastCount--;e.remove&&e.remove.call(k,l)}}this.observers=i}else this.reset();this.checkMemory()}},checkMemory:function(){var a=this.type,f,e,b=m[a]||{},c=this.currentTarget,d=k.data(c);if(d){f=d.observables;if(!this.hasObserver()){e=d.handle;(!b.tearDown||b.tearDown.call(c,a)===false)&&k.simpleRemove(c,a,e);delete f[a]}if(i.isEmptyObject(f)){d.handle=
null;k.removeData(c)}}}});d.triggeredEvent="";d.getDomEventObservable=function(a,f){var e=k.data(a),b;if(e)b=e.observables;return b?b[f]:null};d.getDomEventObservablesHolder=function(a,f){var e=k.data(a);!e&&f&&k.data(a,e={});return e};return d});
KISSY.add("event/dom/base/observer",["event/base","./special","util"],function(a,b){function d(a){d.superclass.constructor.call(this,a)}var i=b("event/base"),j=b("./special");b("util").extend(d,i.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var d,i,l=a.type,p;(p=this.originalType)?a.type=p:p=l;(d=j[p])&&d.handle?(d=d.handle(a,this,b))&&0<d.length&&(i=d[0]):i=this.simpleNotify(a,b);!1===i&&a.halt();a.type=l;return i}});return d});
KISSY.add("event/dom/base/object",["event/base","util"],function(a,b){function d(){return o}function i(){return l}function j(a){var e=a.type,b="function"===typeof a.stopPropagation||"boolean"===typeof a.cancelBubble;j.superclass.constructor.call(this);this.originalEvent=a;var c=i;"defaultPrevented"in a?c=a.defaultPrevented?d:i:"getPreventDefault"in a?c=a.getPreventDefault()?d:i:"returnValue"in a&&(c=a.returnValue===l?d:i);this.isDefaultPrevented=c;var h=[],n,o=p.concat();m.each(g,function(a){e.match(a.reg)&&
(o=o.concat(a.props),a.fix&&h.push(a.fix))});for(c=o.length;c;)n=o[--c],this[n]=a[n];!this.target&&b&&(this.target=a.srcElement||k);this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode);for(c=h.length;c;)b=h[--c],b(this,a);this.timeStamp=a.timeStamp||m.now()}var n=b("event/base"),m=b("util"),k=a.Env.host.document,o=!0,l=!1,p="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),g=[{reg:/^key/,props:["char","charCode",
"key","keyCode","which"],fix:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);void 0===a.metaKey&&(a.metaKey=a.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(a,b){var d,c,h,g=b.wheelDelta,j=b.axis,k=b.wheelDeltaY,m=b.wheelDeltaX,i=b.detail;g&&(h=g/120);i&&(h=0-(0===i%3?i/3:i));void 0!==
j&&(j===a.HORIZONTAL_AXIS?(c=0,d=0-h):j===a.VERTICAL_AXIS&&(d=0,c=h));void 0!==k&&(c=k/120);void 0!==m&&(d=-1*m/120);!d&&!c&&(c=h);void 0!==d&&(a.deltaX=d);void 0!==c&&(a.deltaY=c);void 0!==h&&(a.delta=h)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(a,b){var d,c,h=a.target,g=b.button;h&&null==a.pageX&&null!=b.clientX&&(d=h.ownerDocument||
k,c=d.documentElement,d=d.body,a.pageX=b.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0),a.pageY=b.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0));!a.which&&void 0!==g&&(a.which=g&1?1:g&2?3:g&4?2:0);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===h?a.toElement:a.fromElement);return a}}];m.extend(j,n.Object,{constructor:j,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=
l;j.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=o;j.superclass.stopPropagation.call(this)}});return j});
KISSY.add("event/dom/base/key-codes",[],function(){var a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,
Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){var d=b.keyCode;if(b.altKey&&!b.ctrlKey||b.metaKey||d>=a.F1&&d<=a.F12)return!1;switch(d){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||-1!==window.navigation.userAgent.indexOf("WebKit")&&0===b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}}};return a});
KISSY.add("event/dom/base/special-events",["./dom-event","./special","util","ua"],function(a,b){var d=b("./dom-event"),i=b("./special"),j=b("util"),n=b("ua").gecko?"DOMMouseScroll":"mousewheel";return j.mix(i,{mousewheel:{typeFix:n},load:{bubbles:!1},click:{fire:function(a){if(!a&&"checkbox"===""+this.type&&this.click&&"input"===this.nodeName.toLowerCase())return this.click(),!1}},focus:{bubbles:!1,preFire:function(a,b){if(!b)return d.fire(this,"focusin")},fire:function(a){if(!a&&this.ownerDocument&&
this!==this.ownerDocument.activeElement&&this.focus)return this.focus(),!1}},blur:{bubbles:!1,preFire:function(a,b){if(!b)return d.fire(this,"focusout")},fire:function(a){if(!a&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur)return this.blur(),!1}}})});
KISSY.add("event/dom/base/mouseenter",["dom","./special","util"],function(a,b){var d=b("dom"),i=b("./special");b("util").each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(a){i[a.name]={typeFix:a.fix,handle:function(a,b,j){var i=a.currentTarget,l=a.relatedTarget;if(!l||l!==i&&!d.contains(i,l))return[b.simpleNotify(a,j)]}}})});
