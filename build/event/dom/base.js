/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Apr 29 15:08
*/
KISSY.add("event/dom/base",["./base/dom-event","./base/object","./base/key-codes","./base/special-events","./base/mouseenter"],function(a,b){var c=b("./base/dom-event"),i=b("./base/object"),l=b("./base/key-codes"),j=b("./base/special-events");b("./base/mouseenter");return a.merge({add:c.on,remove:c.detach,KeyCode:l,Special:j,Object:i},c)});
KISSY.add("event/dom/base/dom-event","event/base,./utils,dom,./special,./observable,./object".split(","),function(a,b){function c(h,d){var a=o[d]||{},g;if(!h.originalType&&(g=a.typeFix)){h.originalType=d;d=g}return d}function i(h,d,q){var e,j,b,q=a.merge(q),d=c(q,d);e=n.getDomEventObservablesHolder(h,1);if(!(b=e.handle)){b=e.handle=function(d){var h=d.type,a=b.currentTarget;if(!(n.triggeredEvent===h||typeof KISSY==="undefined"))if(h=n.getDomEventObservable(a,h)){d.currentTarget=a;d=new g(d);return h.notify(d)}};
b.currentTarget=h}if(!(j=e.observables))j=e.observables={};e=j[d];if(!e){e=j[d]=new n({type:d,currentTarget:h});e.setup()}e.on(q);h=null}function l(d,f,g){var g=a.merge(g),f=c(g,f),d=n.getDomEventObservablesHolder(d),e=(d||{}).observables;if(d&&e)if(f)(f=e[f])&&f.detach(g);else for(f in e)e[f].detach(g)}var j=b("event/base"),k=b("./utils"),m=b("dom"),o=b("./special"),n=b("./observable"),g=b("./object"),d=j.Utils,e={on:function(h,a,g,e){h=m.query(h);d.batchForType(function(h,a,g,e){for(var g=d.normalizeParam(a,
g,e),f,a=g.type,e=h.length-1;e>=0;e--){f=h[e];i(f,a,g)}},1,h,a,g,e);return h},detach:function(h,a,g,e){h=m.query(h);d.batchForType(function(h,a,g,e){for(var g=d.normalizeParam(a,g,e),f,q,a=g.type,e=h.length-1;e>=0;e--){f=h[e];l(f,a,g);if(g.deep&&f.getElementsByTagName){q=f.getElementsByTagName("*");for(f=q.length-1;f>=0;f--)l(q[f],a,g)}}},1,h,a,g,e);return h},delegate:function(d,a,g,j,b){return e.on(d,a,{fn:j,context:b,filter:g})},undelegate:function(d,a,g,j,b){return e.detach(d,a,{fn:j,context:b,
filter:g})},fire:function(a,g,e,j){var b,e=e||{};e.synthetic=1;d.splitAndRun(g,function(g){var f,c,k;d.fillGroupsForEvent(g,e);g=e.type;if((c=o[g])&&c.typeFix)g=c.typeFix;a=m.query(a);for(c=a.length-1;c>=0;c--){f=a[c];k=n.getDomEventObservable(f,g);!j&&!k&&(k=new n({type:g,currentTarget:f}));if(k){f=k.fire(e,j);b!==false&&f!==void 0&&(b=f)}}});return b},fireHandler:function(d,g,a){return e.fire(d,g,a,1)},clone:function(d,g){var e;if(e=n.getDomEventObservablesHolder(d)){var b=k.data(d);b&&b===k.data(g)&&
k.removeData(g);a.each(e.observables,function(d,e){a.each(d.observers,function(d){i(g,e,d)})})}}};return e});
KISSY.add("event/dom/base/utils",["dom"],function(a,b){var c=b("dom"),i="ksEventTargetId_"+a.now(),l=a.Env.host.document;return{simpleAdd:l&&l.addEventListener?function(a,b,c,l){a.addEventListener&&a.addEventListener(b,c,!!l)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)},simpleRemove:l&&l.removeEventListener?function(a,b,c,l){a.removeEventListener&&a.removeEventListener(b,c,!!l)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},data:function(a,b){return c.data(a,i,b)},removeData:function(a){return c.removeData(a,
i)}}});KISSY.add("event/dom/base/special",[],function(){return{}});
KISSY.add("event/dom/base/observable","event/base,dom,./special,./utils,./observer,./object".split(","),function(a,b){function c(g){a.mix(this,g);this.reset()}var i=b("event/base"),l=b("dom"),j=b("./special"),k=b("./utils"),m=b("./observer"),o=b("./object"),n=i.Utils;a.extend(c,i.Observable,{setup:function(){var a=this.type,d=j[a]||{},e=this.currentTarget,h=k.data(e).handle;(!d.setup||d.setup.call(e,a)===false)&&k.simpleAdd(e,a,h)},constructor:c,reset:function(){c.superclass.reset.call(this);this.lastCount=
this.delegateCount=0},notify:function(a){var d=a.target,e=a.type,h=this.currentTarget,f=this.observers,b=[],c,j,k=this.delegateCount||0,i,n;if(k&&d.nodeType)for(;d!==h;){if(d.disabled!==true||e!=="click"){var m={},o,r,t;i=[];for(j=0;j<k;j++){n=f[j];t=n.filter;r=t+"";o=m[r];o===void 0&&(o=m[r]=l.test(d,t));o&&i.push(n)}i.length&&b.push({currentTarget:d,currentTargetObservers:i})}d=d.parentNode||h}k<f.length&&b.push({currentTarget:h,currentTargetObservers:f.slice(k)});j=0;for(d=b.length;!a.isPropagationStopped()&&
j<d;++j){e=b[j];i=e.currentTargetObservers;e=e.currentTarget;a.currentTarget=e;for(e=0;!a.isImmediatePropagationStopped()&&e<i.length;e++){h=i[e];h=h.notify(a,this);c!==false&&h!==void 0&&(c=h)}}return c},fire:function(g,d){var g=g||{},e=""+this.type,h,f,b=j[e]||{};h=b.bubbles!==false;var k=this.currentTarget;if(!(b.fire&&b.fire.call(k,d)===false)){if(!(g instanceof o)){f=g;g=new o({currentTarget:k,type:e,target:k});a.mix(g,f)}if(!(b.preFire&&b.preFire.call(k,g,d)===false)){f=k;var i=l.getWindow(f),
n=i.document,b=[],m,u="on"+e,p=0;do{b.push(f);f=f.parentNode||f.ownerDocument||f===n&&i}while(!d&&f&&h);f=b[p];do{g.currentTarget=f;if(h=c.getDomEventObservable(f,e)){h=h.notify(g);h!==void 0&&m!==false&&(m=h)}f[u]&&f[u].call(f)===false&&g.preventDefault();f=b[++p]}while(!d&&f&&!g.isPropagationStopped());if(!d&&!g.isDefaultPrevented()){try{if(k[e]&&!a.isWindow(k)){c.triggeredEvent=e;k[e]()}}catch(s){}c.triggeredEvent=""}return m}}},on:function(a){var d=this.observers,e=j[this.type]||{},a=a instanceof
m?a:new m(a);if(this.findObserver(a)===-1){if(a.filter){d.splice(this.delegateCount,0,a);this.delegateCount++}else if(a.last){d.push(a);this.lastCount++}else d.splice(d.length-this.lastCount,0,a);e.add&&e.add.call(this.currentTarget,a)}},detach:function(a){var d,e=j[this.type]||{},b="filter"in a,f=a.filter,c=a.context,k=a.fn,i=this.currentTarget,l=this.observers,a=a.groups;if(l.length){a&&(d=n.getGroupsRe(a));var m,o,p,s,r=l.length;if(k||b||d){c=c||i;m=a=0;for(o=[];a<r;++a){p=l[a];s=p.context||i;
if(c!==s||k&&k!==p.fn||b&&(f&&f!==p.filter||!f&&!p.filter)||d&&!p.groups.match(d))o[m++]=p;else{p.filter&&this.delegateCount&&this.delegateCount--;p.last&&this.lastCount&&this.lastCount--;e.remove&&e.remove.call(i,p)}}this.observers=o}else this.reset();this.checkMemory()}},checkMemory:function(){var b=this.type,d,e,h=j[b]||{},f=this.currentTarget,c=k.data(f);if(c){d=c.observables;if(!this.hasObserver()){e=c.handle;(!h.tearDown||h.tearDown.call(f,b)===false)&&k.simpleRemove(f,b,e);delete d[b]}if(a.isEmptyObject(d)){c.handle=
null;k.removeData(f)}}}});c.triggeredEvent="";c.getDomEventObservable=function(a,d){var e=k.data(a),b;if(e)b=e.observables;return b?b[d]:null};c.getDomEventObservablesHolder=function(a,d){var e=k.data(a);!e&&d&&k.data(a,e={});return e};return c});
KISSY.add("event/dom/base/observer",["event/base","./special"],function(a,b){function c(a){c.superclass.constructor.call(this,a)}var i=b("event/base"),l=b("./special");a.extend(c,i.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var c,i,n=a.type,g;(g=this.originalType)?a.type=g:g=n;(c=l[g])&&c.handle?(c=c.handle(a,this,b))&&0<c.length&&(i=c[0]):i=this.simpleNotify(a,b);!1===i&&a.halt();a.type=n;return i}});return c});
KISSY.add("event/dom/base/object",["event/base"],function(a,b){function c(){return m}function i(){return o}function l(d){var e=d.type;l.superclass.constructor.call(this);this.originalEvent=d;var b=i;"defaultPrevented"in d?b=d.defaultPrevented?c:i:"getPreventDefault"in d?b=d.getPreventDefault()?c:i:"returnValue"in d&&(b=d.returnValue===o?c:i);this.isDefaultPrevented=b;var f=[],j,m=n.concat();a.each(g,function(a){e.match(a.reg)&&(m=m.concat(a.props),a.fix&&f.push(a.fix))});for(b=m.length;b;)j=m[--b],
this[j]=d[j];this.target||(this.target=d.srcElement||k);3===this.target.nodeType&&(this.target=this.target.parentNode);for(b=f.length;b;)j=f[--b],j(this,d);this.timeStamp=d.timeStamp||a.now()}var j=b("event/base"),k=a.Env.host.document,m=!0,o=!1,n="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),g=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);
void 0===a.metaKey&&(a.metaKey=a.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(a,b){var c,f,g,j=b.wheelDelta,k=b.axis,i=b.wheelDeltaY,l=b.wheelDeltaX,m=b.detail;j&&(g=j/120);m&&(g=0-(0===m%3?m/3:m));void 0!==k&&(k===a.HORIZONTAL_AXIS?(f=0,c=0-g):k===a.VERTICAL_AXIS&&(c=0,f=g));void 0!==i&&(f=i/120);void 0!==l&&
(c=-1*l/120);!c&&!f&&(f=g);void 0!==c&&(a.deltaX=c);void 0!==f&&(a.deltaY=f);void 0!==g&&(a.delta=g)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(a,b){var c,f,g=a.target,j=b.button;null==a.pageX&&null!=b.clientX&&(c=g.ownerDocument||k,f=c.documentElement,c=c.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||
c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0));!a.which&&void 0!==j&&(a.which=j&1?1:j&2?3:j&4?2:0);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===g?a.toElement:a.fromElement);return a}}];a.extend(l,j.Object,{constructor:l,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=o;l.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?
a.stopPropagation():a.cancelBubble=m;l.superclass.stopPropagation.call(this)}});return l});
KISSY.add("event/dom/base/key-codes",[],function(){var a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,
Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){var c=b.keyCode;if(b.altKey&&!b.ctrlKey||b.metaKey||c>=a.F1&&c<=a.F12)return!1;switch(c){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||-1!==window.navigation.userAgent.indexOf("WebKit")&&0===b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}}};return a});
KISSY.add("event/dom/base/special-events",["./dom-event","./special","ua"],function(a,b){var c=b("./dom-event"),i=b("./special"),l=b("ua").gecko?"DOMMouseScroll":"mousewheel";return a.mix(i,{mousewheel:{typeFix:l},load:{bubbles:!1},click:{fire:function(a){if(!a&&"checkbox"===""+this.type&&this.click&&"input"===this.nodeName.toLowerCase())return this.click(),!1}},focus:{bubbles:!1,preFire:function(a,b){if(!b)return c.fire(this,"focusin")},fire:function(a){if(!a&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&
this.focus)return this.focus(),!1}},blur:{bubbles:!1,preFire:function(a,b){if(!b)return c.fire(this,"focusout")},fire:function(a){if(!a&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur)return this.blur(),!1}}})});
KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(a,b){var c=b("dom"),i=b("./special");a.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(a){i[a.name]={typeFix:a.fix,handle:function(a,b,i){var l=a.currentTarget,n=a.relatedTarget;if(!n||n!==l&&!c.contains(l,n))return[b.simpleNotify(a,i)]}}})});
