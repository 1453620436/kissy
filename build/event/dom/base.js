/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 14 22:25
*/
KISSY.add("event/dom/base","./base/dom-event,./base/object,./base/key-codes,./base/special-events,./base/mouseenter,util".split(","),function(a,b){var e=b("./base/dom-event"),k=b("./base/object"),h=b("./base/key-codes"),n=b("./base/special-events");b("./base/mouseenter");return b("util").merge({add:e.on,remove:e.detach,KeyCode:h,Special:n,Object:k},e)});
KISSY.add("event/dom/base/dom-event","event/base,./utils,dom,./special,./observable,./object,util".split(","),function(a,b){function e(j,f){var g=p[f]||{},i;if(!j.originalType&&(i=g.typeFix)){j.originalType=f;f=i}return f}function k(j,f,g){var d,a,b,g=i.merge(g),f=e(g,f);d=l.getDomEventObservablesHolder(j,1);if(!(b=d.handle)){b=d.handle=function(f){var j=f.type,c=b.currentTarget;if(!(l.triggeredEvent===j||typeof KISSY==="undefined"))if(j=l.getDomEventObservable(c,j)){f.currentTarget=c;f=new q(f);
return j.notify(f)}};b.currentTarget=j}if(!(a=d.observables))a=d.observables={};d=a[f];if(!d){d=a[f]=new l({type:f,currentTarget:j});d.setup()}d.on(g);j=null}function h(f,c,g){var g=i.merge(g),c=e(g,c),f=l.getDomEventObservablesHolder(f),d=(f||{}).observables;if(f&&d)if(c)(c=d[c])&&c.detach(g);else for(c in d)d[c].detach(g)}var n=b("event/base"),o=b("./utils"),m=b("dom"),p=b("./special"),l=b("./observable"),q=b("./object"),i=b("util"),f=n.Utils,d={on:function(j,c,d,i){j=m.query(j);f.batchForType(function(j,
c,d,i){for(var d=f.normalizeParam(c,d,i),g,c=d.type,i=j.length-1;i>=0;i--){g=j[i];k(g,c,d)}},1,j,c,d,i);return j},detach:function(j,c,d,i){j=m.query(j);f.batchForType(function(j,c,d,i){for(var d=f.normalizeParam(c,d,i),g,a,c=d.type,i=j.length-1;i>=0;i--){g=j[i];h(g,c,d);if(d.deep&&g.getElementsByTagName){a=g.getElementsByTagName("*");for(g=a.length-1;g>=0;g--)h(a[g],c,d)}}},1,j,c,d,i);return j},delegate:function(f,c,i,a,b){return d.on(f,c,{fn:a,context:b,filter:i})},undelegate:function(f,c,i,a,b){return d.detach(f,
c,{fn:a,context:b,filter:i})},fire:function(j,d,i,a){var b,i=i||{};i.synthetic=1;f.splitAndRun(d,function(d){var c,n,e;f.fillGroupsForEvent(d,i);d=i.type;if((n=p[d])&&n.typeFix)d=n.typeFix;j=m.query(j);for(n=j.length-1;n>=0;n--){c=j[n];e=l.getDomEventObservable(c,d);!a&&!e&&(e=new l({type:d,currentTarget:c}));if(e){c=e.fire(i,a);b!==false&&c!==void 0&&(b=c)}}});return b},fireHandler:function(f,i,a){return d.fire(f,i,a,1)},clone:function(f,d){var a;if(a=l.getDomEventObservablesHolder(f)){var b=o.data(f);
b&&b===o.data(d)&&o.removeData(d);i.each(a.observables,function(f,j){i.each(f.observers,function(f){k(d,j,f)})})}}};return d});
KISSY.add("event/dom/base/utils",["dom"],function(a,b){var e=b("dom"),k="ksEventTargetId_"+ +new Date,h=a.Env.host.document;return{simpleAdd:h&&h.addEventListener?function(a,b,e,h){a.addEventListener&&a.addEventListener(b,e,!!h)}:function(a,b,e){a.attachEvent&&a.attachEvent("on"+b,e)},simpleRemove:h&&h.removeEventListener?function(a,b,e,h){a.removeEventListener&&a.removeEventListener(b,e,!!h)}:function(a,b,e){a.detachEvent&&a.detachEvent("on"+b,e)},data:function(a,b){return e.data(a,k,b)},removeData:function(a){return e.removeData(a,
k)}}});KISSY.add("event/dom/base/special",[],function(){return{}});
KISSY.add("event/dom/base/observable","util,event/base,dom,./special,./utils,./observer,./object".split(","),function(a,b){function e(i){k.mix(this,i);this.reset()}var k=b("util"),h=b("event/base"),n=b("dom"),o=b("./special"),m=b("./utils"),p=b("./observer"),l=b("./object"),q=h.Utils;k.extend(e,h.Observable,{setup:function(){var i=this.type,f=o[i]||{},d=this.currentTarget,a=m.data(d).handle;(!f.setup||f.setup.call(d,i)===false)&&m.simpleAdd(d,i,a)},constructor:e,reset:function(){e.superclass.reset.call(this);
this.lastCount=this.delegateCount=0},notify:function(i){var f=i.target,d=i.type,a=this.currentTarget,c=this.observers,b=[],e,h,m=this.delegateCount||0,o,k;if(m&&f.nodeType)for(;f!==a;){if(f.disabled!==true||d!=="click"){var l={},p,q,r;o=[];for(h=0;h<m;h++){k=c[h];r=k.filter;q=r+"";p=l[q];p===void 0&&(p=l[q]=n.test(f,r));p&&o.push(k)}o.length&&b.push({currentTarget:f,currentTargetObservers:o})}f=f.parentNode||a}m<c.length&&b.push({currentTarget:a,currentTargetObservers:c.slice(m)});h=0;for(f=b.length;!i.isPropagationStopped()&&
h<f;++h){d=b[h];o=d.currentTargetObservers;d=d.currentTarget;i.currentTarget=d;for(d=0;!i.isImmediatePropagationStopped()&&d<o.length;d++){a=o[d];a=a.notify(i,this);e!==false&&a!==void 0&&(e=a)}}return e},fire:function(a,f){var a=a||{},d=""+this.type,b,c,g=o[d]||{};b=g.bubbles!==false;var h=this.currentTarget;if(!(g.fire&&g.fire.call(h,f)===false)){if(!(a instanceof l)){c=a;a=new l({currentTarget:h,type:d,target:h});k.mix(a,c)}if(!(g.preFire&&g.preFire.call(h,a,f)===false)){c=h;var m=n.getWindow(c),
p=m.document,g=[],q,s="on"+d,t=0;do{g.push(c);c=c.parentNode||c.ownerDocument||c===p&&m}while(!f&&c&&b);c=g[t];do{a.currentTarget=c;if(b=e.getDomEventObservable(c,d)){b=b.notify(a);b!==void 0&&q!==false&&(q=b)}c[s]&&c[s].call(c)===false&&a.preventDefault();c=g[++t]}while(!f&&c&&!a.isPropagationStopped());if(!f&&!a.isDefaultPrevented()){try{if(h[d]&&!k.isWindow(h)){e.triggeredEvent=d;h[d]()}}catch(v){}e.triggeredEvent=""}return q}}},on:function(a){var f=this.observers,d=o[this.type]||{},a=a instanceof
p?a:new p(a);if(this.findObserver(a)===-1){if(a.filter){f.splice(this.delegateCount,0,a);this.delegateCount++}else if(a.last){f.push(a);this.lastCount++}else f.splice(f.length-this.lastCount,0,a);d.add&&d.add.call(this.currentTarget,a)}},detach:function(a){var f,d=o[this.type]||{},b="filter"in a,c=a.filter,g=a.context,e=a.fn,h=this.currentTarget,m=this.observers,a=a.groups;if(m.length){a&&(f=q.getGroupsRe(a));var n,k,l,p,u=m.length;if(e||b||f){g=g||h;n=a=0;for(k=[];a<u;++a){l=m[a];p=l.context||h;
if(g!==p||e&&e!==l.fn||b&&(c&&c!==l.filter||!c&&!l.filter)||f&&!l.groups.match(f))k[n++]=l;else{l.filter&&this.delegateCount&&this.delegateCount--;l.last&&this.lastCount&&this.lastCount--;d.remove&&d.remove.call(h,l)}}this.observers=k}else this.reset();this.checkMemory()}},checkMemory:function(){var a=this.type,f,d,b=o[a]||{},c=this.currentTarget,g=m.data(c);if(g){f=g.observables;if(!this.hasObserver()){d=g.handle;(!b.tearDown||b.tearDown.call(c,a)===false)&&m.simpleRemove(c,a,d);delete f[a]}if(k.isEmptyObject(f)){g.handle=
null;m.removeData(c)}}}});e.triggeredEvent="";e.getDomEventObservable=function(a,f){var d=m.data(a),b;if(d)b=d.observables;return b?b[f]:null};e.getDomEventObservablesHolder=function(a,f){var d=m.data(a);!d&&f&&m.data(a,d={});return d};return e});
KISSY.add("event/dom/base/observer",["event/base","./special","util"],function(a,b){function e(a){e.superclass.constructor.call(this,a)}var k=b("event/base"),h=b("./special");b("util").extend(e,k.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var e,k,l=a.type,q;(q=this.originalType)?a.type=q:q=l;(e=h[q])&&e.handle?(e=e.handle(a,this,b))&&0<e.length&&(k=e[0]):k=this.simpleNotify(a,b);!1===k&&a.halt();a.type=l;return k}});return e});
KISSY.add("event/dom/base/object",["event/base","util"],function(a,b){function e(){return p}function k(){return l}function h(a){var b=a.type;h.superclass.constructor.call(this);this.originalEvent=a;var j=k;"defaultPrevented"in a?j=a.defaultPrevented?e:k:"getPreventDefault"in a?j=a.getPreventDefault()?e:k:"returnValue"in a&&(j=a.returnValue===l?e:k);this.isDefaultPrevented=j;var c=[],g,n=q.concat();o.each(i,function(a){b.match(a.reg)&&(n=n.concat(a.props),a.fix&&c.push(a.fix))});for(j=n.length;j;)g=
n[--j],this[g]=a[g];this.target||(this.target=a.srcElement||m);3===this.target.nodeType&&(this.target=this.target.parentNode);for(j=c.length;j;)g=c[--j],g(this,a);this.timeStamp=a.timeStamp||o.now()}var n=b("event/base"),o=b("util"),m=a.Env.host.document,p=!0,l=!1,q="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),i=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(a,b){null==a.which&&(a.which=null!=b.charCode?
b.charCode:b.keyCode);void 0===a.metaKey&&(a.metaKey=a.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(a,b){var e,c,g,h=b.wheelDelta,i=b.axis,k=b.wheelDeltaY,l=b.wheelDeltaX,m=b.detail;h&&(g=h/120);m&&(g=0-(0===m%3?m/3:m));void 0!==i&&(i===a.HORIZONTAL_AXIS?(c=0,e=0-g):i===a.VERTICAL_AXIS&&(e=0,c=g));void 0!==k&&
(c=k/120);void 0!==l&&(e=-1*l/120);!e&&!c&&(c=g);void 0!==e&&(a.deltaX=e);void 0!==c&&(a.deltaY=c);void 0!==g&&(a.delta=g)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(a,b){var e,c,g=a.target,h=b.button;null==a.pageX&&null!=b.clientX&&(e=g.ownerDocument||m,c=e.documentElement,e=e.body,a.pageX=b.clientX+(c&&c.scrollLeft||e&&e.scrollLeft||
0)-(c&&c.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(c&&c.scrollTop||e&&e.scrollTop||0)-(c&&c.clientTop||e&&e.clientTop||0));!a.which&&void 0!==h&&(a.which=h&1?1:h&2?3:h&4?2:0);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===g?a.toElement:a.fromElement);return a}}];o.extend(h,n.Object,{constructor:h,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=l;h.superclass.preventDefault.call(this)},stopPropagation:function(){var a=
this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=p;h.superclass.stopPropagation.call(this)}});return h});
KISSY.add("event/dom/base/key-codes",[],function(){var a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,
Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){var e=b.keyCode;if(b.altKey&&!b.ctrlKey||b.metaKey||e>=a.F1&&e<=a.F12)return!1;switch(e){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||-1!==window.navigation.userAgent.indexOf("WebKit")&&0===b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}}};return a});
KISSY.add("event/dom/base/special-events",["./dom-event","./special","util","ua"],function(a,b){var e=b("./dom-event"),k=b("./special"),h=b("util"),n=b("ua").gecko?"DOMMouseScroll":"mousewheel";return h.mix(k,{mousewheel:{typeFix:n},load:{bubbles:!1},click:{fire:function(a){if(!a&&"checkbox"===""+this.type&&this.click&&"input"===this.nodeName.toLowerCase())return this.click(),!1}},focus:{bubbles:!1,preFire:function(a,b){if(!b)return e.fire(this,"focusin")},fire:function(a){if(!a&&this.ownerDocument&&
this!==this.ownerDocument.activeElement&&this.focus)return this.focus(),!1}},blur:{bubbles:!1,preFire:function(a,b){if(!b)return e.fire(this,"focusout")},fire:function(a){if(!a&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur)return this.blur(),!1}}})});
KISSY.add("event/dom/base/mouseenter",["dom","./special","util"],function(a,b){var e=b("dom"),k=b("./special");b("util").each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(a){k[a.name]={typeFix:a.fix,handle:function(a,b,h){var k=a.currentTarget,l=a.relatedTarget;if(!l||l!==k&&!e.contains(k,l))return[b.simpleNotify(a,h)]}}})});
