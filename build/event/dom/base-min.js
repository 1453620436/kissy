/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Apr 10 19:03
*/
KISSY.add("event/dom/base/utils",["dom"],function(a,b){var c=b("dom"),f="ksEventTargetId_"+a.now(),i=a.Env.host.document;return{simpleAdd:i&&i.addEventListener?function(a,b,c,i){a.addEventListener&&a.addEventListener(b,c,!!i)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)},simpleRemove:i&&i.removeEventListener?function(a,b,c,i){a.removeEventListener&&a.removeEventListener(b,c,!!i)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},data:function(a,b){return c.data(a,f,b)},removeData:function(a){return c.removeData(a,
f)}}});KISSY.add("event/dom/base/special",[],function(){return{}});
KISSY.add("event/dom/base/observer",["event/base","./special"],function(a,b){function c(a){c.superclass.constructor.call(this,a)}var f=b("event/base"),i=b("./special");a.extend(c,f.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var c,f,n=a.type,k;(k=this.originalType)?a.type=k:k=n;(c=i[k])&&c.handle?(c=c.handle(a,this,b))&&0<c.length&&(f=c[0]):f=this.simpleNotify(a,b);!1===f&&a.halt();a.type=n;return f}});return c});
KISSY.add("event/dom/base/object",["event/base"],function(a,b){function c(){return t}function f(){return u}function i(l){var b=l.type;i.superclass.constructor.call(this);this.originalEvent=l;var e=f;"defaultPrevented"in l?e=l.defaultPrevented?c:f:"getPreventDefault"in l?e=l.getPreventDefault()?c:f:"returnValue"in l&&(e=l.returnValue===u?c:f);this.isDefaultPrevented=e;var d=[],g,h=n.concat();a.each(k,function(a){b.match(a.reg)&&(h=h.concat(a.props),a.fix&&d.push(a.fix))});for(e=h.length;e;)g=h[--e],
this[g]=l[g];this.target||(this.target=l.srcElement||j);3===this.target.nodeType&&(this.target=this.target.parentNode);for(e=d.length;e;)g=d[--e],g(this,l);this.timeStamp=l.timeStamp||a.now()}var m=b("event/base"),j=a.Env.host.document,t=!0,u=!1,n="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),k=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(a,k){null==a.which&&(a.which=null!=k.charCode?k.charCode:k.keyCode);
void 0===a.metaKey&&(a.metaKey=a.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(a,k){var e,d,g,b=k.wheelDelta,c=k.axis,o=k.wheelDeltaY,p=k.wheelDeltaX,r=k.detail;b&&(g=b/120);r&&(g=0-(0===r%3?r/3:r));void 0!==c&&(c===a.HORIZONTAL_AXIS?(d=0,e=0-g):c===a.VERTICAL_AXIS&&(e=0,d=g));void 0!==o&&(d=o/120);void 0!==p&&
(e=-1*p/120);!e&&!d&&(d=g);void 0!==e&&(a.deltaX=e);void 0!==d&&(a.deltaY=d);void 0!==g&&(a.delta=g)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(a,k){var e,d,g=a.target,b=k.button;null==a.pageX&&null!=k.clientX&&(e=g.ownerDocument||j,d=e.documentElement,e=e.body,a.pageX=k.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||
e&&e.clientLeft||0),a.pageY=k.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0));!a.which&&void 0!==b&&(a.which=b&1?1:b&2?3:b&4?2:0);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===g?a.toElement:a.fromElement);return a}}];a.extend(i,m.Object,{constructor:i,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=u;i.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?
a.stopPropagation():a.cancelBubble=t;i.superclass.stopPropagation.call(this)}});return i});
KISSY.add("event/dom/base/observable","event/base,dom,./special,./utils,./observer,./object".split(","),function(a,b){function c(k){a.mix(this,k);this.reset()}var f=b("event/base"),i=b("dom"),m=b("./special"),j=b("./utils"),t=b("./observer"),u=b("./object"),n=f.Utils;a.extend(c,f.Observable,{setup:function(){var a=this.type,b=m[a]||{},c=this.currentTarget,e=j.data(c).handle;(!b.setup||b.setup.call(c,a)===false)&&j.simpleAdd(c,a,e)},constructor:c,reset:function(){c.superclass.reset.call(this);this.lastCount=
this.delegateCount=0},notify:function(a){var b=a.target,c=a.type,e=this.currentTarget,d=this.observers,g=[],h,s,o=this.delegateCount||0,p,r;if(o&&b.nodeType)for(;b!==e;){if(b.disabled!==true||c!=="click"){var q={},f,m,j;p=[];for(s=0;s<o;s++){r=d[s];j=r.filter;m=j+"";f=q[m];f===void 0&&(f=q[m]=i.test(b,j));f&&p.push(r)}p.length&&g.push({currentTarget:b,currentTargetObservers:p})}b=b.parentNode||e}o<d.length&&g.push({currentTarget:e,currentTargetObservers:d.slice(o)});s=0;for(b=g.length;!a.isPropagationStopped()&&
s<b;++s){c=g[s];p=c.currentTargetObservers;c=c.currentTarget;a.currentTarget=c;for(c=0;!a.isImmediatePropagationStopped()&&c<p.length;c++){e=p[c];e=e.notify(a,this);h!==false&&e!==void 0&&(h=e)}}return h},fire:function(b,l){var b=b||{},f=""+this.type,e,d,g=m[f]||{};e=g.bubbles!==false;var h=this.currentTarget;if(!(g.fire&&g.fire.call(h,l)===false)){if(!(b instanceof u)){d=b;b=new u({currentTarget:h,type:f,target:h});a.mix(b,d)}if(!(g.preFire&&g.preFire.call(h,b,l)===false)){d=h;var s=i.getWindow(d),
o=s.document,g=[],p,r="on"+f,q=0;do{g.push(d);d=d.parentNode||d.ownerDocument||d===o&&s}while(!l&&d&&e);d=g[q];do{b.currentTarget=d;if(e=c.getDomEventObservable(d,f)){e=e.notify(b);e!==void 0&&p!==false&&(p=e)}d[r]&&d[r].call(d)===false&&b.preventDefault();d=g[++q]}while(!l&&d&&!b.isPropagationStopped());if(!l&&!b.isDefaultPrevented()){try{if(h[f]&&!a.isWindow(h)){c.triggeredEvent=f;h[f]()}}catch(j){}c.triggeredEvent=""}return p}}},on:function(a){var b=this.observers,c=m[this.type]||{},a=a instanceof
t?a:new t(a);if(this.findObserver(a)===-1){if(a.filter){b.splice(this.delegateCount,0,a);this.delegateCount++}else if(a.last){b.push(a);this.lastCount++}else b.splice(b.length-this.lastCount,0,a);c.add&&c.add.call(this.currentTarget,a)}},detach:function(a){var b,c=m[this.type]||{},e="filter"in a,d=a.filter,g=a.context,h=a.fn,f=this.currentTarget,o=this.observers,a=a.groups;if(o.length){a&&(b=n.getGroupsRe(a));var p,r,q,i,j=o.length;if(h||e||b){g=g||f;p=a=0;for(r=[];a<j;++a){q=o[a];i=q.context||f;
if(g!==i||h&&h!==q.fn||e&&(d&&d!==q.filter||!d&&!q.filter)||b&&!q.groups.match(b))r[p++]=q;else{q.filter&&this.delegateCount&&this.delegateCount--;q.last&&this.lastCount&&this.lastCount--;c.remove&&c.remove.call(f,q)}}this.observers=r}else this.reset();this.checkMemory()}},checkMemory:function(){var b=this.type,c,f,e=m[b]||{},d=this.currentTarget,g=j.data(d);if(g){c=g.observables;if(!this.hasObserver()){f=g.handle;(!e.tearDown||e.tearDown.call(d,b)===false)&&j.simpleRemove(d,b,f);delete c[b]}if(a.isEmptyObject(c)){g.handle=
null;j.removeData(d)}}}});c.triggeredEvent="";c.getDomEventObservable=function(a,b){var c=j.data(a),e;if(c)e=c.observables;return e?e[b]:null};c.getDomEventObservablesHolder=function(a,b){var c=j.data(a);!c&&b&&j.data(a,c={});return c};return c});
KISSY.add("event/dom/base/dom-event","event/base,./utils,dom,./special,./observable,./object".split(","),function(a,b){function c(a,b){var c=u[b]||{},h;if(!a.originalType&&(h=c.typeFix)){a.originalType=b;b=h}return b}function f(b,d,g){var h,f,o,g=a.merge(g),d=c(g,d);h=n.getDomEventObservablesHolder(b,1);if(!(o=h.handle)){o=h.handle=function(a){var b=a.type,c=o.currentTarget;if(!(n.triggeredEvent===b||typeof KISSY==="undefined"))if(b=n.getDomEventObservable(c,b)){a.currentTarget=c;a=new k(a);return b.notify(a)}};
o.currentTarget=b}if(!(f=h.observables))f=h.observables={};h=f[d];if(!h){h=f[d]=new n({type:d,currentTarget:b});h.setup()}h.on(g);b=null}function i(b,d,g){var g=a.merge(g),d=c(g,d),b=n.getDomEventObservablesHolder(b),h=(b||{}).observables;if(b&&h)if(d)(d=h[d])&&d.detach(g);else for(d in h)h[d].detach(g)}var m=b("event/base"),j=b("./utils"),t=b("dom"),u=b("./special"),n=b("./observable"),k=b("./object"),l=m.Utils,v={on:function(a,b,c,h){a=t.query(a);l.batchForType(function(a,b,c,d){for(var c=l.normalizeParam(b,
c,d),e,b=c.type,d=a.length-1;d>=0;d--){e=a[d];f(e,b,c)}},1,a,b,c,h);return a},detach:function(a,b,c,h){a=t.query(a);l.batchForType(function(a,b,c,d){for(var c=l.normalizeParam(b,c,d),e,g,b=c.type,d=a.length-1;d>=0;d--){e=a[d];i(e,b,c);if(c.deep&&e.getElementsByTagName){g=e.getElementsByTagName("*");for(e=g.length-1;e>=0;e--)i(g[e],b,c)}}},1,a,b,c,h);return a},delegate:function(a,b,c,h,f){return v.on(a,b,{fn:h,context:f,filter:c})},undelegate:function(a,b,c,h,f){return v.detach(a,b,{fn:h,context:f,
filter:c})},fire:function(a,b,c,f){var i,c=c||{};c.synthetic=1;l.splitAndRun(b,function(b){var d,j,m;l.fillGroupsForEvent(b,c);b=c.type;if((j=u[b])&&j.typeFix)b=j.typeFix;a=t.query(a);for(j=a.length-1;j>=0;j--){d=a[j];m=n.getDomEventObservable(d,b);!f&&!m&&(m=new n({type:b,currentTarget:d}));if(m){d=m.fire(c,f);i!==false&&d!==void 0&&(i=d)}}});return i},fireHandler:function(a,b,c){return v.fire(a,b,c,1)},clone:function(b,c){var g;if(g=n.getDomEventObservablesHolder(b)){var h=j.data(b);h&&h===j.data(c)&&
j.removeData(c);a.each(g.observables,function(b,e){a.each(b.observers,function(a){f(c,e,a)})})}}};return v});
KISSY.add("event/dom/base/key-codes",[],function(){var a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,
Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){var c=b.keyCode;if(b.altKey&&!b.ctrlKey||b.metaKey||c>=a.F1&&c<=a.F12)return!1;switch(c){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||-1!==window.navigation.userAgent.indexOf("WebKit")&&0===b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}}};return a});
KISSY.add("event/dom/base/special-events",["./dom-event","./special","ua"],function(a,b){var c=b("./dom-event"),f=b("./special"),i=b("ua").gecko?"DOMMouseScroll":"mousewheel";return a.mix(f,{mousewheel:{typeFix:i},load:{bubbles:!1},click:{fire:function(a){if(!a&&"checkbox"===""+this.type&&this.click&&"input"===this.nodeName.toLowerCase())return this.click(),!1}},focus:{bubbles:!1,preFire:function(a,b){if(!b)return c.fire(this,"focusin")},fire:function(a){if(!a&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&
this.focus)return this.focus(),!1}},blur:{bubbles:!1,preFire:function(a,b){if(!b)return c.fire(this,"focusout")},fire:function(a){if(!a&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur)return this.blur(),!1}}})});
KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(a,b){var c=b("dom"),f=b("./special");a.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(a){f[a.name]={typeFix:a.fix,handle:function(a,b,f){var i=a.currentTarget,n=a.relatedTarget;if(!n||n!==i&&!c.contains(i,n))return[b.simpleNotify(a,f)]}}})});
KISSY.add("event/dom/base",["./base/dom-event","./base/object","./base/key-codes","./base/special-events","./base/mouseenter"],function(a,b){var c=b("./base/dom-event"),f=b("./base/object"),i=b("./base/key-codes"),m=b("./base/special-events");b("./base/mouseenter");return a.merge({add:c.on,remove:c.detach,KeyCode:i,Special:m,Object:f},c)});
