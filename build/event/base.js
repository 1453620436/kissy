/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 9 14:03
*/
KISSY.add("event/base",["./base/utils","./base/object","./base/observer","./base/observable"],function(f,c){var d=c("./base/utils"),a=c("./base/object"),b=c("./base/observer"),g=c("./base/observable");return{Utils:d,Object:a,Observer:b,Observable:g}});
KISSY.add("event/base/utils",["util"],function(f,c){function d(g){if(0>g.indexOf("."))return[g,""];var a=g.match(/([^.]+)?(\..+)?$/),g=[a[1]];(a=a[2])?(a=a.split(".").sort(),g.push(a.join("."))):g.push("");return g}var a,b;c("util");return{splitAndRun:a=function(g,a){f.isArray(g)?f.each(g,a):(g=f.trim(g),-1===g.indexOf(" ")?a(g):f.each(g.split(/\s+/),a))},normalizeParam:function(a,b,c){var e=b||{},e="function"===typeof b?{fn:b,context:c}:f.merge(e),b=d(a),a=b[0];e.groups=b[1];e.type=a;return e},batchForType:function(b,
d){var c=f.makeArray(arguments),e=c[2+d];e&&f.isObject(e)?f.each(e,function(a,f){var e=[].concat(c);e.splice(0,2);e[d]=f;e[d+1]=a;b.apply(null,e)}):a(e,function(a){var e=[].concat(c);e.splice(0,2);e[d]=a;b.apply(null,e)})},fillGroupsForEvent:function(a,c){var f=d(a),e=f[1];e&&(e=b(e),c._ksGroups=e);c.type=f[0]},getGroupsRe:b=function(a){return RegExp(a.split(".").join(".*\\.")+"(?:\\.|$)")}}});
KISSY.add("event/base/object",[],function(f){function c(){this.timeStamp=f.now();this.currentTarget=this.target=b}var d=function(){return!1},a=function(){return!0},b;c.prototype={constructor:c,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){this.isDefaultPrevented=a},stopPropagation:function(){this.isPropagationStopped=a},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a;this.stopPropagation()},halt:function(a){a?this.stopImmediatePropagation():
this.stopPropagation();this.preventDefault()}};return c});
KISSY.add("event/base/observer",[],function(f){function c(d){f.mix(this,d)}c.prototype={constructor:c,equals:function(d){var a=this;return!!f.reduce(a.keys,function(b,c){return b&&a[c]===d[c]},1)},simpleNotify:function(d,a){var b;b=this.fn.call(this.context||a.currentTarget,d,this.data);this.once&&a.removeObserver(this);return b},notifyInternal:function(d,a){var b=this.simpleNotify(d,a);!1===b&&d.halt();return b},notify:function(d,a){var b=d._ksGroups;return b&&(!this.groups||!this.groups.match(b))?
void 0:this.notifyInternal(d,a)}};return c});
KISSY.add("event/base/observable",[],function(f){function c(d){this.currentTarget=null;f.mix(this,d);this.reset()}c.prototype={constructor:c,hasObserver:function(){return!!this.observers.length},reset:function(){this.observers=[]},removeObserver:function(d){var a,b=this.observers,c=b.length;for(a=0;a<c;a++)if(b[a]===d){b.splice(a,1);break}this.checkMemory()},checkMemory:function(){},findObserver:function(c){var a=this.observers,b;for(b=a.length-1;0<=b;--b)if(c.equals(a[b]))return b;return-1}};return c});
