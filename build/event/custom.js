/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 26 21:38
*/
KISSY.add("event/custom",["./custom/target","util","./custom/object"],function(l,d){var f=d("./custom/target"),h=d("util");return{Target:f,Object:d("./custom/object"),global:h.mix({},f)}});
KISSY.add("event/custom/target",["event/base","./observable","util"],function(l,d){var f=d("event/base"),h=d("./observable"),j=d("util"),k=f.Utils,m=k.splitAndRun;return{isTarget:1,getCustomEventObservable:function(a,b){var c,g=this.getCustomEvents();c=g&&g[a];!c&&b&&(c=g[a]=new h({currentTarget:this,type:a}));return c},fire:function(a,b){var c=this,g,n=c.getTargets(),o=n&&n.length;a.isEventObject&&(b=a,a=a.type);b=b||{};m(a,function(a){var e;k.fillGroupsForEvent(a,b);a=b.type;if((e=c.getCustomEventObservable(a))||
o){if(e){if(!e.hasObserver()&&!e.defaultFn&&(e.bubbles&&!o||!e.bubbles))return}else e=new h({currentTarget:c,type:a});a=e.fire(b);g!==false&&a!==void 0&&(g=a)}});return g},publish:function(a,b){var c,g=this;m(a,function(a){c=g.getCustomEventObservable(a,!0);j.mix(c,b)});return g},addTarget:function(a){var b=this.getTargets();j.inArray(a,b)||b.push(a);return this},removeTarget:function(a){var b=this.getTargets(),a=j.indexOf(a,b);-1!==a&&b.splice(a,1);return this},getTargets:function(){return this["__~ks_bubble_targets"]||
(this["__~ks_bubble_targets"]=[])},getCustomEvents:function(){return this["__~ks_custom_events"]||(this["__~ks_custom_events"]={})},on:function(a,b,c){var g=this;k.batchForType(function(a,b,c){b=k.normalizeParam(a,b,c);a=b.type;if(a=g.getCustomEventObservable(a,!0))a.on(b)},0,a,b,c);return g},detach:function(a,b,c){var g=this;k.batchForType(function(a,b,c){var e=k.normalizeParam(a,b,c);(a=e.type)?(a=g.getCustomEventObservable(a,!0))&&a.detach(e):(a=g.getCustomEvents(),j.each(a,function(a){a.detach(e)}))},
0,a,b,c);return g}}});
KISSY.add("event/custom/observable",["event/base","./observer","./object","util"],function(l,d){function f(){f.superclass.constructor.apply(this,arguments);this.defaultFn=null;this.defaultTargetOnly=!1;this.bubbles=!0}var h=d("event/base"),j=d("./observer"),k=d("./object"),m=h.Utils;d("util").extend(f,h.Observable,{on:function(a){a=new j(a);-1===this.findObserver(a)&&this.observers.push(a)},fire:function(a){var a=a||{},b=this.bubbles,c=this.currentTarget,g,d=this.type,f=this.defaultFn,h,e=a,i;a.type=
d;e.isEventObject||(e=new k(e));e.target=e.target||c;e.currentTarget=c;a=this.notify(e);!1!==i&&void 0!==a&&(i=a);if(b&&!e.isPropagationStopped()){g=(b=c.getTargets())&&b.length||0;for(h=0;h<g&&!e.isPropagationStopped();h++)a=b[h].fire(d,e),!1!==i&&void 0!==a&&(i=a)}if(f&&!e.isDefaultPrevented()&&(d=e.target,a=d.getCustomEventObservable(e.type),!this.defaultTargetOnly&&(!a||!a.defaultTargetOnly)||c===d))i=f.call(c,e);return i},notify:function(a){var b=[].concat(this.observers),c,g,d=b.length,f;for(f=
0;f<d&&!a.isImmediatePropagationStopped();f++)c=b[f].notify(a,this),!1!==g&&void 0!==c&&(g=c);return g},detach:function(a){var b,c=a.fn,g=a.context,d=this.currentTarget,f=this.observers,a=a.groups;if(f.length){a&&(b=m.getGroupsRe(a));var h,e,i,k,j=f.length;if(c||b){g=g||d;h=a=0;for(e=[];a<j;++a)if(i=f[a],k=i.context||d,g!==k||c&&c!==i.fn||b&&!i.groups.match(b))e[h++]=i;this.observers=e}else this.reset()}}});return f});
KISSY.add("event/custom/observer",["event/base","util"],function(l,d){function f(){f.superclass.constructor.apply(this,arguments)}var h=d("event/base");d("util").extend(f,h.Observer,{keys:["fn","context","groups"]});return f});KISSY.add("event/custom/object",["event/base","util"],function(l,d){function f(d){f.superclass.constructor.call(this);j.mix(this,d)}var h=d("event/base"),j=d("util");j.extend(f,h.Object);return f});
