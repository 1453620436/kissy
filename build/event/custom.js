/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 9 14:03
*/
KISSY.add("event/custom",["./custom/target"],function(e,f){var c=f("./custom/target");return{Target:c,global:e.mix({},c)}});
KISSY.add("event/custom/target",["event/base","./observable"],function(e,f){var c=f("event/base"),j=f("./observable"),k=c.Utils,m=k.splitAndRun;return{isTarget:1,getCustomEventObservable:function(b,a){var g,d=this.getCustomEvents();g=d&&d[b];!g&&a&&(g=d[b]=new j({currentTarget:this,type:b}));return g},fire:function(b,a){var g=this,d,i=g.getTargets(),n=i&&i.length,a=a||{};m(b,function(i){var b;k.fillGroupsForEvent(i,a);i=a.type;if((b=g.getCustomEventObservable(i))||n){if(b){if(!b.hasObserver()&&!b.defaultFn&&
(b.bubbles&&!n||!b.bubbles))return}else b=new j({currentTarget:g,type:i});i=b.fire(a);!1!==d&&void 0!==i&&(d=i)}});return d},publish:function(b,a){var g,d=this;m(b,function(i){g=d.getCustomEventObservable(i,!0);e.mix(g,a)});return d},addTarget:function(b){var a=this.getTargets();e.inArray(b,a)||a.push(b);return this},removeTarget:function(b){var a=this.getTargets(),b=e.indexOf(b,a);-1!==b&&a.splice(b,1);return this},getTargets:function(){return this["__~ks_bubble_targets"]||(this["__~ks_bubble_targets"]=
[])},getCustomEvents:function(){return this["__~ks_custom_events"]||(this["__~ks_custom_events"]={})},on:function(b,a,g){var d=this;k.batchForType(function(a,b,g){b=k.normalizeParam(a,b,g);a=b.type;if(a=d.getCustomEventObservable(a,!0))a.on(b)},0,b,a,g);return d},detach:function(b,a,g){var d=this;k.batchForType(function(a,b,g){var c=k.normalizeParam(a,b,g);(a=c.type)?(a=d.getCustomEventObservable(a,!0))&&a.detach(c):(a=d.getCustomEvents(),e.each(a,function(a){a.detach(c)}))},0,b,a,g);return d}}});
KISSY.add("event/custom/observable",["event/base","./observer","./object"],function(e,f){function c(){c.superclass.constructor.apply(this,arguments);this.defaultFn=null;this.defaultTargetOnly=!1;this.bubbles=!0}var j=f("event/base"),k=f("./observer"),m=f("./object"),b=j.Utils;e.extend(c,j.Observable,{on:function(a){a=new k(a);-1===this.findObserver(a)&&this.observers.push(a)},fire:function(a){var a=a||{},b=this.bubbles,d=this.currentTarget,i,c=this.type,e=this.defaultFn,f,h=a,l;a.type=c;h instanceof
m||(h.target=d,h=new m(h));h.currentTarget=d;a=this.notify(h);!1!==l&&void 0!==a&&(l=a);if(b&&!h.isPropagationStopped()){i=(b=d.getTargets())&&b.length||0;for(f=0;f<i&&!h.isPropagationStopped();f++)a=b[f].fire(c,h),!1!==l&&void 0!==a&&(l=a)}if(e&&!h.isDefaultPrevented()&&(c=h.target,a=c.getCustomEventObservable(h.type),!this.defaultTargetOnly&&(!a||!a.defaultTargetOnly)||d===c))l=e.call(d,h);return l},notify:function(a){var b=[].concat(this.observers),d,c,f=b.length,e;for(e=0;e<f&&!a.isImmediatePropagationStopped();e++)d=
b[e].notify(a,this),!1!==c&&void 0!==d&&(c=d);return c},detach:function(a){var c,d=a.fn,e=a.context,f=this.currentTarget,k=this.observers,a=a.groups;if(k.length){a&&(c=b.getGroupsRe(a));var j,h,l,m,o=k.length;if(d||c){e=e||f;j=a=0;for(h=[];a<o;++a)if(l=k[a],m=l.context||f,e!==m||d&&d!==l.fn||c&&!l.groups.match(c))h[j++]=l;this.observers=h}else this.reset()}}});return c});
KISSY.add("event/custom/observer",["event/base"],function(e,f){function c(){c.superclass.constructor.apply(this,arguments)}var j=f("event/base");e.extend(c,j.Observer,{keys:["fn","context","groups"]});return c});KISSY.add("event/custom/object",["event/base"],function(e,f){function c(f){c.superclass.constructor.call(this);e.mix(this,f)}var j=f("event/base");e.extend(c,j.Object);return c});
