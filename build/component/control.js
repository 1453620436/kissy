/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 14 22:14
*/
KISSY.add("component/control","util,node,event/gesture/basic,event/gesture/tap,./control/manager,base,./control/render-xtpl,ua,feature,xtemplate/runtime".split(","),function(i,e){function m(a){a||(a=[""]);typeof a==="string"&&(a=a.split(/\s+/));return a}function k(a,b,c){for(var d="",f=0,h=c.length,b=a+b;f<h;f++){a=(a=c[f])?"-"+a:a;d=d+(" "+b+a)}return d}function c(a){typeof a==="number"&&(a=a+"px");return a}function f(a,b){return this.root.config.control.getBaseCssClasses(b&&b.params&&b.params[0])}
function j(a,b){return this.root.config.control.getBaseCssClass(b.params[0])}var d=e("util"),r=e("node"),g=e("event/gesture/basic"),v=e("event/gesture/tap"),h=e("./control/manager"),q=e("base"),w=e("./control/render-xtpl"),x=e("ua"),o=e("feature"),n=q.prototype.__getHook,s=o.isTouchGestureSupported(),o=d.noop,y=e("xtemplate/runtime"),t=d.trim,u=r.all,z=i.Env.host.document,p=q.extend({isControl:true,bindInternal:o,syncInternal:o,initializer:function(){var a,b,c=this.getAttrs();this.renderData={};this.childrenElSelectors=
{};this.renderCommands={getBaseCssClasses:f,getBaseCssClass:j};for(a in c){b=c[a];if(b.selector)this.childrenElSelectors[a]=b.selector}},beforeCreateDom:function(a){var b,l,d,f=this.get("elAttrs");b=this.getAttrs();var h=this.get("elStyle"),j=this.get("elCls");for(l in b){d=b[l];d.render&&(a[l]=this.get(l))}b=a.width;l=a.height;d=a.visible;a=a.zIndex;if(b)h.width=c(b);if(l)h.height=c(l);a&&(h["z-index"]=a);d||j.push(this.getBaseCssClasses("hidden"));if(this.get("disabled")){j.push(this.getBaseCssClasses("disabled"));
f["aria-disabled"]="true"}this.get("highlighted")&&j.push(this.getBaseCssClasses("hover"))},createDom:function(){var a=this.renderTpl(w)+this.renderTpl(this.get("contentTpl"))+"</div>";this.$el=u(a);this.el=this.$el[0];this.fillChildrenElsBySelectors()},decorateDom:function(a){this.$el=a;this.el=a[0];this.fillChildrenElsBySelectors();var b,c,d=this.getAttrs();for(c in d){b=d[c];if(b.parse){b=b.parse.call(this,a);b!==void 0&&this.setInternal(c,b)}}},renderUI:function(){h.addComponent(this);var a=this.$el;
this.get("allowTextSelection")||a.unselectable();if(!this.get("srcNode")){var b=this.get("render"),c=this.get("elBefore");c?a.insertBefore(c,void 0):b?a.appendTo(b,void 0):a.appendTo(z.body,void 0)}},bindUI:function(){if(this.get("focusable")){var a=this.getKeyEventTarget();a.on("focus",this.handleFocus,this).on("blur",this.handleBlur,this).on("keydown",this.handleKeydown,this);x.ieMode<9&&a.attr("hideFocus",true);a.attr("tabindex",this.get("disabled")?"-1":"0")}if(this.get("handleGestureEvents"))this.$el.on("mouseenter",
this.handleMouseEnter,this).on("mouseleave",this.handleMouseLeave,this).on("contextmenu",this.handleContextMenu,this).on(g.START,this.handleMouseDown,this).on(g.END,this.handleMouseUp,this).on(v.TAP,this.handleClick,this)},syncUI:o,create:function(){if(!this.get("created")){this.fire("beforeCreateDom");var a=this.get("srcNode");a&&this.decorateDom(a);this.beforeCreateDom(this.renderData,this.renderCommands,this.childrenElSelectors);a||this.createDom();this.__callPluginsMethod("pluginCreateDom");this.fire("afterCreateDom");
this.setInternal("created",true)}return this},render:function(){if(!this.get("rendered")){this.create();this.fire("beforeRenderUI");this.renderUI();this.__callPluginsMethod("pluginRenderUI");this.fire("afterRenderUI");this.fire("beforeBindUI");p.superclass.bindInternal.call(this);this.bindUI();this.__callPluginsMethod("pluginBindUI");this.fire("afterBindUI");this.fire("beforeSyncUI");p.superclass.syncInternal.call(this);this.syncUI();this.__callPluginsMethod("pluginSyncUI");this.fire("afterSyncUI");
this.setInternal("rendered",true)}return this},plug:function(a){var b=this.get("plugins");this.callSuper(a);a=b[b.length-1];if(this.get("rendered")){a.pluginCreateDom&&a.pluginCreateDom(this);a.pluginRenderUI&&a.pluginCreateDom(this);a.pluginBindUI&&a.pluginBindUI(this);a.pluginSyncUI&&a.pluginSyncUI(this)}else this.get("created")&&a.pluginCreateDom&&a.pluginCreateDom(this);return this},getKeyEventTarget:function(){return this.$el},handleMouseEnter:function(a){this.get("disabled")||this.handleMouseEnterInternal(a)},
handleMouseEnterInternal:function(a){this.set("highlighted",!!a)},handleMouseLeave:function(a){this.get("disabled")||this.handleMouseLeaveInternal(a)},handleMouseLeaveInternal:function(a){this.set("active",false);this.set("highlighted",!a)},handleMouseDown:function(a){this.get("disabled")||this.handleMouseDownInternal(a)},handleMouseDownInternal:function(a){var b;if(a.which===1||s){this.get("activeable")&&this.set("active",true);this.get("focusable")&&this.focus();if(!this.get("allowTextSelection")&&
a.gestureType==="mouse"){b=(b=a.target.nodeName)&&b.toLowerCase();b!=="input"&&b!=="textarea"&&b!=="button"&&a.preventDefault()}}},handleMouseUp:function(a){this.get("disabled")||this.handleMouseUpInternal(a)},handleMouseUpInternal:function(a){this.get("active")&&(a.which===1||s)&&this.set("active",false)},handleContextMenu:function(a){this.get("disabled")||this.handleContextMenuInternal(a)},handleContextMenuInternal:function(){},handleFocus:function(){this.get("disabled")||this.handleFocusInternal()},
handleFocusInternal:function(){this.focus();this.fire("focus")},handleBlur:function(){this.get("disabled")||this.handleBlurInternal()},handleBlurInternal:function(){this.blur();this.fire("blur")},handleKeydown:function(a){if(!this.get("disabled")&&this.handleKeyDownInternal(a)){a.halt();return true}},handleKeyDownInternal:function(a){if(a.keyCode===r.KeyCode.ENTER)return this.handleClickInternal(a)},handleClick:function(a){this.get("disabled")||this.handleClickInternal(a)},handleClickInternal:function(){this.get("focusable")&&
this.focus()},$:function(a){return this.$el.all(a)},fillChildrenElsBySelectors:function(a){var b=this.$el,c,d,a=a||this.childrenElSelectors;for(c in a){d=a[c];d=d.call(this,b);typeof d==="string"&&(d=this.$(d));this.setInternal(c,d)}},renderTpl:function(a,b,c){b=b||this.renderData;c=c||this.renderCommands;return(new (this.get("XTemplate"))(a,{control:this,commands:c})).render(b)},getComponentConstructorByNode:function(a,b){var c=b[0].className;if(c){c=c.replace(RegExp("\\b"+a,"ig"),"");return h.getConstructorByXClass(c)}return null},
getComponentCssClasses:function(){if(this.componentCssClasses)return this.componentCssClasses;for(var a=this.constructor,b,c=[];a&&!a.prototype.hasOwnProperty("isControl");){(b=a.xclass)&&c.push(b);a=a.superclass&&a.superclass.constructor}return this.componentCssClasses=c},getBaseCssClasses:function(a){for(var a=m(a),b=this.getComponentCssClasses(),c=0,d="",f=b.length,h=this.get("prefixCls");c<f;c++)d=d+k(h,b[c],a);return t(d)},getBaseCssClass:function(a){return t(k(this.get("prefixCls"),this.getComponentCssClasses()[0],
m(a)))},createComponent:function(a,b){return h.createComponent(a,b||this)},show:function(){this.render();this.set("visible",true);return this},hide:function(){this.set("visible",false);return this},focus:function(){this.get("focusable")&&this.set("focused",true)},blur:function(){this.get("focusable")&&this.set("focused",false)},move:function(a,b){this.set({x:a,y:b})},_onSetWidth:function(a){this.$el.width(a)},_onSetHeight:function(a){this.$el.height(a)},_onSetContent:function(a){var b=this.$el;b.html(a);
this.get("allowTextSelection")||b.unselectable()},_onSetVisible:function(a){var b=this.$el,c=this.getBaseCssClasses("hidden");a?b.removeClass(c):b.addClass(c);this.fire(a?"show":"hide")},_onSetHighlighted:function(a){var b=this.getBaseCssClasses("hover");this.$el[a?"addClass":"removeClass"](b)},_onSetDisabled:function(a){var b=this.getBaseCssClasses("disabled");this.$el[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&this.getKeyEventTarget().attr("tabindex",a?-1:0)},
_onSetActive:function(a){var b=this.getBaseCssClasses("active");this.$el[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_onSetZIndex:function(a){this.$el.css("z-index",a)},_onSetFocused:function(a){var b=this.getKeyEventTarget()[0];if(a)try{b.focus()}catch(c){}else b.ownerDocument.activeElement===b&&b.ownerDocument.body.focus();var b=this.$el,d=this.getBaseCssClasses("focused");b[a?"addClass":"removeClass"](d)},_onSetX:function(a){this.$el.offset({left:a})},_onSetY:function(a){this.$el.offset({top:a})},
destructor:function(a){h.removeComponent(this);a!==false&&this.$el&&this.$el.remove()}},{__hooks__:{beforeCreateDom:n("__beforeCreateDom"),createDom:n("__createDom"),decorateDom:n("__decorateDom"),renderUI:n("__renderUI"),bindUI:n("__bindUI"),syncUI:n("__syncUI")},name:"control",ATTRS:{contentTpl:{value:function(a,b){return b.write(a.get("content"))}},content:{parse:function(a){return a.html()},render:1,sync:0,value:""},width:{render:1,sync:0},height:{render:1,sync:0},elCls:{render:1,valueFn:function(){return[]},
setter:function(a){typeof a==="string"&&(a=a.split(/\s+/));return a||[]}},elStyle:{render:1,valueFn:function(){return{}}},elAttrs:{render:1,valueFn:function(){return{}}},x:{},y:{},xy:{setter:function(a){var b=d.makeArray(a);if(b.length){b[0]!==void 0&&this.set("x",b[0]);b[1]!==void 0&&this.set("y",b[1])}return a},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{render:1,sync:0},visible:{render:1,sync:0,value:true},activeable:{value:true},focused:{},active:{value:false},highlighted:{render:1,
sync:0,value:false},disabled:{render:1,sync:0,value:false,parse:function(a){return a.hasClass(this.getBaseCssClass("disabled"))}},rendered:{value:false},created:{value:false},render:{},id:{render:1,parse:function(a){var b=a.attr("id");if(!b){b=d.guid("ks-component");a.attr("id",b)}return b},valueFn:function(){return d.guid("ks-component")}},elBefore:{},el:{getter:function(){return this.$el}},srcNode:{setter:function(a){return u(a)}},handleGestureEvents:{value:true},focusable:{value:true},allowTextSelection:{value:false},
prefixCls:{render:1,value:i.config("component/prefixCls")||"ks-"},prefixXClass:{},parent:{setter:function(a,b){(b=this.get("parent"))&&this.removeTarget(b);a&&this.addTarget(a)}},XTemplate:{value:y}}});p.extend=function b(c,f,j){var e=d.makeArray(arguments),g;if((e=e[e.length-1])&&(g=e.xclass))e.name=g;e=q.extend.apply(this,arguments);e.extend=b;g&&h.setConstructorByXClass(g,e);return e};p.Manager=h;return p});
KISSY.add("component/control/manager",[],function(){var i=0,e,m={},k={};return e={__instances:k,addComponent:function(c){k[c.get("id")]=c},removeComponent:function(c){delete k[c.get("id")]},getComponent:function(c){return k[c]},createComponent:function(c,f){var j,d;if(c){if(!c.isControl&&f&&(c.prefixCls||(c.prefixCls=f.get("prefixCls")),!c.xclass&&c.prefixXClass))c.xclass=c.prefixXClass,c.xtype&&(c.xclass+="-"+c.xtype);if(!c.isControl&&(d=c.xclass)){j=e.getConstructorByXClass(d);if(!j)throw Error("can not find class by xclass desc : "+
d);c=new j(c)}c.isControl&&f&&c.setInternal("parent",f)}return c},getConstructorByXClass:function(c){var c=c.split(/\s+/),f=-1,j,d,e,g=null;for(d=0;d<c.length;d++)if((e=m[c[d]])&&(j=e.priority)>f)f=j,g=e.constructor;return g},setConstructorByXClass:function(c,f){m[c]={constructor:f,priority:i++}}}});
KISSY.add("component/control/render-xtpl",[],function(i,e,m,k){i=function(c,f,e){var d=this.root.utils.callFn,i=this.root.nativeCommands.each;f.write('<div id="',0);var g=c.resolve(["id"],0);f.write(g,!0);f.write('"\r\n class="',0);if((d=d(this,c,{escape:1},f,["getBaseCssClasses"],0,2))&&d.isBuffer)f=d,d=e;f.write(d,!0);f.write("\r\n",0);e={escape:1};d=[];g=c.resolve(["elCls"],0);d.push(g);e.params=d;e.fn=function(c,d){d.write("\r\n ",0);var e=c.resolve(["this"],0);d.write(e,!0);d.write("\r\n",0);
return d};f=i.call(this,c,e,f,3);f.write('\r\n"\r\n\r\n',0);e={escape:1};d=[];g=c.resolve(["elAttrs"],0);d.push(g);e.params=d;e.fn=function(c,d){d.write("\r\n ",0);var e=c.resolve(["xindex"],0);d.write(e,!0);d.write('="',0);e=c.resolve(["this"],0);d.write(e,!0);d.write('"\r\n',0);return d};f=i.call(this,c,e,f,8);f.write('\r\n\r\nstyle="\r\n',0);e={escape:1};d=[];g=c.resolve(["elStyle"],0);d.push(g);e.params=d;e.fn=function(c,d){d.write("\r\n ",0);var e=c.resolve(["xindex"],0);d.write(e,!0);d.write(":",
0);e=c.resolve(["this"],0);d.write(e,!0);d.write(";\r\n",0);return d};f=i.call(this,c,e,f,13);f.write('\r\n">',0);return f};i.TPL_NAME=k.name;i.version="5.0.0";return i});
