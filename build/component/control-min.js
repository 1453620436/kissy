/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 31 19:16
*/
KISSY.add("component/control/process",["base"],function(d,f){var m=f("base"),j=m.prototype.__getHook,l=d.noop,c=m.extend({bindInternal:l,syncInternal:l,renderUI:l,syncUI:l,bindUI:l,create:function(){this.get("created")||(this.fire("beforeCreateDom"),this.createDom(),this.__callPluginsMethod("pluginCreateDom"),this.fire("afterCreateDom"),this.setInternal("created",!0));return this},render:function(){this.get("rendered")||(this.create(),this.fire("beforeRenderUI"),this.renderUI(),this.__callPluginsMethod("pluginRenderUI"),
this.fire("afterRenderUI"),this.fire("beforeBindUI"),c.superclass.bindInternal.call(this),this.bindUI(),this.__callPluginsMethod("pluginBindUI"),this.fire("afterBindUI"),this.fire("beforeSyncUI"),c.superclass.syncInternal.call(this),this.syncUI(),this.__callPluginsMethod("pluginSyncUI"),this.fire("afterSyncUI"),this.setInternal("rendered",!0));return this},plug:function(b){var c=this.get("plugins");this.callSuper(b);b=c[c.length-1];this.get("rendered")?(b.pluginCreateDom&&b.pluginCreateDom(this),
b.pluginRenderUI&&b.pluginCreateDom(this),b.pluginBindUI&&b.pluginBindUI(this),b.pluginSyncUI&&b.pluginSyncUI(this)):this.get("created")&&b.pluginCreateDom&&b.pluginCreateDom(this);return this}},{__hooks__:{createDom:j("__createDom"),renderUI:j("__renderUI"),bindUI:j("__bindUI"),syncUI:j("__syncUI")},name:"ControlProcess",ATTRS:{rendered:{value:!1},created:{value:!1}}});return c});
KISSY.add("component/control/render-xtpl",[],function(d,f,m,j){d=function(d,c,b,f,h){var i=this.nativeCommands,a=this.utils;if("1.50"!==c.version)throw Error("current xtemplate file("+this.name+")(v1.50) need to be recompiled using current kissy(v"+c.version+")!");c=a.callCommand;i=i.each;b.write('<div id="');a=d.resolve(["id"]);b.write(a,!0);b.write('"\n class="');if((c=c(this,d,{escape:1},b,"getBaseCssClasses",2))&&c.isBuffer)b=c,c=h;b.write(c,!0);b.write("\n");h={escape:1};c=[];a=d.resolve(["elCls"]);
c.push(a);h.params=c;h.fn=function(a,b){b.write("\n ");var c=a.resolve(["this"]);b.write(c,!0);b.write("\n");return b};b=i.call(this,d,h,b,3,f);b.write('\n"\n\n');h={escape:1};c=[];a=d.resolve(["elAttrs"]);c.push(a);h.params=c;h.fn=function(a,b){b.write("\n ");var c=a.resolve(["xindex"]);b.write(c,!0);b.write('="');c=a.resolve(["this"]);b.write(c,!0);b.write('"\n');return b};b=i.call(this,d,h,b,8,f);b.write('\n\nstyle="\n');h={escape:1};c=[];a=d.resolve(["elStyle"]);c.push(a);h.params=c;h.fn=function(a,
b){b.write("\n ");var c=a.resolve(["xindex"]);b.write(c,!0);b.write(":");c=a.resolve(["this"]);b.write(c,!0);b.write(";\n");return b};b=i.call(this,d,h,b,13,f);b.write('\n">');return b};d.TPL_NAME=j.name;return d});
KISSY.add("component/control/render","base,node,xtemplate/runtime,./render-xtpl,component/manager,ua".split(","),function(d,f){function m(k){typeof k==="number"&&(k=k+"px");return k}function j(k){k||(k=[""]);typeof k==="string"&&(k=k.split(/\s+/));return k}function l(k,a,b){for(var c="",e=0,d=b.length,a=k+a;e<d;e++){k=(k=b[e])?"-"+k:k;c=c+(" "+a+k)}return c}function c(a){var g;if(a.target===this.control){g=this[p+a.type.slice(5).slice(0,-6)];g.call(this,a.newVal,a)}}function b(a,g){return this.config.view.getBaseCssClasses(g&&
g.params&&g.params[0])}function o(a,g){return this.config.view.getBaseCssClass(g.params[0])}var h=f("base"),i=h.prototype.__getHook,a=d.noop,e=f("node"),r=f("xtemplate/runtime"),s=f("./render-xtpl"),t=f("component/manager"),p="_onSet",q=d.trim,n=e.all,u=f("ua"),v=d.Env.host.document;return h.extend({bindInternal:a,syncInternal:a,isRender:true,create:function(){var a=this.control.get("srcNode");a?this.decorateDom(a):this.createDom()},beforeCreateDom:function(a){var g=this.control,b,c,e,d=g.get("elAttrs"),
h=g.get("elCls"),f;b=g.getAttrs();f=g.get("elStyle");var i=g.get("elCls");for(c in b){e=b[c];e.view&&(a[c]=g.get(c))}b=a.width;c=a.height;e=a.visible;a=a.zIndex;if(b)f.width=m(b);if(c)f.height=m(c);a&&(f["z-index"]=a);e||i.push(this.getBaseCssClasses("hidden"));if(f=g.get("disabled")){h.push(this.getBaseCssClasses("disabled"));d["aria-disabled"]="true"}g.get("highlighted")&&h.push(this.getBaseCssClasses("hover"));if(g.get("focusable")){if(u.ieMode<9)d.hideFocus="true";d.tabindex=f?"-1":"0"}},createDom:function(){this.beforeCreateDom(this.renderData=
{},this.childrenElSelectors={},this.renderCommands={getBaseCssClasses:b,getBaseCssClass:o});var a=this.control,g;g=this.renderTpl(s)+this.renderTpl(this.get("contentTpl"))+"</div>";a.setInternal("el",this.$el=n(g));this.el=this.$el[0];this.fillChildrenElsBySelectors()},decorateDom:function(a){var g=this.control;a.attr("id")||a.attr("id",g.get("id"));var b=this.constructor.HTML_PARSER,c,e;for(c in b){e=b[c];if(typeof e==="function"){e=e.call(this,a);e!==void 0&&g.setInternal(c,e)}else typeof e==="string"?
g.setInternal(c,a.one(e)):d.isArray(e)&&e[0]&&g.setInternal(c,a.all(e[0]))}g.setInternal("el",this.$el=a);this.el=a[0]},renderUI:function(){var a=this.control,g=this.$el;if(!a.get("srcNode")){var b=a.get("render");(a=a.get("elBefore"))?g.insertBefore(a,void 0):b?g.appendTo(b,void 0):g.appendTo(v.body,void 0)}},bindUI:function(){var a=this.control,g=a.getAttrs(),b,e;for(b in g){e=g[b];var f=d.ucfirst(b),h=this[p+f];if(e.view&&h)a.on("after"+f+"Change",c,this)}},syncUI:a,destructor:function(){this.$el&&
this.$el.remove()},$:function(a){return this.$el.all(a)},fillChildrenElsBySelectors:function(a){var b=this.$el,e=this.control,c,f,a=a||this.childrenElSelectors;for(c in a){f=a[c];typeof f==="function"?e.setInternal(c,f(b)):e.setInternal(c,this.$(d.substitute(f,this.renderData)));delete a[c]}},renderTpl:function(a,b,c){b=b||this.renderData;c=c||this.renderCommands;return(new (this.get("xtemplate"))(a,{control:this.control,view:this,commands:c})).render(b)},getComponentConstructorByNode:function(a,
b){var c=b[0].className;if(c){c=c.replace(RegExp("\\b"+a,"ig"),"");return t.getConstructorByXClass(c)}return null},getComponentCssClasses:function(){if(this.componentCssClasses)return this.componentCssClasses;for(var a=this.control.constructor,b,c=[];a&&!a.prototype.hasOwnProperty("isControl");){(b=a.xclass)&&c.push(b);a=a.superclass&&a.superclass.constructor}return this.componentCssClasses=c},getBaseCssClasses:function(a){for(var a=j(a),b=this.getComponentCssClasses(),c=0,e=this.get("control"),d=
"",f=b.length,e=e.get("prefixCls");c<f;c++)d=d+l(e,b[c],a);return q(d)},getBaseCssClass:function(a){return q(l(this.control.get("prefixCls"),this.getComponentCssClasses()[0],j(a)))},getKeyEventTarget:function(){return this.$el},_onSetWidth:function(a){this.$el.width(a)},_onSetHeight:function(a){this.$el.height(a)},_onSetContent:function(a){var b=this.$el;b.html(a);this.get("allowTextSelection")||b.unselectable()},_onSetVisible:function(a){var b=this.$el,c=this.getBaseCssClasses("hidden");a?b.removeClass(c):
b.addClass(c)},_onSetHighlighted:function(a){var b=this.getBaseCssClasses("hover");this.$el[a?"addClass":"removeClass"](b)},_onSetDisabled:function(a){var b=this.control,c=this.getBaseCssClasses("disabled");this.$el[a?"addClass":"removeClass"](c).attr("aria-disabled",a);b.get("focusable")&&this.getKeyEventTarget().attr("tabindex",a?-1:0)},_onSetActive:function(a){var b=this.getBaseCssClasses("active");this.$el[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_onSetFocused:function(a){var b=
this.$el,c=this.getBaseCssClasses("focused");b[a?"addClass":"removeClass"](c)},_onSetZIndex:function(a){this.$el.css("z-index",a)}},{__hooks__:{createDom:i("__createDom"),renderUI:i("__renderUI"),bindUI:i("__bindUI"),syncUI:i("__syncUI"),decorateDom:i("__decorateDom"),beforeCreateDom:i("__beforeCreateDom")},extend:function g(a,b,c){var e,f={};e=h.extend.apply(this,arguments);e.HTML_PARSER=e.HTML_PARSER||{};if(d.isArray(a)){d.each(a.concat(e),function(a){a&&d.each(a.HTML_PARSER,function(a,b){f[b]=
a})});e.HTML_PARSER=f}d.mix(e.HTML_PARSER,this.HTML_PARSER,false);e.extend=g;return e},ATTRS:{control:{setter:function(a){this.control=a}},xtemplate:{value:r},contentTpl:{value:function(a,b,c){return c.write(a.get("content"))}}},HTML_PARSER:{id:function(a){return(a=a[0].id)?a:void 0},content:function(a){return a.html()},disabled:function(a){return a.hasClass(this.getBaseCssClass("disabled"))}},name:"render"})});
KISSY.add("component/control",["node","./control/process","component/manager","./control/render","ua"],function(d,f){function m(){var a,b=this;do a=b.ATTRS,b=b.superclass;while(!a||!a.xrender);return a.xrender.value}var j=f("node"),l=f("./control/process"),c=f("component/manager"),b=f("./control/render"),o=f("ua").ieMode,h=j.Gesture,i=d.Feature.isTouchGestureSupported(),b=l.extend({isControl:!0,createDom:function(){var a=this.get("xrender"),b=this.get("view"),d=this.get("id");b?b.set("control",this):
this.set("view",this.view=b=new a({control:this}));b.create();a=b.getKeyEventTarget();this.get("allowTextSelection")||a.unselectable();c.addComponent(d,this)},renderUI:function(){this.view.renderUI();this.view.bindUI()},bindUI:function(){var a=this.view.getKeyEventTarget();if(this.get("focusable"))a.on("focus",this.handleFocus,this).on("blur",this.handleBlur,this).on("keydown",this.handleKeydown,this);if(this.get("handleGestureEvents")){a=this.$el;a.on("mouseenter",this.handleMouseEnter,this).on("mouseleave",
this.handleMouseLeave,this).on("contextmenu",this.handleContextMenu,this);a.on(h.start,this.handleMouseDown,this).on(h.end,this.handleMouseUp,this).on(h.tap,this.handleClick,this);if(h.cancel)a.on(h.cancel,this.handleMouseUp,this);if(9>o)a.on("dblclick",this.handleDblClick,this)}},syncUI:function(){this.view.syncUI()},destructor:function(){c.removeComponent(this.get("id"));this.view?this.view.destroy():this.get("srcNode")&&this.get("srcNode").remove()},createComponent:function(a,b){return c.createComponent(a,
b||this)},_onSetFocused:function(a){var b=this.view.getKeyEventTarget()[0];if(a)try{b.focus()}catch(c){}else b.ownerDocument.activeElement===b&&b.ownerDocument.body.focus()},_onSetX:function(a){this.$el.offset({left:a})},_onSetY:function(a){this.$el.offset({top:a})},_onSetVisible:function(a){this.fire(a?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this},focus:function(){this.get("focusable")&&this.set("focused",!0)},
blur:function(){this.get("focusable")&&this.set("focused",!1)},move:function(a,b){this.set({x:a,y:b})},handleDblClick:function(a){this.get("disabled")||this.handleDblClickInternal(a)},handleDblClickInternal:function(a){this.handleClickInternal(a)},handleMouseEnter:function(a){this.get("disabled")||this.handleMouseEnterInternal(a)},handleMouseEnterInternal:function(a){this.set("highlighted",!!a)},handleMouseLeave:function(a){this.get("disabled")||this.handleMouseLeaveInternal(a)},handleMouseLeaveInternal:function(a){this.set("active",
!1);this.set("highlighted",!a)},handleMouseDown:function(a){this.get("disabled")||this.handleMouseDownInternal(a)},handleMouseDownInternal:function(a){var b;if(1===a.which||i)this.get("activeable")&&this.set("active",!0),this.get("focusable")&&this.focus(),!this.get("allowTextSelection")&&"mouse"===a.gestureType&&(b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!==b&&"textarea"!==b&&"button"!==b&&a.preventDefault())},handleMouseUp:function(a){this.get("disabled")||this.handleMouseUpInternal(a)},handleMouseUpInternal:function(a){this.get("active")&&
(1===a.which||i)&&this.set("active",!1)},handleContextMenu:function(a){this.get("disabled")||this.handleContextMenuInternal(a)},handleContextMenuInternal:function(){},handleFocus:function(){this.get("disabled")||this.handleFocusInternal()},handleFocusInternal:function(){this.focus();this.fire("focus")},handleBlur:function(){this.get("disabled")||this.handleBlurInternal()},handleBlurInternal:function(){this.blur();this.fire("blur")},handleKeydown:function(a){if(!this.get("disabled")&&this.handleKeyDownInternal(a))return a.halt(),
!0},handleKeyDownInternal:function(a){if(a.keyCode===j.KeyCode.ENTER)return this.handleClickInternal(a)},handleClick:function(a){this.get("disabled")||this.handleClickInternal(a)},handleClickInternal:function(){this.get("focusable")&&this.focus()}},{name:"control",ATTRS:{id:{view:1,valueFn:function(){return d.guid("ks-component")}},content:{view:1,value:""},width:{view:1},height:{view:1},elCls:{view:1,value:[],setter:function(a){"string"===typeof a&&(a=a.split(/\s+/));return a||[]}},elStyle:{view:1,
value:{}},elAttrs:{view:1,value:{}},elBefore:{},el:{setter:function(a){this.$el=a;this.el=a[0]}},x:{},y:{},xy:{setter:function(a){var b=d.makeArray(a);b.length&&(void 0!==b[0]&&this.set("x",b[0]),void 0!==b[1]&&this.set("y",b[1]));return a},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},render:{},visible:{sync:0,value:!0,view:1},srcNode:{setter:function(a){return j.all(a)}},handleGestureEvents:{value:!0},focusable:{value:!0,view:1},allowTextSelection:{value:!1},activeable:{value:!0},
focused:{view:1},active:{view:1,value:!1},highlighted:{view:1,value:!1},prefixCls:{view:1,value:d.config("component/prefixCls")||"ks-"},prefixXClass:{},parent:{setter:function(a,b){(b=this.get("parent"))&&this.removeTarget(b);a&&this.addTarget(a)}},disabled:{view:1,value:!1},xrender:{value:b},view:{setter:function(a){this.view=a}}}});b.getDefaultRender=m;b.extend=function e(b,f,h){var i=d.makeArray(arguments),j,n=i[i.length-1];if(n&&(j=n.xclass))n.name=j;i=l.extend.apply(this,i);j&&c.setConstructorByXClass(j,
i);i.extend=e;i.getDefaultRender=m;return i};return b});
