/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Aug 26 16:09
*/
KISSY.add("overlay",["overlay/control","overlay/dialog","overlay/popup"],function(j,a,k,h){j=a("overlay/control");k=a("overlay/dialog");a=a("overlay/popup");j.Dialog=k;j.Popup=a;h.exports=j});
KISSY.add("overlay/control","component/container,component/extension/shim,component/extension/align,./extension/loading,./extension/mask,./extension/overlay-effect,component/extension/content-box,./overlay-xtpl".split(","),function(j,a,k,h){var j=a("component/container"),k=a("component/extension/shim"),n=a("component/extension/align"),e=a("./extension/loading"),m=a("./extension/mask"),d=a("./extension/overlay-effect"),b=a("component/extension/content-box"),a=a("./overlay-xtpl"),i={hide:"hide",destroy:"destroy"};
h.exports=j.extend([b,k,e,n,m,d],{bindUI:function(){var b=this,d=b.get("closeBtn");if(d)d.on("click",function(c){b.close();c.preventDefault()})},close:function(){this[i[this.get("closeAction")]||"hide"]();return this}},{ATTRS:{handleGestureEvents:{value:false},focusable:{value:false},allowTextSelection:{value:true},contentTpl:{value:a},closable:{value:false,sync:0,render:1,parse:function(){return!!this.get("closeBtn")}},closeBtn:{selector:function(){return"."+this.getBaseCssClass("close")}},closeAction:{value:"hide"},
closeText:{value:"close",render:1},visible:{value:false}},xclass:"overlay"})});
KISSY.add("overlay/extension/loading",["node"],function(j,a,k,h){function n(){}var e=a("node");n.prototype={loading:function(){this._loadingExtEl||(this._loadingExtEl=e('<div class="'+this.get("prefixCls")+'ext-loading" style="position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);"/>').appendTo(this.$el));this._loadingExtEl.show()},unloading:function(){this._loadingExtEl&&this._loadingExtEl.hide()}};h.exports=n});
KISSY.add("overlay/extension/mask",["ua","node","event/gesture/tap"],function(j,a,k,h){function n(c,b){var g=c.getBaseCssClasses("mask"),g=r('<div  style="width:'+(i?"expression(KISSY.DOM.docWidth())":"100%")+";left:0;top:0;height:"+(i?"expression(KISSY.DOM.docHeight())":"100%")+";position:"+(i?"absolute":"fixed")+';" class="'+g+" "+b+'">'+(i?'<iframe style="position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':
"")+"</div>").prependTo("body");g.unselectable();g.on("mousedown",function(c){c.preventDefault()});return g}function e(){}function m(c,b){var g=c.get("maskNode"),d=c.getBaseCssClasses("mask-hidden");b?g.removeClass(d):g.addClass(d)}function d(b,d,g,f){var a=b.effect||c;m(f,g);if(a!==c){var f=b.duration,b=b.easing,e=g?1:0;d.stop(1,1);d.css("display",g?c:"block");d[a+l[a][e]](f,function(){d.css("display","")},b)}}function b(c){var b=this.get("maskNode");if(c=c.newVal){var g=Number(this.$el.css("z-index"));
isNaN(g)||b.css("z-index",g)}d(this.get("mask"),b,c,this)}var i=6===a("ua").ie,r=a("node"),p=a("event/gesture/tap").TAP;e.ATTRS={mask:{value:!1},maskNode:{}};var c="none",l={fade:["Out","In"],slide:["Up","Down"]};e.prototype={__renderUI:function(){this.get("mask")&&this.set("maskNode",n(this,this.get("visible")?"":this.getBaseCssClasses("mask-hidden")))},__bindUI:function(){var c,d;if(d=this.get("mask")){c=this.get("maskNode");if(d.closeOnClick)c.on(p,this.close,this);this.on("afterVisibleChange",
b)}},__destructor:function(){var c;(c=this.get("maskNode"))&&c.remove()}};h.exports=e});
KISSY.add("overlay/extension/overlay-effect",["util","node"],function(j,a,k,h){function n(b){var c=b.$el.clone(!0);c.css({visibility:"hidden",overflow:"hidden"}).addClass(b.get("prefixCls")+"overlay-ghost");return b.__afterCreateEffectGhost(c)}function e(b,c){b.__effectGhost&&b.__effectGhost.stop(1,1);var d=b.$el,e=a("node"),q=b.get("effect"),g=e(q.target),e=q.duration,f={width:g.width(),height:g.height()},i=g.offset(),h={width:d.width(),height:d.height()},u=d.offset(),s,o=n(b),m=q.easing;o.insertAfter(d);
c?(g=f,s=i,f=h,i=u):(g=h,s=u);o.offset(i);r.mix(f,{left:o.css("left"),top:o.css("top")});d.css("visibility","hidden");o.css(g);o.offset(s);b.__effectGhost=o;o.css("visibility","visible");o.animate(f,{Anim:q.Anim,duration:e,easing:m,complete:function(){b.__effectGhost=null;o.remove();d.css("visibility","")}})}function m(b,c){var d=b.$el,a=b.get("effect"),q=a.effect||"none",g=a.target;if("none"!==q||g)if(g)e(b,c);else{var g=a.duration,f=a.easing,h=c?1:0;d.stop(1,1);d.css({visibility:"visible",display:c?
"none":"block"});d[q+i[q][h]]({duration:g,Anim:a.Anim,complete:function(){d.css({display:"block",visibility:""})},easing:f})}}function d(b){m(this,b.newVal)}function b(){}var i={fade:["Out","In"],slide:["Up","Down"]},r=a("util");b.ATTRS={effect:{valueFn:function(){return{effect:"",target:null,duration:0.5,easing:"easeOut"}},setter:function(b){var c=b.effect;"string"===typeof c&&!i[c]&&(b.effect="")}}};b.prototype={__afterCreateEffectGhost:function(b){return b},__bindUI:function(){this.on("afterVisibleChange",
d,this)}};h.exports=b});
KISSY.add("overlay/overlay-xtpl",[],function(j,a,k,h){h.exports=function(a,e,h){var d=this,b=d.pos={line:1,col:1},i=d.root.nativeCommands,j=d.root.utils.callFn,k=i["if"],i=i.block;e.append("");var c={escape:1},l=[];l.push("ks-overlay-closable");c.params=l;c.fn=function(c,a){a.append("\r\n    ");var g={escape:1},f=[],e=c.resolve(["closable"]);f.push(e);g.params=f;g.fn=function(c,g){g.append('\r\n        <a href="javascript:void(\'close\')"\r\n           aria-label="Close"\r\n           class="');var a=
{escape:1},f=[];f.push("close");a.params=f;b.line=5;b.col=38;if((a=j(d,c,a,g,["getBaseCssClasses"]))&&a.isBuffer)g=a,a=h;g.writeEscaped(a);g.append("\"\r\n           role='button'>\r\n            <span class=\"");a={escape:1};f=[];f.push("close-x");a.params=f;b.line=7;b.col=45;if((a=j(d,c,a,g,["getBaseCssClasses"]))&&a.isBuffer)g=a,a=h;g.writeEscaped(a);g.append('">');a=c.resolve(["closeText"]);g.write(a);g.append("</span>\r\n        </a>\r\n    ");return g};b.line=2;b.col=10;a=k.call(d,c,g,a);a.append("\r\n");
return a};b.line=1;b.col=10;e=i.call(d,a,c,e);e.append('\r\n\r\n<div class="');c={escape:1};l=[];l.push("content");c.params=l;b.line=12;b.col=32;if((c=j(d,a,c,e,["getBaseCssClasses"]))&&c.isBuffer)e=c,c=h;e.writeEscaped(c);e.append('">\r\n    ');c={escape:1};l=[];l.push("ks-overlay-content");c.params=l;c.fn=function(b,c){c.append("\r\n        ");var d=b.resolve(["content"]);c.write(d);c.append("\r\n    ");return c};b.line=13;b.col=13;e=i.call(d,a,c,e);e.append("\r\n</div>");return e};h.exports.TPL_NAME=
h.name});
KISSY.add("overlay/dialog",["util","./control","node","./dialog-xtpl"],function(j,a,k,h){var n=a("util"),j=a("./control"),e=a("node"),a=a("./dialog-xtpl"),a=j.extend({beforeCreateDom:function(d){n.mix(d.elAttrs,{role:"dialog","aria-labelledby":"ks-stdmod-header-"+this.get("id")})},getChildrenContainerEl:function(){return this.get("body")},__afterCreateEffectGhost:function(d){var b=this.get("body");d.all("."+this.get("prefixCls")+"stdmod-body").css({height:b.height(),width:b.width()}).html("");return d},
handleKeyDownInternal:function(d){if(this.get("escapeToClose")&&d.keyCode===e.Event.KeyCode.ESC){if("select"!==d.target.nodeName.toLowerCase()||d.target.disabled)this.close(),d.halt()}else a:if(d.keyCode===m){var b=this.$el,a=e(d.target),h=b.last();if(a.equals(b)&&d.shiftKey)h[0].focus(),d.halt();else if(a.equals(h)&&!d.shiftKey)this.focus(),d.halt();else if(a.equals(b)||b.contains(a))break a;d.halt()}},_onSetVisible:function(a,b){var e=this.el;this.callSuper(a,b);if(a)this.__lastActive=e.ownerDocument.activeElement,
this.focus(),e.setAttribute("aria-hidden","false");else{e.setAttribute("aria-hidden","true");try{this.__lastActive&&this.__lastActive.focus()}catch(h){}}},_onSetBodyContent:function(a){var b;b=this.get("body");b.html(a)},_onSetHeaderContent:function(a){var b;b=this.get("header");b.html(a)},_onSetFooterContent:function(a){var b;b=this.get("footer");b.html(a)}},{ATTRS:{focusable:{value:!0},contentTpl:{value:a},header:{selector:function(){return"."+this.getBaseCssClass("header")}},body:{selector:function(){return"."+
this.getBaseCssClass("body")}},footer:{selector:function(){return"."+this.getBaseCssClass("footer")}},bodyStyle:{sync:0},footerStyle:{render:1},headerStyle:{render:1},headerContent:{value:"",sync:0,render:1,parse:function(){return this.get("header").html()}},bodyContent:{value:"",sync:0,render:1,parse:function(){return this.get("body").html()}},footerContent:{value:"",sync:0,render:1,parse:function(){return this.get("footer").html()}},closable:{value:!0},escapeToClose:{value:!0}},xclass:"dialog"}),
m=e.Event.KeyCode.TAB;h.exports=a});
KISSY.add("overlay/dialog-xtpl",["./overlay-xtpl"],function(j,a,k,h){h.exports=function(h,e,j){var d=this,b=d.pos={line:1,col:1},i=d.root.nativeCommands,k=d.root.utils.callFn,p=i.each,c=i.extend,i=i.block;e.append("");var l={},t=[];t.push("./overlay-xtpl");l.params=t;a("./overlay-xtpl");b.line=1;b.col=11;if((c=c.call(d,h,l,e))&&c.isBuffer)e=c,c=j;e.write(c);e.append("\r\n");c={escape:1};l=[];l.push("ks-overlay-content");c.params=l;c.fn=function(c,a){a.append('\r\n    <div class="');var f={escape:1},
e=[];e.push("header");f.params=e;b.line=3;b.col=36;if((f=k(d,c,f,a,["getBaseCssClasses"]))&&f.isBuffer)a=f,f=j;a.writeEscaped(f);a.append('"\r\n         style="\r\n');var f={escape:1},e=[],h=c.resolve(["headerStyle"]);e.push(h);f.params=e;f.fn=function(a,c){c.append("\r\n ");var b=a.resolve(["xindex"]);c.writeEscaped(b);c.append(":");b=a.resolve(["this"]);c.writeEscaped(b);c.append(";\r\n");return c};b.line=5;b.col=8;a=p.call(d,c,f,a);a.append('\r\n">');f=c.resolve(["headerContent"]);a.write(f);a.append('</div>\r\n\r\n    <div class="');
f={escape:1};e=[];e.push("body");f.params=e;b.line=10;b.col=36;if((f=k(d,c,f,a,["getBaseCssClasses"]))&&f.isBuffer)a=f,f=j;a.writeEscaped(f);a.append('"\r\n         style="\r\n');f={escape:1};e=[];h=c.resolve(["bodyStyle"]);e.push(h);f.params=e;f.fn=function(a,c){c.append("\r\n ");var b=a.resolve(["xindex"]);c.writeEscaped(b);c.append(":");b=a.resolve(["this"]);c.writeEscaped(b);c.append(";\r\n");return c};b.line=12;b.col=8;a=p.call(d,c,f,a);a.append('\r\n">');f=c.resolve(["bodyContent"]);a.write(f);
a.append('</div>\r\n\r\n    <div class="');f={escape:1};e=[];e.push("footer");f.params=e;b.line=17;b.col=36;if((f=k(d,c,f,a,["getBaseCssClasses"]))&&f.isBuffer)a=f,f=j;a.writeEscaped(f);a.append('"\r\n         style="\r\n');f={escape:1};e=[];h=c.resolve(["footerStyle"]);e.push(h);f.params=e;f.fn=function(a,c){c.append("\r\n ");var b=a.resolve(["xindex"]);c.writeEscaped(b);c.append(":");b=a.resolve(["this"]);c.writeEscaped(b);c.append(";\r\n");return c};b.line=19;b.col=8;a=p.call(d,c,f,a);a.append('\r\n">');
f=c.resolve(["footerContent"]);a.write(f);a.append('</div>\r\n    <div tabindex="0"></div>\r\n');return a};b.line=2;b.col=9;return e=i.call(d,h,c,e)};h.exports.TPL_NAME=h.name});
KISSY.add("overlay/popup",["./control","util","node"],function(j,a,k,h){function n(){var c=this,a=c.get("trigger"),d;c.__mouseEnterPopup=function(a){m.call(c);d=r.later(function(){b.call(c,a);d=void 0},1E3*c.get("mouseDelay"))};a.on("mouseenter",c.__mouseEnterPopup);c._mouseLeavePopup=function(){d&&(d.cancel(),d=void 0);e.call(c)};a.on("mouseleave",c._mouseLeavePopup)}function e(){var a=this,b=1E3*a.get("mouseDelay");a._hiddenTimer=r.later(function(){i.call(a)},b)}function m(){this._hiddenTimer&&
(this._hiddenTimer.cancel(),this._hiddenTimer=void 0)}function d(){var a=this;a.__clickPopup=function(d){d.preventDefault();a.get("toggle")?(a.get("visible")?i:b).call(a,d):b.call(a,d)};a.get("trigger").on("click",a.__clickPopup)}function b(a){this.set("currentTrigger",p(a.target));this.show()}function i(){this.set("currentTrigger",void 0);this.hide()}var j=a("./control"),r=a("util"),p=a("node");h.exports=j.extend({initializer:function(){this.get("trigger")&&("mouse"===this.get("triggerType")?n.call(this):
d.call(this))},bindUI:function(){if(this.get("trigger")&&"mouse"===this.get("triggerType"))this.$el.on("mouseleave",e,this).on("mouseenter",m,this)},destructor:function(){var a=this.$el,b=this.get("trigger");b&&(this.__clickPopup&&b.detach("click",this.__clickPopup),this.__mouseEnterPopup&&b.detach("mouseenter",this.__mouseEnterPopup),this._mouseLeavePopup&&b.detach("mouseleave",this._mouseLeavePopup));a&&a.detach("mouseleave",e,this).detach("mouseenter",m,this)}},{ATTRS:{trigger:{setter:function(a){return p(a)}},
triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:0.1},toggle:{value:!1}},xclass:"popup"})});
