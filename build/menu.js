/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 16 15:11
*/
KISSY.add("menu","menu/control,menu/menuitem,menu/check-menuitem,menu/radio-menuitem,menu/submenu,menu/popupmenu".split(","),function(e,d){var f=d("menu/control");f.Item=d("menu/menuitem");f.CheckItem=d("menu/check-menuitem");f.RadioItem=d("menu/radio-menuitem");f.SubMenu=d("menu/submenu");f.PopupMenu=d("menu/popupmenu");return f});
KISSY.add("menu/control",["util","node","component/container","component/extension/delegate-children"],function(e,d){function f(a){a.target.isMenu&&(a=a.newVal,this.el.setAttribute("aria-activedescendant",a&&a.el.id||""))}var h=d("util"),b=d("node"),a=d("component/container"),g=d("component/extension/delegate-children"),c=b.KeyCode;return a.extend([g],{isMenu:1,beforeCreateDom:function(a){a.elAttrs.role="menu"},bindUI:function(){this.on("afterHighlightedItemChange",f,this)},_onSetHighlightedItem:function(a,
c){var b;a&&c&&(b=c.prevVal)&&b.set("highlighted",!1,{data:{byPassSetHighlightedItem:1}})},_onSetVisible:function(a,c){this.callSuper(a,c);var b;!a&&(b=this.get("highlightedItem"))&&b.set("highlighted",!1)},getRootMenu:function(){return this},handleMouseEnterInternal:function(a){this.callSuper(a);a=this.getRootMenu();a!==this&&a._popupAutoHideTimer&&(clearTimeout(a._popupAutoHideTimer),a._popupAutoHideTimer=null)},handleBlurInternal:function(a){this.callSuper(a);var c;(c=this.get("highlightedItem"))&&
c.set("highlighted",!1)},_getNextEnabledHighlighted:function(a,c){var b=this.get("children"),i=b.length,g=a;do{var d=b[a];if(!d.get("disabled")&&!1!==d.get("visible"))return b[a];a=(a+c+i)%i}while(a!==g)},handleKeyDownInternal:function(a){var b=this.get("highlightedItem");if(b&&b.handleKeyDownInternal(a))return!0;var d=this.get("children"),i=d.length;if(0!==i){var g;switch(a.keyCode){case c.ESC:(b=this.get("highlightedItem"))&&b.set("highlighted",!1);break;case c.HOME:g=this._getNextEnabledHighlighted(0,
1);break;case c.END:g=this._getNextEnabledHighlighted(i-1,-1);break;case c.UP:b?(a=h.indexOf(b,d),i=(a-1+i)%i):i-=1;g=this._getNextEnabledHighlighted(i,-1);break;case c.DOWN:b?(a=h.indexOf(b,d),i=(a+1+i)%i):i=0,g=this._getNextEnabledHighlighted(i,1)}if(g)return g.set("highlighted",!0,{data:{fromKeyboard:1}}),!0}},containsElement:function(a){var b=this.$el;if(!this.get("visible")||!b)return!1;if(b&&(b[0]===a||b.contains(a)))return!0;for(var b=this.get("children"),c=0,i=b.length;c<i;c++){var g=b[c];
if(g.containsElement&&g.containsElement(a))return!0}return!1}},{ATTRS:{highlightedItem:{value:null},defaultChildCfg:{valueFn:function(){return{xclass:"menuitem"}}}},xclass:"menu"})});
KISSY.add("menu/menuitem",["component/control","node"],function(e,d){var f=d("component/control"),h=d("node").all;return f.extend({isMenuItem:1,beforeCreateDom:function(b){b.elAttrs.role="menuitem"},handleClickInternal:function(b){this.callSuper(b);b.preventDefault();this.fire("click");return!0},_onSetHighlighted:function(b,a){var g=this.get("parent");this.callSuper(b,a);if(!a||!a.byPassSetHighlightedItem)this.get("rendered")?g.set("highlightedItem",b?this:null):b&&g.set("highlightedItem",this);if(b){var c=
this.$el;(g=c.parent(function(a){return"visible"!==h(a).css("overflow")},g.get("el").parent()))&&c.scrollIntoView(g,{alignWithTop:!0,allowHorizontalScroll:!0,onlyScrollIfNeeded:!0})}},containsElement:function(b){var a=this.$el;return a&&(a[0]===b||a.contains(b))}},{ATTRS:{focusable:{value:!1},handleGestureEvents:{value:!1}},xclass:"menuitem"})});
KISSY.add("menu/check-menuitem",["./menuitem","component/extension/content-box","./check-menuitem-xtpl"],function(e,d){var f=d("./menuitem"),h=d("component/extension/content-box"),b=d("./check-menuitem-xtpl");return f.extend([h],{beforeCreateDom:function(a){a.checked&&a.elCls.push(this.getBaseCssClasses("checked"))},_onSetChecked:function(a){var b=this.getBaseCssClasses("checked");this.$el[a?"addClass":"removeClass"](b)},handleClickInternal:function(a){this.set("checked",!this.get("checked"));this.callSuper(a);
return!0}},{ATTRS:{contentTpl:{value:b},checked:{render:1,sync:0}},xclass:"check-menuitem"})});
KISSY.add("menu/check-menuitem-xtpl",[],function(e,d,f,h){e=function(b,a,g){var c=this.root.utils.callFn;a.write('<div class="',0);var d={escape:1},e=[];e.push("checkbox");d.params=e;if((d=c(this,b,d,a,["getBaseCssClasses"],0,1))&&d.isBuffer)a=d,d=g;a.write(d,!0);a.write('">\r\n</div>\r\n<div class="',0);d={escape:1};e=[];e.push("content");d.params=e;if((c=c(this,b,d,a,["getBaseCssClasses"],0,3))&&c.isBuffer)a=c,c=g;a.write(c,!0);a.write('">',0);b=b.resolve(["content"],0);a.write(b,!1);a.write("</div>",
0);return a};e.TPL_NAME=h.name;e.version="5.0.0";return e});
KISSY.add("menu/radio-menuitem",["./menuitem","component/extension/content-box","./radio-menuitem-xtpl"],function(e,d){var f=d("./menuitem"),h=d("component/extension/content-box"),b=d("./radio-menuitem-xtpl");return f.extend([h],{beforeCreateDom:function(a){a.elAttrs.role="menuitemradio";a.selected&&a.elCls.push(this.getBaseCssClasses("selected"))},_onSetSelected:function(a){var b=this.getBaseCssClasses("selected");this.$el[a?"addClass":"removeClass"](b)},handleClickInternal:function(a){var b=this.get("parent").getRootMenu(),
c=b.__selectedItem;c&&c!==this&&c.set("selected",!1);b.__selectedItem=this;this.set("selected",!0);this.callSuper(a);return!0},destructor:function(){var a=this.get("parent");if((a=a&&a.getRootMenu())&&a.__selectedItem===this)a.__selectedItem=null}},{ATTRS:{contentTpl:{value:b},selected:{sync:0,render:1}},xclass:"radio-menuitem"})});
KISSY.add("menu/radio-menuitem-xtpl",[],function(e,d,f,h){e=function(b,a,d){var c=this.root.utils.callFn;a.write('<div class="',0);var e={escape:1},f=[];f.push("radio");e.params=f;if((e=c(this,b,e,a,["getBaseCssClasses"],0,1))&&e.isBuffer)a=e,e=d;a.write(e,!0);a.write('">\r\n</div>\r\n<div class="',0);e={escape:1};f=[];f.push("content");e.params=f;if((c=c(this,b,e,a,["getBaseCssClasses"],0,3))&&c.isBuffer)a=c,c=d;a.write(c,!0);a.write('">',0);b=b.resolve(["content"],0);a.write(b,!1);a.write("</div>",
0);return a};e.TPL_NAME=h.name;e.version="5.0.0";return e});
KISSY.add("menu/submenu",["util","node","./submenu-xtpl","./menuitem","component/extension/content-box"],function(e,d){function f(a){var b=a.target;b!==this&&b.isMenuItem&&a.newVal&&(this.clearHidePopupMenuTimers(),this.get("highlighted")||(this.set("highlighted",!0),b.set("highlighted",!1),b.set("highlighted",!0)))}function h(){var b=this.get("menu"),c={node:this.$el,points:["tr","tl"],overflow:{adjustX:1,adjustY:1}};a.mix(b.get("align"),c,!1);b.show();this.el.setAttribute("aria-haspopup",b.get("el").attr("id"))}
function b(){this.get("menu").hide()}var a=d("util"),g=d("node"),c=d("./submenu-xtpl"),k=d("./menuitem"),l=d("component/extension/content-box"),j=g.KeyCode;return k.extend([l],{isSubMenu:1,decorateDom:function(a){var b=this.get("prefixCls"),a=a.one("."+b+"popupmenu"),c=a[0].ownerDocument.body;c.insertBefore(a[0],c.firstChild);this.setInternal("menu",new (this.getComponentConstructorByNode(b,a))({srcNode:a,prefixCls:b}))},bindUI:function(){this.on("afterHighlightedChange",f,this)},clearShowPopupMenuTimers:function(){var a;
if(a=this._showTimer)a.cancel(),this._showTimer=null},clearHidePopupMenuTimers:function(){var a;if(a=this._dismissTimer)a.cancel(),this._dismissTimer=null},clearSubMenuTimers:function(){this.clearHidePopupMenuTimers();this.clearShowPopupMenuTimers()},handleMouseLeaveInternal:function(){this.set("highlighted",!1,{data:{fromMouse:1}});this.clearSubMenuTimers();this.get("menu").get("visible")&&(this._dismissTimer=a.later(b,1E3*this.get("menuDelay"),!1,this))},handleMouseEnterInternal:function(){this.set("highlighted",
!0,{data:{fromMouse:1}});this.clearSubMenuTimers();this.get("menu").get("visible")||(this._showTimer=a.later(h,1E3*this.get("menuDelay"),!1,this))},_onSetHighlighted:function(a,c){this.callSuper(a,c);c&&!c.fromMouse&&(a&&!c.fromKeyboard?h.call(this):a||b.call(this))},handleClickInternal:function(a){h.call(this);this.callSuper(a)},handleKeyDownInternal:function(a){var b=this.get("menu"),c,d=b.get("visible"),g=a.keyCode;if(d){if(!b.handleKeyDownInternal(a))if(g===j.LEFT)this.set("highlighted",!1),this.set("highlighted",
!0,{data:{fromKeyboard:1}});else return}else if(g===j.RIGHT)h.call(this),a=b.get("children"),(c=a[0])&&c.set("highlighted",!0,{data:{fromKeyboard:1}});else{if(g===j.ENTER)return this.handleClickInternal(a);return}return!0},containsElement:function(a){return this.get("menu").containsElement(a)},destructor:function(){var a=this.get("menu");this.clearSubMenuTimers();a.destroy()}},{ATTRS:{contentTpl:{value:c},menuDelay:{value:0.15},menu:{getter:function(a){a=a||{};a.isControl||(a.xclass=a.xclass||"popupmenu",
a=this.createComponent(a),this.setInternal("menu",a));return a},setter:function(a){a.isControl&&a.setInternal("parent",this)}}},xclass:"submenu"})});
KISSY.add("menu/submenu-xtpl",[],function(e,d,f,h){e=function(b,a,d){var c=this.root.utils.callFn;a.write('<div class="',0);var e={escape:1},f=[];f.push("content");e.params=f;if((c=c(this,b,e,a,["getBaseCssClasses"],0,1))&&c.isBuffer)a=c,c=d;a.write(c,!0);a.write('">',0);d=b.resolve(["content"],0);a.write(d,!1);a.write('</div>\r\n<span class="',0);b=b.resolve(["prefixCls"],0);a.write(b,!0);a.write('submenu-arrow">\u25ba</span>',0);return a};e.TPL_NAME=h.name;e.version="5.0.0";return e});
KISSY.add("menu/popupmenu",["component/extension/align","component/extension/shim","./control","component/extension/content-box"],function(e,d){var f=d("component/extension/align"),h=d("component/extension/shim"),b=d("./control"),a=d("component/extension/content-box");return b.extend([a,h,f],{getRootMenu:function(){var a=this,b;do b=a,a=a.get("parent");while(a&&(a.isMenuItem||a.isMenu));return b},handleMouseLeaveInternal:function(a){this.callSuper(a);if(this.get("autoHideOnMouseLeave")){var b=this.getRootMenu();
b!==this&&(clearTimeout(b._popupAutoHideTimer),b._popupAutoHideTimer=setTimeout(function(){var a;(a=b.get("highlightedItem"))&&a.set("highlighted",!1)},1E3*this.get("parent").get("menuDelay")))}},isPopupMenu:1,handleBlurInternal:function(a){this.callSuper(a);this.hide()}},{ATTRS:{focusable:{value:!1},autoHideOnMouseLeave:{},visible:{value:!1}},xclass:"popupmenu"})});
