/*
Copyright 2013, KISSY v1.50dev
MIT Licensed
build time: Nov 26 20:55
*/
KISSY.add("swf/ua",[],function(g){function k(b){var d="string"==typeof b?b.match(/\d+/g).splice(0,3):b;g.isArray(d)&&(b=parseFloat(d[0]+"."+o(d[1],3)+o(d[2],5)));return b||0}function o(b,d){var b=(b||0)+"",g=d+1-b.length;return Array(0<g?g:0).join("0")+b}function l(g){if(g||i){i=!1;var d;if(navigator.plugins&&navigator.mimeTypes.length)d=(navigator.plugins["Shockwave Flash"]||0).description;else if(b.ActiveXObject)try{d=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(l){}p=
!d?void 0:d.match(/\d+/g).splice(0,3)}return p}var p,i=!0,b=g.Env.host;return{fpv:l,fpvGTE:function(b,g){return k(l(g))>=k(b)}}});
KISSY.add("swf",["dom","json","attribute","swf/ua"],function(g,k){function o(a){var c=e;g.each(a,function(a,b){b=b.toLowerCase();b in B?c+=i(b,a):b==C&&(c+=i(b,p(a)))});return c}function l(a,c,b,A){var f=e,d=e;g.each(c,function(a,c){f+=q+c+r+h+a+h});A?(f+=q+"classid"+r+h+D+h,d+=i("movie",a)):(f+=q+"data"+r+h+a+h,f+=q+"type"+r+h+E+h);d+=o(b);return s+t+f+u+d}function p(a){var c=[];g.each(a,function(a,b){"string"!=typeof a&&(a=z.stringify(a));a&&c.push(b+"="+F(a))});return c.join("&")}function i(a,
c){return'<param name="'+a+'" value="'+c+'"></param>'}var b=k("dom"),z=k("json"),d=k("attribute"),w=k("swf/ua"),m=!!g.Env.host.ActiveXObject,E="application/x-shockwave-flash",D="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",C="flashvars",e="",q=" ",r="=",h='"',s="<",u=">",G=g.Env.host.document,x=w.fpv,H=w.fpvGEQ,y=w.fpvGTE,t="object",F=encodeURIComponent,B={wmode:e,allowscriptaccess:e,allownetworking:e,allowfullscreen:e,play:"false",loop:e,menu:e,quality:e,scale:e,salign:e,bgcolor:e,devicefont:e,hasPriority:e,
base:e,swliveconnect:e,seamlesstabbing:e},v;return v=d.extend({constructor:function(){this.callSuper.apply(this,arguments);var a=this.get("expressInstall"),c,j,d=this.get("htmlMode");j=this.get("params");var f=this.get("attrs"),e=this.get("document"),h=b.create("<span>",void 0,e),k=this.get("elBefore"),i=this.get("src"),n=this.get("version");c=f.id=f.id||g.guid("ks-swf-");if(x()){if(n&&!y(n)&&(this.set("status",v.Status.TOO_LOW),a)){i=a;if(!("width"in f)||!/%$/.test(f.width)&&310>parseInt(f.width,
10))f.width="310";if(!("height"in f)||!/%$/.test(f.height)&&137>parseInt(f.height,10))f.height="137";a=j.flashVars=j.flashVars||{};g.mix(a,{MMredirectURL:location.href,MMplayerType:m?"ActiveX":"PlugIn",MMdoctitle:e.title.slice(0,47)+" - Flash Player Installation"})}"full"==d?(m?(a=l(i,f,j,1),delete f.id,delete f.style,n=l(i,f,j,0)):(n=l(i,f,j,0),delete f.id,delete f.style,a=l(i,f,j,1)),j=a+n+s+"/"+t+u+s+"/"+t+u):j=l(i,f,j,m)+s+"/"+t+u;this.set("html",j);k?b.insertBefore(h,k):b.append(h,this.get("render"));
"outerHTML"in h?h.outerHTML=j:h.parentNode.replaceChild(b.create(j),h);c=b.get("#"+c,e);this.set("swfObject",c);"full"==d&&(m?this.set("swfObject",c):this.set("swfObject",c.parentNode));this.set("el",c);this.get("status")||this.set("status",v.Status.SUCCESS)}else this.set("status",v.Status.NOT_INSTALLED)},callSWF:function(a,c){var b=this.get("el"),d,c=c||[];try{b[a]&&(d=b[a].apply(b,c))}catch(f){d="",0!==c.length&&(d="'"+c.join("', '")+"'"),d=(new Function("swf","return swf."+a+"("+d+");"))(b)}return d},
destroy:function(){this.detach();var a=this.get("swfObject");m?(a.style.display="none",function(){if(4==a.readyState){for(var b in a)"function"==typeof a[b]&&(a[b]=null);a.parentNode.removeChild(a)}else setTimeout(arguments.callee,10)}()):a.parentNode.removeChild(a)}},{ATTRS:{expressInstall:{value:g.config("base")+"swf/assets/expressInstall.swf"},src:{},version:{value:"9"},params:{value:{}},attrs:{value:{}},render:{setter:function(a){"string"==typeof a&&(a=b.get(a,this.get("document")));return a},
valueFn:function(){return document.body}},elBefore:{setter:function(a){"string"==typeof a&&(a=b.get(a,this.get("document")));return a}},document:{value:G},status:{},el:{},swfObject:{},html:{},htmlMode:{value:"default"}},getSrc:function(a){var c=a=b.get(a),d="",e,a=[],d=b.nodeName(c);if("object"==d){(d=b.attr(c,"data"))&&a.push(c);c=c.childNodes;for(d=0;d<c.length;d++)e=c[d],1==e.nodeType&&("movie"==(b.attr(e,"name")||"").toLowerCase()?a.push(e):"embed"==b.nodeName(e)?a.push(e):"object"==b.nodeName(c[d])&&
a.push(e))}else"embed"==d&&a.push(c);c=(a=a[0])&&b.nodeName(a);return"embed"==c?b.attr(a,"src"):"object"==c?b.attr(a,"data"):"param"==c?b.attr(a,"value"):null},Status:{TOO_LOW:"flash version is too low",NOT_INSTALLED:"flash is not installed",SUCCESS:"success"},HtmlMode:{DEFAULT:"default",FULL:"full"},fpv:x,fpvGEQ:H,fpvGTE:y})});
