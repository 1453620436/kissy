/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Apr 10 18:37
*/
KISSY.add("date/picker/render",["date/format","date/picker-xtpl","component/control"],function(k,g){function h(b){return"ks-date-picker-date-"+b.getYear()+"-"+b.getMonth()+"-"+b.getDayOfMonth()}function l(b,f){return b.getYear()===f.getYear()&&b.getMonth()===f.getMonth()&&b.getDayOfMonth()===f.getDayOfMonth()}function d(){return this.config.view.renderDates()}var b=g("date/format"),n=g("date/picker-xtpl");return g("component/control").getDefaultRender().extend({getMonthYearLabel:function(){var i=
this.control,f=i.get("locale"),i=i.get("value"),c=i.getLocale();return(new b(f.monthYearFormat,c)).format(i)},getTodayTimeLabel:function(){var i=this.control,f=i.get("locale"),c=i.get("value"),i=c.getLocale(),c=c.clone();c.setTime(k.now());return(new b(f.dateFormat,i)).format(c)},beforeCreateDom:function(b,f,c){var a=this.control,e=a.get("locale"),g=a.get("value"),a=g.getLocale();k.mix(f,{monthSelectEl:"#ks-date-picker-month-select-{id}",monthSelectContentEl:"#ks-date-picker-month-select-content-{id}",
previousMonthBtn:"#ks-date-picker-previous-month-btn-{id}",nextMonthBtn:"#ks-date-picker-next-month-btn-{id}",previousYearBtn:"#ks-date-picker-previous-year-btn-{id}",nextYearBtn:"#ks-date-picker-next-year-btn-{id}",todayBtnEl:"#ks-date-picker-today-btn-{id}",clearBtnEl:"#ks-date-picker-clear-btn-{id}",tbodyEl:"#ks-date-picker-tbody-{id}"});for(var f=[],p=[],g=g.getFirstDayOfWeek(),j=0;7>j;j++){var m=(g+j)%7;f[j]=e.veryShortWeekdays[m];p[j]=a.weekdays[m]}k.mix(b,{monthSelectLabel:e.monthSelect,monthYearLabel:this.getMonthYearLabel(),
previousMonthLabel:e.previousMonth,nextMonthLabel:e.nextMonth,previousYearLabel:e.previousYear,nextYearLabel:e.nextYear,weekdays:p,veryShortWeekdays:f,todayLabel:e.today,clearLabel:e.clear,todayTimeLabel:this.getTodayTimeLabel()});c.renderDates=d},renderDates:function(){var i,f,c=[],a,e=this.control,d=e.get("clear"),g=e.get("showWeekNumber"),j=e.get("locale"),m=e.get("value"),n=m.clone(),C=this.getBaseCssClasses("cell"),y=this.getBaseCssClasses("week-number-cell"),z=this.getBaseCssClasses("date"),
A=e.get("dateRender"),B=e.get("disabledDate"),v=m.getLocale(),j=new b(j.dateFormat,v),v=this.getBaseCssClasses("today"),D=this.getBaseCssClasses("selected-day"),s=this.getBaseCssClasses("last-month-cell"),E=this.getBaseCssClasses("next-month-btn-day"),o=this.getBaseCssClasses("disabled-cell");n.setTime(k.now());f=m.clone();f.set(m.getYear(),m.getMonth(),1);i=(f.getDayOfWeek()+7-m.getFirstDayOfWeek())%7;var u=f.clone();u.addDayOfMonth(0-i);var t=0;for(i=0;6>i;i++)for(f=0;7>f;f++)a=u,t&&(a=a.clone(),
a.addDayOfMonth(t)),c.push(a),t++;u="";for(i=t=0;6>i;i++){var w='<tr role="row">';g&&(w+=k.substitute('<td role="gridcell" class="{cls}">{content}</td>',{cls:y,content:c[t].getWeekOfYear()}));for(f=0;7>f;f++){a=c[t];var r=C,G=!1,H=!1;l(a,n)&&(r+=" "+v);!d&&l(a,m)&&(r+=" "+D,H=!0);(a.getYear()<m.getYear()||a.getYear()===m.getYear()&&a.getMonth()<m.getMonth())&&(r+=" "+s);(a.getYear()>m.getYear()||a.getYear()===m.getYear()&&a.getMonth()>m.getMonth())&&(r+=" "+E);B&&B(a,m)&&(r+=" "+o,G=!0);var F="";
if(!A||!(F=A(a,m)))F=k.substitute('<a  id="{id}"  hidefocus="on"  unselectable="on"  tabindex="-1"  class="{cls}"  href="#"  aria-selected="{selected}"  aria-disabled="{disabled}">{content}</a>',{cls:z,id:h(a),selected:H,disabled:G,content:a.getDayOfMonth()});w+=k.substitute('<td role="gridcell" data-index="{index}" title="{title}" class="{cls}">{content}</td>',{cls:r,index:t,title:j.format(a),content:F});t++}u+=w+"</tr>"}e.dateTable=c;return u},createDom:function(){this.$el.attr("aria-activedescendant",
h(this.control.get("value")))},_onSetClear:function(b){var f=this.control.get("value"),c=this.getBaseCssClasses("selected-day"),f=h(f),a=this.$("#"+f);b?(a.parent().removeClass(c),a.attr("aria-selected",!1),this.$el.attr("aria-activedescendant","")):(a.parent().addClass(c),a.attr("aria-selected",!0),this.$el.attr("aria-activedescendant",f))},_onSetValue:function(b,f){var c=this.control,a=f.prevVal;if(a.getYear()===b.getYear()&&a.getMonth()===b.getMonth()){var e=c.get("disabledDate"),c=this.getBaseCssClasses("selected-day"),
a=this.$("#"+h(a));a.parent().removeClass(c);a.attr("aria-selected",!1);if(!e||!e(b,b))a=this.$("#"+h(b)),a.parent().addClass(c),a.attr("aria-selected",!0)}else a=c.get("tbodyEl"),e=c.get("monthSelectContentEl"),c=c.get("todayBtnEl"),e.html(this.getMonthYearLabel()),c.attr("title",this.getTodayTimeLabel()),a.html(this.renderDates());this.$el.attr("aria-activedescendant",h(b))}},{name:"date-picker-render",ATTRS:{contentTpl:{value:n}}})});
KISSY.add("date/picker/year-panel/years-xtpl",[],function(k,g,h,l){g=function(d,b,g,i){var f=this,c=f.nativeCommands,a=f.utils;if("5.0.0"!==k.version)throw Error("current xtemplate file("+f.name+")(v5.0.0) need to be recompiled using current kissy(v"+k.version+")!");var e=a.callCommand,h=c.each,p=c["if"];b.write("");var c={escape:1},a=[],j=d.resolve(["years"]);a.push(j);c.params=a;c.fn=function(a,b){b.write('\n<tr role="row">\n    ');var c={escape:1},d=[],j=a.resolve(["xindex"]),j=a.resolve(["years",
j]);d.push(j);c.params=d;c.fn=function(a,b){b.write('\n    <td role="gridcell"\n        title="');var c=a.resolve(["title"]);b.write(c,!0);b.write('"\n        class="');var c={escape:1},d=[];d.push("cell");c.params=d;if((c=e(f,a,c,b,"getBaseCssClasses",6))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");var c={escape:1},d=[],j=a.resolve(["content"]),h=a.resolve(["year"]);d.push(j===h);c.params=d;c.fn=function(a,b){b.write("\n         ");var c={escape:1},d=[];d.push("selected-cell");c.params=
d;if((c=e(f,a,c,b,"getBaseCssClasses",8))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");return b};b=p.call(f,a,c,b,7,g);b.write("\n        ");c={escape:1};d=[];j=a.resolve(["content"]);h=a.resolve(["startYear"]);d.push(j<h);c.params=d;c.fn=function(a,b){b.write("\n         ");var c={escape:1},d=[];d.push("last-decade-cell");c.params=d;if((c=e(f,a,c,b,"getBaseCssClasses",11))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");return b};b=p.call(f,a,c,b,10,g);b.write("\n        ");c=
{escape:1};d=[];j=a.resolve(["content"]);h=a.resolve(["endYear"]);d.push(j>h);c.params=d;c.fn=function(a,b){b.write("\n         ");var c={escape:1},d=[];d.push("next-decade-cell");c.params=d;if((c=e(f,a,c,b,"getBaseCssClasses",14))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");return b};b=p.call(f,a,c,b,13,g);b.write('\n        ">\n        <a hidefocus="on"\n           href="#"\n           unselectable="on"\n           class="');c={escape:1};d=[];d.push("year");c.params=d;if((c=e(f,a,c,
b,"getBaseCssClasses",20))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write('">\n            ');c=a.resolve(["content"]);b.write(c,!0);b.write("\n        </a>\n    </td>\n    ");return b};b=h.call(f,a,c,b,3,g);b.write("\n</tr>\n");return b};return b=h.call(f,d,c,b,1,g)};g.TPL_NAME=l.name;return g});
KISSY.add("date/picker/year-panel/year-panel-xtpl",["date/picker/year-panel/years-xtpl"],function(k,g,h,l){h=function(d,b,h,i){var f=this.nativeCommands,c=this.utils;if("5.0.0"!==k.version)throw Error("current xtemplate file("+this.name+")(v5.0.0) need to be recompiled using current kissy(v"+k.version+")!");c=c.callCommand;f=f.include;b.write('<div class="');var a={escape:1},e=[];e.push("header");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",1))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n    <a class="');
a={escape:1};e=[];e.push("prev-decade-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",2))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('"\n       href="#"\n       role="button"\n       title="');a=d.resolve(["previousDecadeLabel"]);b.write(a,!0);b.write('"\n       hidefocus="on">\n    </a>\n\n    <a class="');a={escape:1};e=[];e.push("decade-select");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",9))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('"\n       role="button"\n       href="#"\n       hidefocus="on"\n       title="');
a=d.resolve(["decadeSelectLabel"]);b.write(a,!0);b.write('">\n            <span>\n                ');a=d.resolve(["startYear"]);b.write(a,!0);b.write("-");a=d.resolve(["endYear"]);b.write(a,!0);b.write('\n            </span>\n        <span class="');a={escape:1};e=[];e.push("decade-select-arrow");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",17))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">x</span>\n    </a>\n\n    <a class="');a={escape:1};e=[];e.push("next-decade-btn");a.params=e;if((a=c(this,
d,a,b,"getBaseCssClasses",20))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('"\n       href="#"\n       role="button"\n       title="');a=d.resolve(["nextDecadeLabel"]);b.write(a,!0);b.write('"\n       hidefocus="on">\n    </a>\n</div>\n<div class="');a={escape:1};e=[];e.push("body");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",27))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n    <table class="');a={escape:1};e=[];e.push("table");a.params=e;if((c=c(this,d,a,b,"getBaseCssClasses",28))&&c.isBuffer)b=
c,c=i;b.write(c,!0);b.write('" cellspacing="0" role="grid">\n        <tbody>\n        ');c={};a=[];a.push("date/picker/year-panel/years-xtpl");c.params=a;g("date/picker/year-panel/years-xtpl");c.params[0]=l.resolve(c.params[0]);if((d=f.call(this,d,c,b,30,h))&&d.isBuffer)b=d,d=i;b.write(d,!1);b.write("\n        </tbody>\n    </table>\n</div>");return b};h.TPL_NAME=l.name;return h});
KISSY.add("date/picker/year-panel/render",["date/format","component/control","./years-xtpl","./year-panel-xtpl"],function(k,g){function h(b){for(var f=b.get("value"),c=f.getYear(),c=10*parseInt(c/10,10)-1,a=f.clone(),e=b.get("locale").yearFormat,f=f.getLocale(),f=new l(e,f),e=[],d=0,g=0;3>g;g++){e[g]=[];for(var j=0;4>j;j++)a.setYear(c+d),e[g][j]={content:c+d,title:f.format(a)},d++}return b.years=e}var l=g("date/format"),d=g("component/control"),b=g("./years-xtpl"),n=g("./year-panel-xtpl");return d.getDefaultRender().extend({beforeCreateDom:function(b,
f){var c=this.control,a=c.get("value"),e=a.getYear(),e=10*parseInt(e/10,10),d=e+9,g=c.get("locale");k.mix(b,{decadeSelectLabel:g.decadeSelect,years:h(c),startYear:e,endYear:d,year:a.getYear(),previousDecadeLabel:g.previousDecade,nextDecadeLabel:g.nextDecade});k.mix(f,{tbodyEl:"#ks-date-picker-year-panel-tbody-{id}",previousDecadeBtn:"#ks-date-picker-year-panel-previous-decade-btn-{id}",decadeSelectEl:"#ks-date-picker-year-panel-decade-select-{id}",decadeSelectContentEl:"#ks-date-picker-year-panel-decade-select-content-{id}",
nextDecadeBtn:"#ks-date-picker-year-panel-next-decade-btn-{id}"})},_onSetValue:function(d){var f=this.control,c=d.getYear(),c=10*parseInt(c/10,10),a=c+9;k.mix(this.renderData,{startYear:c,endYear:a,years:h(f),year:d.getYear()});f.get("tbodyEl").html(this.renderTpl(b));f.get("decadeSelectContentEl").html(c+"-"+a)}},{ATTRS:{contentTpl:{value:n}}})});
KISSY.add("date/picker/decade-panel/decades-xtpl",[],function(k,g,h,l){g=function(d,b,g,i){var f=this,c=f.nativeCommands,a=f.utils;if("5.0.0"!==k.version)throw Error("current xtemplate file("+f.name+")(v5.0.0) need to be recompiled using current kissy(v"+k.version+")!");var e=a.callCommand,h=c.each,p=c["if"];b.write("");var c={escape:1},a=[],j=d.resolve(["decades"]);a.push(j);c.params=a;c.fn=function(a,b){b.write('\n<tr role="row">\n    ');var c={escape:1},d=[],j=a.resolve(["xindex"]),j=a.resolve(["decades",
j]);d.push(j);c.params=d;c.fn=function(a,b){b.write('\n    <td role="gridcell"\n        class="');var c={escape:1},d=[];d.push("cell");c.params=d;if((c=e(f,a,c,b,"getBaseCssClasses",5))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");var c={escape:1},d=[],j=a.resolve(["startDecade"]),h=j,h=a.resolve(["year"]);if(j=h=j<=h)j=a.resolve(["year"]),h=a.resolve(["endDecade"]),j=j<=h;d.push(j);c.params=d;c.fn=function(a,b){b.write("\n         ");var c={escape:1},d=[];d.push("selected-cell");c.params=
d;if((c=e(f,a,c,b,"getBaseCssClasses",7))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");return b};b=p.call(f,a,c,b,6,g);b.write("\n        ");c={escape:1};d=[];j=a.resolve(["startDecade"]);h=a.resolve(["startYear"]);d.push(j<h);c.params=d;c.fn=function(a,b){b.write("\n         ");var c={escape:1},d=[];d.push("last-century-cell");c.params=d;if((c=e(f,a,c,b,"getBaseCssClasses",10))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");return b};b=p.call(f,a,c,b,9,g);b.write("\n        ");
c={escape:1};d=[];j=a.resolve(["endDecade"]);h=a.resolve(["endYear"]);d.push(j>h);c.params=d;c.fn=function(a,b){b.write("\n         ");var c={escape:1},d=[];d.push("next-century-cell");c.params=d;if((c=e(f,a,c,b,"getBaseCssClasses",13))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");return b};b=p.call(f,a,c,b,12,g);b.write('\n        ">\n        <a hidefocus="on"\n           href="#"\n           unselectable="on"\n           class="');c={escape:1};d=[];d.push("decade");c.params=d;if((c=e(f,
a,c,b,"getBaseCssClasses",19))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write('">\n            ');c=a.resolve(["startDecade"]);b.write(c,!0);b.write("-");c=a.resolve(["endDecade"]);b.write(c,!0);b.write("\n        </a>\n    </td>\n    ");return b};b=h.call(f,a,c,b,3,g);b.write("\n</tr>\n");return b};return b=h.call(f,d,c,b,1,g)};g.TPL_NAME=l.name;return g});
KISSY.add("date/picker/decade-panel/decade-panel-xtpl",["date/picker/decade-panel/decades-xtpl"],function(k,g,h,l){h=function(d,b,h,i){var f=this.nativeCommands,c=this.utils;if("5.0.0"!==k.version)throw Error("current xtemplate file("+this.name+")(v5.0.0) need to be recompiled using current kissy(v"+k.version+")!");c=c.callCommand;f=f.include;b.write('<div class="');var a={escape:1},e=[];e.push("header");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",1))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n    <a class="');
a={escape:1};e=[];e.push("prev-century-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",2))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('"\n       href="#"\n       role="button"\n       title="');a=d.resolve(["previousCenturyLabel"]);b.write(a,!0);b.write('"\n       hidefocus="on">\n    </a>\n    <div class="');a={escape:1};e=[];e.push("century");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",8))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n                ');a=d.resolve(["startYear"]);
b.write(a,!0);b.write("-");a=d.resolve(["endYear"]);b.write(a,!0);b.write('\n    </div>\n    <a class="');a={escape:1};e=[];e.push("next-century-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",11))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('"\n       href="#"\n       role="button"\n       title="');a=d.resolve(["nextCenturyLabel"]);b.write(a,!0);b.write('"\n       hidefocus="on">\n    </a>\n</div>\n<div class="');a={escape:1};e=[];e.push("body");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",
18))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n    <table class="');a={escape:1};e=[];e.push("table");a.params=e;if((c=c(this,d,a,b,"getBaseCssClasses",19))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write('" cellspacing="0" role="grid">\n        <tbody>\n        ');c={};a=[];a.push("date/picker/decade-panel/decades-xtpl");c.params=a;g("date/picker/decade-panel/decades-xtpl");c.params[0]=l.resolve(c.params[0]);if((d=f.call(this,d,c,b,21,h))&&d.isBuffer)b=d,d=i;b.write(d,!1);b.write("\n        </tbody>\n    </table>\n</div>");
return b};h.TPL_NAME=l.name;return h});
KISSY.add("date/picker/decade-panel/render",["component/control","./decade-panel-xtpl","./decades-xtpl"],function(k,g){function h(b,d){for(var f=b.get("value").getYear(),c=100*parseInt(f/100,10),a=c-10,e=[],g=0,h=0;3>h;h++){e[h]=[];for(var j=0;4>j;j++)e[h][j]={startDecade:a+10*g,endDecade:a+10*g+9},g++}b.decades=e;k.mix(d.renderData,{startYear:c,endYear:c+99,year:f,decades:e})}var l=g("component/control"),d=g("./decade-panel-xtpl"),b=g("./decades-xtpl");return l.getDefaultRender().extend({beforeCreateDom:function(b,d){var f=
this.control,c=f.get("locale");h(f,this);k.mix(b,{previousCenturyLabel:c.previousCentury,nextCenturyLabel:c.nextCentury});k.mix(d,{tbodyEl:"#ks-date-picker-decade-panel-tbody-{id}",previousCenturyBtn:"#ks-date-picker-decade-panel-previous-century-btn-{id}",centuryEl:"#ks-date-picker-decade-panel-century-{id}",nextCenturyBtn:"#ks-date-picker-decade-panel-next-century-btn-{id}"})},_onSetValue:function(){var d=this.control;h(d,this);var g=this.renderData.startYear,f=this.renderData.endYear;d.get("tbodyEl").html(this.renderTpl(b));
d.get("centuryEl").html(g+"-"+f)}},{ATTRS:{contentTpl:{value:d}}})});
KISSY.add("date/picker/decade-panel/control",["node","component/control","./render","event/gesture/tap"],function(k,g){function h(a,b){var c=a.get("value").clone();c.addYear(b);a.set("value",c)}function l(a){a.preventDefault();h(this,100)}function d(a){a.preventDefault();h(this,-100)}function b(b){b.preventDefault();var b=a(b.currentTarget),c=b.parent(),b=b.index(),c=c.index(),d=this.get("value").clone(),f=d.getYear()%10;d.setYear(this.decades[c][b].startDecade+f);this.set("value",d);this.fire("select",
{value:d})}var n=g("node"),i=g("component/control"),f=g("./render"),c=g("event/gesture/tap").TAP,a=n.all;return i.extend({bindUI:function(){this.get("nextCenturyBtn").on(c,l,this);this.get("previousCenturyBtn").on(c,d,this);this.get("tbodyEl").delegate(c,"."+this.view.getBaseCssClass("cell"),b,this)}},{xclass:"date-picker-decade-panel",ATTRS:{focusable:{value:!1},value:{render:1},xrender:{value:f}}})});
KISSY.add("date/picker/year-panel/control",["node","component/control","./render","../decade-panel/control","event/gesture/tap"],function(k,g){function h(a,b){var c=a.get("value").clone();c.addYear(b);a.set("value",c)}function l(a){a.preventDefault();h(this,10)}function d(a){a.preventDefault();h(this,-10)}function b(a){a.preventDefault();var a=p(a.currentTarget),b=a.parent(),a=a.index(),b=b.index(),c=this.get("value").clone();c.setYear(this.years[b][a].content);this.set("value",c);this.fire("select",
{value:c})}function n(a){a.preventDefault();a=this.get("decadePanel");a.set("value",this.get("value"));a.show()}function i(a){this.set("value",a.value);this.get("decadePanel").hide()}var f=g("node"),c=g("component/control"),a=g("./render"),e=g("../decade-panel/control"),q=g("event/gesture/tap").TAP,p=f.all;return c.extend({bindUI:function(){this.get("nextDecadeBtn").on(q,l,this);this.get("previousDecadeBtn").on(q,d,this);this.get("tbodyEl").delegate(q,"."+this.view.getBaseCssClass("cell"),b,this);
this.get("decadeSelectEl").on(q,n,this)}},{xclass:"date-picker-year-panel",ATTRS:{focusable:{value:!1},value:{render:1},decadePanel:{valueFn:function(){var a=new e({locale:this.get("locale"),render:this.get("render")});a.on("select",i,this);return a}},xrender:{value:a}}})});
KISSY.add("date/picker/month-panel/months-xtpl",[],function(k,g,h,l){g=function(d,b,g,i){var f=this,c=f.nativeCommands,a=f.utils;if("5.0.0"!==k.version)throw Error("current xtemplate file("+f.name+")(v5.0.0) need to be recompiled using current kissy(v"+k.version+")!");var e=a.callCommand,h=c.each,l=c["if"];b.write("");var c={escape:1},a=[],j=d.resolve(["months"]);a.push(j);c.params=a;c.fn=function(a,b){b.write('\n<tr role="row">\n    ');var c={escape:1},d=[],j=a.resolve(["xindex"]),j=a.resolve(["months",
j]);d.push(j);c.params=d;c.fn=function(a,b){b.write('\n    <td role="gridcell"\n        title="');var c=a.resolve(["title"]);b.write(c,!0);b.write('"\n        class="');var c={escape:1},d=[];d.push("cell");c.params=d;if((c=e(f,a,c,b,"getBaseCssClasses",6))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");var c={escape:1},d=[],j=a.resolve(["month"]),h=a.resolve(["value"]);d.push(j===h);c.params=d;c.fn=function(a,b){b.write("\n        ");var c={escape:1},d=[];d.push("selected-cell");c.params=
d;if((c=e(f,a,c,b,"getBaseCssClasses",8))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write("\n        ");return b};b=l.call(f,a,c,b,7,g);b.write('\n        ">\n        <a hidefocus="on"\n           href="#"\n           unselectable="on"\n           class="');c={escape:1};d=[];d.push("month");c.params=d;if((c=e(f,a,c,b,"getBaseCssClasses",14))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write('">\n            ');c=a.resolve(["content"]);b.write(c,!0);b.write("\n        </a>\n    </td>\n    ");return b};b=h.call(f,
a,c,b,3,g);b.write("\n</tr>\n");return b};return b=h.call(f,d,c,b,1,g)};g.TPL_NAME=l.name;return g});
KISSY.add("date/picker/month-panel/month-panel-xtpl",["date/picker/month-panel/months-xtpl"],function(k,g,h,l){h=function(d,b,h,i){var f=this.nativeCommands,c=this.utils;if("5.0.0"!==k.version)throw Error("current xtemplate file("+this.name+")(v5.0.0) need to be recompiled using current kissy(v"+k.version+")!");c=c.callCommand;f=f.include;b.write('<div class="');var a={escape:1},e=[];e.push("header");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",1))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n    <a class="');
a={escape:1};e=[];e.push("prev-year-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",2))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('"\n       href="#"\n       role="button"\n       title="');a=d.resolve(["previousYearLabel"]);b.write(a,!0);b.write('"\n       hidefocus="on">\n    </a>\n\n\n        <a class="');a={escape:1};e=[];e.push("year-select");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",10))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('"\n           role="button"\n           href="#"\n           hidefocus="on"\n           title="');
a=d.resolve(["yearSelectLabel"]);b.write(a,!0);b.write('">\n            <span>');a=d.resolve(["year"]);b.write(a,!0);b.write('</span>\n            <span class="');a={escape:1};e=[];e.push("year-select-arrow");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",16))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">x</span>\n        </a>\n\n    <a class="');a={escape:1};e=[];e.push("next-year-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",19))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('"\n       href="#"\n       role="button"\n       title="');
a=d.resolve(["nextYearLabel"]);b.write(a,!0);b.write('"\n       hidefocus="on">\n    </a>\n</div>\n<div class="');a={escape:1};e=[];e.push("body");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",26))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n    <table class="');a={escape:1};e=[];e.push("table");a.params=e;if((c=c(this,d,a,b,"getBaseCssClasses",27))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write('" cellspacing="0" role="grid">\n        <tbody>\n        ');c={};a=[];a.push("date/picker/month-panel/months-xtpl");
c.params=a;g("date/picker/month-panel/months-xtpl");c.params[0]=l.resolve(c.params[0]);if((d=f.call(this,d,c,b,29,h))&&d.isBuffer)b=d,d=i;b.write(d,!1);b.write("\n        </tbody>\n    </table>\n</div>");return b};h.TPL_NAME=l.name;return h});
KISSY.add("date/picker/month-panel/render",["date/format","component/control","./months-xtpl","./month-panel-xtpl"],function(k,g){function h(b){for(var d=b.get("value"),c=d.getMonth(),a=d.clone(),e=b.get("locale").monthYearFormat,g=d.getLocale(),e=new l(e,g),h=[],g=g.shortMonths,j=0,m=0;3>m;m++){h[m]=[];for(var n=0;4>n;n++)a.setMonth(j),h[m][n]={value:j,content:g[j],title:e.format(a)},j++}k.mix(b.view.renderData,{months:h,year:d.getYear(),month:c});return b.months=h}var l=g("date/format"),d=g("component/control"),
b=g("./months-xtpl"),n=g("./month-panel-xtpl");return d.getDefaultRender().extend({beforeCreateDom:function(b,d){var c=this.control,a=c.get("locale");k.mix(b,{yearSelectLabel:a.yearSelect,previousYearLabel:a.previousYear,nextYearLabel:a.nextYear});k.mix(d,{tbodyEl:"#ks-date-picker-month-panel-tbody-{id}",previousYearBtn:"#ks-date-picker-month-panel-previous-year-btn-{id}",yearSelectEl:"#ks-date-picker-month-panel-year-select-{id}",yearSelectContentEl:"#ks-date-picker-month-panel-year-select-content-{id}",
nextYearBtn:"#ks-date-picker-month-panel-next-year-btn-{id}"});h(c)},_onSetValue:function(d){var f=this.control;h(f);f.get("tbodyEl").html(this.renderTpl(b));f.get("yearSelectContentEl").html(d.getYear())}},{ATTRS:{contentTpl:{value:n}}})});
KISSY.add("date/picker/month-panel/control",["node","component/control","../year-panel/control","./render","event/gesture/tap"],function(k,g){function h(a,b){var c=a.get("value").clone();c.addYear(b);a.set("value",c)}function l(a){a.preventDefault();h(this,1)}function d(a){a.preventDefault();h(this,-1)}function b(a){a.preventDefault();var a=p(a.currentTarget),b=a.parent(),a=a.index(),b=b.index(),c=this.get("value").clone();c.setMonth(4*b+a);this.fire("select",{value:c})}function n(a){a.preventDefault();
a=this.get("yearPanel");a.set("value",this.get("value"));a.show()}function i(a){this.set("value",a.value);this.get("yearPanel").hide()}var f=g("node"),c=g("component/control"),a=g("../year-panel/control"),e=g("./render"),q=g("event/gesture/tap").TAP,p=f.all;return c.extend({bindUI:function(){this.get("nextYearBtn").on(q,l,this);this.get("previousYearBtn").on(q,d,this);this.get("tbodyEl").delegate(q,"."+this.view.getBaseCssClass("cell"),b,this);this.get("yearSelectEl").on(q,n,this)}},{xclass:"date-picker-month-panel",
ATTRS:{focusable:{value:!1},value:{render:1},yearPanel:{valueFn:function(){var b=new a({locale:this.get("locale"),render:this.get("render")});b.on("select",i,this);return b}},xrender:{value:e}}})});
KISSY.add("date/picker/control","node,date/gregorian,i18n!date/picker,component/control,./render,./month-panel/control,event/gesture/tap".split(","),function(k,g){function h(a){var b=a.get("value").clone();b.setDayOfMonth(1);a.set("value",b)}function l(a){var b=a.get("value").clone();b.setDayOfMonth(b.getActualMaximum(z.MONTH));a.set("value",b)}function d(a,b){var c=a.get("value").clone();c.addMonth(b);a.set("value",c)}function b(a,b){var c=a.get("value").clone();c.addYear(b);a.set("value",c)}function n(a,
b){var c=a.get("value").clone();c.addWeekOfYear(b);a.set("value",c)}function i(a,b){var c=a.get("value").clone();c.addDayOfMonth(b);a.set("value",c)}function f(a){a.preventDefault();d(this,1)}function c(a){a.preventDefault();d(this,-1)}function a(a){a.preventDefault();b(this,1)}function e(a){a.preventDefault();b(this,-1)}function q(a){var b=this;b.set("clear",false);var c=b.get("disabledDate");a.preventDefault();var a=E(a.currentTarget),d=b.dateTable[parseInt(a.attr("data-index"),10)];(!c||!c(d,b.get("value")))&&
setTimeout(function(){b.set("value",d);b.fire("select",{value:d})},0)}function p(a){a.preventDefault();a=this.get("monthPanel");a.set("value",this.get("value"));a.show()}function j(a){this.set("value",a.value);this.get("monthPanel").hide()}function m(a){a.preventDefault();this.set("clear",false);a=this.get("value").clone();a.setTime(k.now());this.set("value",a)}function x(){if(this.get("clear")){this.get("value").setDayOfMonth(1);this.set("clear",false)}else this.set("clear",true)}function C(a){a.preventDefault();
this.get("clear")||x.call(this);this.fire("select",{value:null})}var y=g("node"),z=g("date/gregorian"),A=g("i18n!date/picker"),B=g("component/control"),v=g("./render"),D=g("./month-panel/control"),s=g("event/gesture/tap").TAP,E=y.all,o=y.KeyCode;return B.extend({bindUI:function(){this.get("nextMonthBtn").on(s,f,this);this.get("previousMonthBtn").on(s,c,this);this.get("nextYearBtn").on(s,a,this);this.get("previousYearBtn").on(s,e,this);this.get("tbodyEl").delegate(s,"."+this.view.getBaseCssClass("cell"),
q,this);this.get("monthSelectEl").on(s,p,this);this.get("todayBtnEl").on(s,m,this);this.get("clearBtnEl").on(s,C,this)},handleKeyDownInternal:function(a){var c=a.keyCode,a=a.ctrlKey;switch(c){case o.SPACE:this.set("clear",!this.get("clear"));return true}if(this.get("clear"))switch(c){case o.DOWN:case o.UP:case o.LEFT:case o.RIGHT:a||x.call(this);return true;case o.HOME:x.call(this);h(this);return true;case o.END:x.call(this);l(this);return true;case o.ENTER:this.fire("select",{value:null});return true}switch(c){case o.DOWN:n(this,
1);return true;case o.UP:n(this,-1);return true;case o.LEFT:a?b(this,-1):i(this,-1);return true;case o.RIGHT:a?b(this,1):i(this,1);return true;case o.HOME:h(this);return true;case o.END:l(this);return true;case o.PAGE_DOWN:d(this,1);return true;case o.PAGE_UP:d(this,-1);return true;case o.ENTER:this.fire("select",{value:this.get("value")});return true}}},{xclass:"date-picker",ATTRS:{focusable:{value:true},value:{render:1,valueFn:function(){var a=new z;a.setTime(k.now());return a}},previousMonthBtn:{},
monthSelectEl:{},monthPanel:{valueFn:function(){var a=new D({locale:this.get("locale"),render:this.get("el")});a.on("select",j,this);return a}},nextMonthBtn:{},tbodyEl:{},todayBtnEl:{},dateRender:{},disabledDate:{},locale:{value:A},showToday:{render:1,value:true},showClear:{render:1,value:true},clear:{render:1,value:false},showWeekNumber:{render:1,value:true},xrender:{value:v}}})});KISSY.add("date/picker",["./picker/control"],function(k,g){return g("./picker/control")});
