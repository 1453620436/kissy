/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Apr 23 11:59
*/
KISSY.add("date/picker","node,date/gregorian,i18n!date/picker,component/control,./picker/month-panel/control,event/gesture/tap,date/format,date/picker-xtpl".split(","),function(s,j){function d(h){return"ks-date-picker-date-"+h.getYear()+"-"+h.getMonth()+"-"+h.getDayOfMonth()}function q(h,a){return h.getYear()===a.getYear()&&h.getMonth()===a.getMonth()&&h.getDayOfMonth()===a.getDayOfMonth()}function o(){return this.config.control.renderDates()}function b(h){var a=h.get("value").clone();a.setDayOfMonth(1);
h.set("value",a)}function p(h){var a=h.get("value").clone();a.setDayOfMonth(a.getActualMaximum(n.MONTH));h.set("value",a)}function l(h,a){var f=h.get("value").clone();f.addMonth(a);h.set("value",f)}function g(h,a){var f=h.get("value").clone();f.addYear(a);h.set("value",f)}function c(h,a){var f=h.get("value").clone();f.addWeekOfYear(a);h.set("value",f)}function a(h,a){var f=h.get("value").clone();f.addDayOfMonth(a);h.set("value",f)}function e(h){h.preventDefault();l(this,1)}function i(h){h.preventDefault();
l(this,-1)}function w(h){h.preventDefault();g(this,1)}function C(h){h.preventDefault();g(this,-1)}function u(h){var a=this;a.set("clear",false);var f=a.get("disabledDate");h.preventDefault();var h=v(h.currentTarget),b=a.dateTable[parseInt(h.attr("data-index"),10)];(!f||!f(b,a.get("value")))&&setTimeout(function(){a.set("value",b);a.fire("select",{value:b})},0)}function r(h){h.preventDefault();h=this.get("monthPanel");h.set("value",this.get("value"));h.show()}function x(h){this.set("value",h.value);
this.get("monthPanel").hide()}function D(h){h.preventDefault();this.set("clear",false);h=this.get("value").clone();h.setTime(s.now());this.set("value",h)}function y(){if(this.get("clear")){this.get("value").setDayOfMonth(1);this.set("clear",false)}else this.set("clear",true)}function m(h){h.preventDefault();this.get("clear")||y.call(this);this.fire("select",{value:null})}var A=j("node"),n=j("date/gregorian"),H=j("i18n!date/picker"),B=j("component/control"),G=j("./picker/month-panel/control"),E=j("event/gesture/tap").TAP,
v=A.all,t=A.KeyCode,z=j("date/format"),A=j("date/picker-xtpl");return B.extend({beforeCreateDom:function(h,a){for(var f=this.get("locale"),b=this.get("value"),e=b.getLocale(),r=[],c=[],b=b.getFirstDayOfWeek(),x=0;x<7;x++){var m=(b+x)%7;r[x]=f.veryShortWeekdays[m];c[x]=e.weekdays[m]}s.mix(h,{monthSelectLabel:f.monthSelect,monthYearLabel:this.getMonthYearLabel(),previousMonthLabel:f.previousMonth,nextMonthLabel:f.nextMonth,previousYearLabel:f.previousYear,nextYearLabel:f.nextYear,weekdays:c,veryShortWeekdays:r,
todayLabel:f.today,clearLabel:f.clear,todayTimeLabel:this.getTodayTimeLabel()});a.renderDates=o},createDom:function(){this.$el.attr("aria-activedescendant",d(this.get("value")))},bindUI:function(){this.get("nextMonthBtn").on(E,e,this);this.get("previousMonthBtn").on(E,i,this);this.get("nextYearBtn").on(E,w,this);this.get("previousYearBtn").on(E,C,this);this.get("tbodyEl").delegate(E,"."+this.getBaseCssClass("cell"),u,this);this.get("monthSelectEl").on(E,r,this);this.get("todayBtnEl").on(E,D,this);
this.get("clearBtnEl").on(E,m,this)},getMonthYearLabel:function(){var h=this.get("locale"),a=this.get("value"),f=a.getLocale();return(new z(h.monthYearFormat,f)).format(a)},getTodayTimeLabel:function(){var h=this.get("locale"),a=this.get("value"),f=a.getLocale(),a=a.clone();a.setTime(s.now());return(new z(h.dateFormat,f)).format(a)},renderDates:function(){var a,k,f=[],b,e=this.get("clear"),r=this.get("showWeekNumber"),c=this.get("locale"),x=this.get("value"),m=x.clone(),n=this.getBaseCssClasses("cell"),
D=this.getBaseCssClasses("week-number-cell"),A=this.getBaseCssClasses("date"),i=this.get("dateRender"),u=this.get("disabledDate"),t=x.getLocale(),c=new z(c.dateFormat,t),t=this.getBaseCssClasses("today"),o=this.getBaseCssClasses("selected-day"),H=this.getBaseCssClasses("last-month-cell"),g=this.getBaseCssClasses("next-month-btn-day"),l=this.getBaseCssClasses("disabled-cell");m.setTime(s.now());k=x.clone();k.set(x.getYear(),x.getMonth(),1);a=(k.getDayOfWeek()+7-x.getFirstDayOfWeek())%7;var v=k.clone();
v.addDayOfMonth(0-a);var y=0;for(a=0;a<6;a++)for(k=0;k<7;k++){b=v;if(y){b=b.clone();b.addDayOfMonth(y)}f.push(b);y++}v="";for(a=y=0;a<6;a++){var B='<tr role="row">';r&&(B=B+s.substitute('<td role="gridcell" class="{cls}">{content}</td>',{cls:D,content:f[y].getWeekOfYear()}));for(k=0;k<7;k++){b=f[y];var p=n,w=false,j=false;q(b,m)&&(p=p+(" "+t));if(!e&&q(b,x)){p=p+(" "+o);j=true}(b.getYear()<x.getYear()||b.getYear()===x.getYear()&&b.getMonth()<x.getMonth())&&(p=p+(" "+H));(b.getYear()>x.getYear()||
b.getYear()===x.getYear()&&b.getMonth()>x.getMonth())&&(p=p+(" "+g));if(u&&u(b,x)){p=p+(" "+l);w=true}var E="";if(!i||!(E=i(b,x)))E=s.substitute('<a  id="{id}"  hidefocus="on"  unselectable="on"  tabindex="-1"  class="{cls}"  href="#"  aria-selected="{selected}"  aria-disabled="{disabled}">{content}</a>',{cls:A,id:d(b),selected:j,disabled:w,content:b.getDayOfMonth()});B=B+s.substitute('<td role="gridcell" data-index="{index}" title="{title}" class="{cls}">{content}</td>',{cls:p,index:y,title:c.format(b),
content:E});y++}v=v+(B+"</tr>")}this.dateTable=f;return v},_onSetClear:function(a){var k=this.get("value"),f=this.getBaseCssClasses("selected-day"),k=d(k),b=this.$("#"+k);if(a){b.parent().removeClass(f);b.attr("aria-selected",false);this.$el.attr("aria-activedescendant","")}else{b.parent().addClass(f);b.attr("aria-selected",true);this.$el.attr("aria-activedescendant",k)}},_onSetValue:function(a,k){var f=k.prevVal;if(f.getYear()===a.getYear()&&f.getMonth()===a.getMonth()){var b=this.get("disabledDate"),
e=this.getBaseCssClasses("selected-day"),f=this.$("#"+d(f));f.parent().removeClass(e);f.attr("aria-selected",false);if(!b||!b(a,a)){b=this.$("#"+d(a));b.parent().addClass(e);b.attr("aria-selected",true)}}else{e=this.get("tbodyEl");b=this.get("monthSelectContentEl");f=this.get("todayBtnEl");b.html(this.getMonthYearLabel());f.attr("title",this.getTodayTimeLabel());e.html(this.renderDates())}this.$el.attr("aria-activedescendant",d(a))},handleKeyDownInternal:function(h){var k=h.keyCode,h=h.ctrlKey;switch(k){case t.SPACE:this.set("clear",
!this.get("clear"));return true}if(this.get("clear"))switch(k){case t.DOWN:case t.UP:case t.LEFT:case t.RIGHT:h||y.call(this);return true;case t.HOME:y.call(this);b(this);return true;case t.END:y.call(this);p(this);return true;case t.ENTER:this.fire("select",{value:null});return true}switch(k){case t.DOWN:c(this,1);return true;case t.UP:c(this,-1);return true;case t.LEFT:h?g(this,-1):a(this,-1);return true;case t.RIGHT:h?g(this,1):a(this,1);return true;case t.HOME:b(this);return true;case t.END:p(this);
return true;case t.PAGE_DOWN:l(this,1);return true;case t.PAGE_UP:l(this,-1);return true;case t.ENTER:this.fire("select",{value:this.get("value")});return true}}},{xclass:"date-picker",ATTRS:{contentTpl:{value:A},focusable:{value:true},value:{render:1,sync:0,valueFn:function(){var a=new n;a.setTime(s.now());return a}},previousYearBtn:{selector:function(){return"."+this.getBaseCssClass("prev-year-btn")}},nextYearBtn:{selector:function(){return"."+this.getBaseCssClass("next-year-btn")}},previousMonthBtn:{selector:function(){return"."+
this.getBaseCssClass("prev-month-btn")}},monthSelectEl:{selector:function(){return"."+this.getBaseCssClass("month-select")}},monthSelectContentEl:{selector:function(){return"."+this.getBaseCssClass("month-select-content")}},monthPanel:{valueFn:function(){var a=new G({locale:this.get("locale"),render:this.get("el")});a.on("select",x,this);return a}},nextMonthBtn:{selector:function(){return"."+this.getBaseCssClass("next-month-btn")}},clearBtnEl:{selector:function(){return"."+this.getBaseCssClass("clear-btn")}},
tbodyEl:{selector:function(){return"."+this.getBaseCssClass("tbody")}},todayBtnEl:{selector:function(){return"."+this.getBaseCssClass("today-btn")}},dateRender:{},disabledDate:{},locale:{value:H},showToday:{render:1,value:true},showClear:{render:1,value:true},clear:{render:1,value:false},showWeekNumber:{render:1,value:true}}})});
KISSY.add("date/gregorian",["./gregorian/utils","i18n!date","./gregorian/const","./const"],"date/gregorian",["./gregorian/utils","i18n!date","./gregorian/const"],function(s,j){function d(a,k){var f=s.makeArray(arguments);"object"===typeof a?(k=a,a=k.timezoneOffset):3<=f.length&&(a=k=null);this.locale=k=k||g;this.fields=[];this.time=void 0;this.timezoneOffset=a||k.timezoneOffset;this.firstDayOfWeek=k.firstDayOfWeek;this.minimalDaysInFirstWeek=k.minimalDaysInFirstWeek;this.fieldsComputed=!1;3<=arguments.length&&
this.set.apply(this,f)}function q(h){var k=h.fields,f=o(k[a],k[e]);k[i]>f&&h.set(i,f)}function o(a,k){return G(a)?H[k]:n[k]}function b(a,k,f){var b=k+6-B(k+6-a.firstDayOfWeek,7);b-k>=a.minimalDaysInFirstWeek&&(b-=7);return E((f-b)/7)+1}var p=parseInt,l=j("./gregorian/utils"),g=j("i18n!date"),c=j("./gregorian/const");s.mix(d,c);s.mix(d,{Utils:l,isLeapYear:l.isLeapYear,YEAR:1,MONTH:2,DAY_OF_MONTH:3,HOUR_OF_DAY:4,MINUTES:5,SECONDS:6,MILLISECONDS:7,WEEK_OF_YEAR:8,WEEK_OF_MONTH:9,DAY_OF_YEAR:10,DAY_OF_WEEK:11,
DAY_OF_WEEK_IN_MONTH:12,AM:0,PM:1});var a=d.YEAR,e=d.MONTH,i=d.DAY_OF_MONTH,w=d.HOUR_OF_DAY,C=d.MINUTES,u=d.SECONDS,r=d.MILLISECONDS,x=d.DAY_OF_WEEK_IN_MONTH,D=d.DAY_OF_YEAR,y=d.DAY_OF_WEEK,m=d.WEEK_OF_MONTH,A=d.WEEK_OF_YEAR,n=[31,28,31,30,31,30,31,31,30,31,30,31],H=[31,29,31,30,31,30,31,31,30,31,30,31],B=l.mod,G=l.isLeapYear,E=Math.floor,v=[void 0,1,d.JANUARY,1,0,0,0,0,1,void 0,1,d.SUNDAY,1],t=[void 0,292278994,d.DECEMBER,void 0,23,59,59,999,void 0,void 0,void 0,d.SATURDAY,void 0];d.prototype={constructor:d,
isLeapYear:function(){return G(this.getYear())},getLocale:function(){return this.locale},getActualMinimum:function(h){if(void 0!==v[h])return v[h];var k=this.fields;if(h===m)return(new d(k[a],k[e],1)).get(m);throw Error("minimum value not defined!");},getActualMaximum:function(h){if(void 0!==t[h])return t[h];var k,f=this.fields;switch(h){case i:k=o(f[a],f[e]);break;case A:k=(new d(f[a],d.DECEMBER,31)).get(A);1===k&&(k=52);break;case m:k=(new d(f[a],f[e],o(f[a],f[e]))).get(m);break;case D:k=G(f[a])?
366:365;break;case x:k=p((o(f[a],f[e])-1)/7)+1}if(void 0===k)throw Error("maximum value not defined!");return k},isSet:function(a){return void 0!==this.fields[a]},computeFields:function(){var h=this.time,k=6E4*this.timezoneOffset,f=p(k/864E5),k=k%864E5,f=f+p(h/864E5),k=k+h%864E5;if(864E5<=k)k-=864E5,f++;else for(;0>k;)k+=864E5,f--;var f=f+719163,c=l.getGregorianDateFromFixedDate(f),n=c.year,h=this.fields;h[a]=n;h[e]=c.month;h[i]=c.dayOfMonth;h[y]=c.dayOfWeek;0!==k?(h[w]=p(k/36E5),k%=36E5,h[C]=p(k/
6E4),k%=6E4,h[u]=p(k/1E3),h[r]=k%1E3):h[w]=h[C]=h[u]=h[r]=0;var t=l.getFixedDate(n,d.JANUARY,1),k=f-c.dayOfMonth+1;h[D]=f-t+1;h[x]=p((c.dayOfMonth-1)/7)+1;c=b(this,t,f);0===c?(c=t-1,n=t-(G(n-1)?366:365),c=b(this,n,c)):52<=c&&(n=t+(G(n)?366:365),t=n+6-B(n+6-this.firstDayOfWeek,7),t-n>=this.minimalDaysInFirstWeek&&f>=t-7&&(c=1));h[A]=c;h[m]=b(this,k,f);this.fieldsComputed=!0},computeTime:function(){if(!this.isSet(a))throw Error("year must be set for KISSY GregorianCalendar");var h=this.fields,k=h[a],
f=0;this.isSet(w)&&(f+=h[w]);f=60*f+(h[C]||0);f=60*f+(h[u]||0);f=1E3*f+(h[r]||0);h[a]=k;h=0+this.getFixedDate();this.time=f=864E5*(h-719163)+f-6E4*this.timezoneOffset;this.computeFields()},complete:function(){void 0===this.time&&this.computeTime();this.fieldsComputed||this.computeFields()},getFixedDate:function(){var h=this.fields,k=this.firstDayOfWeek,f=h[a],b=d.JANUARY;this.isSet(e)&&(b=h[e],b>d.DECEMBER?(f+=p(b/12),b%=12):b<d.JANUARY&&(f+=E(b/12),b=B(b,12)));var c=l.getFixedDate(f,b,1),r=this.firstDayOfWeek;
this.isSet(y)&&(r=h[y]);this.isSet(e)?this.isSet(i)?c+=h[i]-1:this.isSet(m)?(f=c+6-B(c+6-k,7),f-c>=this.minimalDaysInFirstWeek&&(f-=7),r!==k&&(f=f+6-B(f+6-r,7)),c=f+7*(h[m]-1)):(h=this.isSet(x)?h[x]:1,k=7*h,0>h&&(k=o(f,b)+7*(h+1)),c=c+k-1-B(c+k-1-r,7)):this.isSet(D)?c+=h[D]-1:(f=c+6-B(c+6-k,7),f-c>=this.minimalDaysInFirstWeek&&(f-=7),r!==k&&(f=f+6-B(f+6-r,7)),c=f+7*(h[A]-1));return c},getTime:function(){void 0===this.time&&this.computeTime();return this.time},setTime:function(a){this.time=a;this.fieldsComputed=
!1;this.complete()},get:function(a){this.complete();return this.fields[a]},set:function(h,b){var f=arguments.length;if(2===f)this.fields[h]=b;else if(f<r+1)for(var c=0;c<f;c++)this.fields[a+c]=arguments[c];else throw Error("illegal arguments for KISSY GregorianCalendar set");this.time=void 0},add:function(h,b){if(b){var f=this.fields,c=this.get(h);if(h===a)this.set(a,c+b),q(this);else if(h===e){var c=c+b,n=E(c/12),c=B(c,12);n&&this.set(a,f[a]+n);this.set(e,c);q(this)}else{switch(h){case w:b*=36E5;
break;case C:b*=6E4;break;case u:b*=1E3;break;case r:break;case m:case A:case x:b*=6048E5;break;case y:case D:case i:b*=864E5;break;default:throw Error("illegal field for add");}this.setTime(this.time+b)}}},getRolledValue:function(a,b,f,c){c=c-f+1;return f+(a-f+b%c+c)%c},roll:function(a,b){if(b){var f=this.get(a),c=this.getActualMinimum(a),r=this.getActualMaximum(a),f=this.getRolledValue(f,b,c,r);this.set(a,f);switch(a){case e:q(this);break;default:this.updateFieldsBySet(a)}}},updateFieldsBySet:function(a){var b=
this.fields;switch(a){case m:b[i]=void 0;break;case D:b[e]=void 0;break;case y:b[i]=void 0;break;case A:b[D]=void 0,b[e]=void 0}},getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(a){this.timezoneOffset!==a&&(this.fieldsComputed=void 0,this.timezoneOffset=a)},setFirstDayOfWeek:function(a){this.firstDayOfWeek!==a&&(this.firstDayOfWeek=a,this.fieldsComputed=!1)},getFirstDayOfWeek:function(){return this.firstDayOfWeek},setMinimalDaysInFirstWeek:function(a){this.minimalDaysInFirstWeek!==
a&&(this.minimalDaysInFirstWeek=a,this.fieldsComputed=!1)},getMinimalDaysInFirstWeek:function(){return this.minimalDaysInFirstWeek},getWeeksInWeekYear:function(){var h=this.getWeekYear();if(h===this.get(a))return this.getActualMaximum(A);var b=this.clone();b.setWeekDate(h,2,this.get(y));return b.getActualMaximum(A)},getWeekYear:function(){var h=this.get(a),b=this.get(A),f=this.get(e);f===d.JANUARY?52<=b&&--h:f===d.DECEMBER&&1===b&&++h;return h},setWeekDate:function(h,b,f){if(f<d.SUNDAY||f>d.SATURDAY)throw Error("invalid dayOfWeek: "+
f);var c=this.fields,r=this.clone();r.clear();r.setTimezoneOffset(0);r.set(a,h);r.set(A,1);r.set(y,this.getFirstDayOfWeek());h=f-this.getFirstDayOfWeek();0>h&&(h+=7);h+=7*(b-1);0!==h?r.add(D,h):r.complete();c[a]=r.get(a);c[e]=r.get(e);c[i]=r.get(i);this.complete()},clone:function(){void 0===this.time&&this.computeTime();var a=new d(this.timezoneOffset,this.locale);a.setTime(this.time);return a},equals:function(a){return this.getTime()===a.getTime()&&this.firstDayOfWeek===a.firstDayOfWeek&&this.timezoneOffset===
a.timezoneOffset&&this.minimalDaysInFirstWeek===a.minimalDaysInFirstWeek},clear:function(a){void 0===a?this.field=[]:this.fields[a]=void 0;this.time=void 0;this.fieldsComputed=!1}};var z=d.prototype;s.each(",Year,Month,DayOfMonth,HourOfDay,Minutes,Seconds,Milliseconds,WeekOfYear,WeekOfMonth,DayOfYear,DayOfWeek,DayOfWeekInMonth".split(","),function(a,b){if(a){z["get"+a]=function(){return this.get(b)};z["isSet"+a]=function(){return this.isSet(b)};z["set"+a]=function(a){return this.set(b,a)};z["add"+
a]=function(a){return this.add(b,a)};z["roll"+a]=function(a){return this.roll(b,a)}}});return d});
KISSY.add("date/gregorian/utils",["./const"],function(s,j){var d=j("./const"),q=[0,31,59,90,120,151,181,212,243,273,304,334],o=[0,31,60,91,121,152,182,213,244,274,305,335],b={};s.mix(b,{isLeapYear:function(b){return 0!==(b&3)?!1:0!==b%100||0===b%400},mod:function(b,a){return b-a*p(b/a)},getFixedDate:function(b,a,e){var i=b-1;return 365*i+p(i/4)-p(i/100)+p(i/400)+(e+(l(b)?o[a]:q[a]))},getGregorianDateFromFixedDate:function(c){var a,e,i,w;e=c-1;a=p(e/146097);i=g(e,146097);e=p(i/36524);w=g(i,36524);
i=p(w/1461);w=g(w,1461);w=p(w/365);a=400*a+100*e+4*i+w;4===e||4===w||++a;i=b.getFixedDate(a,d.JANUARY,1);w=(e=l(a))?o:q;var j=c-i,u,r;for(r=0;r<w.length;r++)if(w[r]<=j)u=r;else break;i=c-i-w[u]+1;c=0<=c?c%7:g(c,7);return{year:a,month:u,dayOfMonth:i,dayOfWeek:c,isLeap:e}}});var p=Math.floor,l=b.isLeapYear,g=b.mod;return b});
KISSY.add("date/gregorian/const",[],function(){return{SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,JANUARY:0,FEBRUARY:1,MARCH:2,APRIL:3,MAY:4,JUNE:5,JULY:6,AUGUST:7,SEPTEMBER:8,OCTOBER:9,NOVEMBER:10,DECEMBER:11}});
KISSY.add("date/picker/month-panel/control","node,component/control,../year-panel/control,date/format,./months-xtpl,./month-panel-xtpl,event/gesture/tap".split(","),function(s,j){function d(a){for(var b=a.get("value"),c=b.getMonth(),r=b.clone(),e=a.get("locale").monthYearFormat,n=b.getLocale(),e=new i(e,n),u=[],n=n.shortMonths,d=0,o=0;o<3;o++){u[o]=[];for(var g=0;g<4;g++){r.setMonth(d);u[o][g]={value:d,content:n[d],title:e.format(r)};d++}}s.mix(a.renderData,{months:u,year:b.getYear(),month:c});return a.months=
u}function q(a,b){var c=a.get("value").clone();c.addYear(b);a.set("value",c)}function o(a){a.preventDefault();q(this,1)}function b(a){a.preventDefault();q(this,-1)}function p(a){a.preventDefault();var a=r(a.currentTarget),b=a.parent(),a=a.index(),b=b.index(),c=this.get("value").clone();c.setMonth(b*4+a);this.fire("select",{value:c})}function l(a){a.preventDefault();a=this.get("yearPanel");a.set("value",this.get("value"));a.show()}function g(a){this.set("value",a.value);this.get("yearPanel").hide()}
var c=j("node"),a=j("component/control"),e=j("../year-panel/control"),i=j("date/format"),w=j("./months-xtpl"),C=j("./month-panel-xtpl"),u=j("event/gesture/tap").TAP,r=c.all;return a.extend({beforeCreateDom:function(a){var b=this.get("locale");s.mix(a,{yearSelectLabel:b.yearSelect,previousYearLabel:b.previousYear,nextYearLabel:b.nextYear});d(this)},bindUI:function(){this.get("nextYearBtn").on(u,o,this);this.get("previousYearBtn").on(u,b,this);this.get("tbodyEl").delegate(u,"."+this.getBaseCssClass("cell"),
p,this);this.get("yearSelectEl").on(u,l,this)},_onSetValue:function(a){d(this);this.get("tbodyEl").html(this.renderTpl(w));this.get("yearSelectContentEl").html(a.getYear())}},{xclass:"date-picker-month-panel",ATTRS:{contentTpl:{value:C},focusable:{value:false},value:{render:1},yearPanel:{valueFn:function(){var a=new e({locale:this.get("locale"),render:this.get("render")});a.on("select",g,this);return a}},tbodyEl:{selector:function(){return"."+this.getBaseCssClass("tbody")}},previousYearBtn:{selector:function(){return"."+
this.getBaseCssClass("prev-year-btn")}},nextYearBtn:{selector:function(){return"."+this.getBaseCssClass("next-year-btn")}},yearSelectEl:{selector:function(){return"."+this.getBaseCssClass("year-select")}},yearSelectContentEl:{selector:function(){return"."+this.getBaseCssClass("year-select-content")}}}})});
KISSY.add("date/picker/year-panel/control","node,component/control,../decade-panel/control,event/gesture/tap,date/format,./years-xtpl,./year-panel-xtpl".split(","),function(s,j){function d(a){for(var b=a.get("value"),c=b.getYear(),c=parseInt(c/10,10)*10-1,e=b.clone(),m=a.get("locale").yearFormat,b=b.getLocale(),b=new C(m,b),m=[],u=0,n=0;n<3;n++){m[n]=[];for(var d=0;d<4;d++){e.setYear(c+u);m[n][d]={content:c+u,title:b.format(e)};u++}}return a.years=m}function q(a,b){var c=a.get("value").clone();c.addYear(b);
a.set("value",c)}function o(a){a.preventDefault();q(this,10)}function b(a){a.preventDefault();q(this,-10)}function p(a){a.preventDefault();var a=w(a.currentTarget),b=a.parent(),a=a.index(),b=b.index(),c=this.get("value").clone();c.setYear(this.years[b][a].content);this.set("value",c);this.fire("select",{value:c})}function l(a){a.preventDefault();a=this.get("decadePanel");a.set("value",this.get("value"));a.show()}function g(a){this.set("value",a.value);this.get("decadePanel").hide()}var c=j("node"),
a=j("component/control"),e=j("../decade-panel/control"),i=j("event/gesture/tap").TAP,w=c.all,C=j("date/format"),u=j("./years-xtpl"),c=j("./year-panel-xtpl");return a.extend({beforeCreateDom:function(a){var b=this.get("value"),c=b.getYear(),c=parseInt(c/10,10)*10,e=c+9,m=this.get("locale");s.mix(a,{decadeSelectLabel:m.decadeSelect,years:d(this),startYear:c,endYear:e,year:b.getYear(),previousDecadeLabel:m.previousDecade,nextDecadeLabel:m.nextDecade})},bindUI:function(){this.get("nextDecadeBtn").on(i,
o,this);this.get("previousDecadeBtn").on(i,b,this);this.get("tbodyEl").delegate(i,"."+this.getBaseCssClass("cell"),p,this);this.get("decadeSelectEl").on(i,l,this)},_onSetValue:function(a){var b=a.getYear(),b=parseInt(b/10,10)*10,c=b+9;s.mix(this.renderData,{startYear:b,endYear:c,years:d(this),year:a.getYear()});this.get("tbodyEl").html(this.renderTpl(u));this.get("decadeSelectContentEl").html(b+"-"+c)}},{xclass:"date-picker-year-panel",ATTRS:{contentTpl:{value:c},focusable:{value:false},value:{render:1},
decadePanel:{valueFn:function(){var a=new e({locale:this.get("locale"),render:this.get("render")});a.on("select",g,this);return a}},tbodyEl:{selector:function(){return"."+this.getBaseCssClass("tbody")}},previousDecadeBtn:{selector:function(){return"."+this.getBaseCssClass("prev-decade-btn")}},nextDecadeBtn:{selector:function(){return"."+this.getBaseCssClass("next-decade-btn")}},decadeSelectEl:{selector:function(){return"."+this.getBaseCssClass("decade-select")}},decadeSelectContentEl:{selector:function(){return"."+
this.getBaseCssClass("decade-select-content")}}}})});
KISSY.add("date/picker/decade-panel/control",["node","event/gesture/tap","component/control","./decade-panel-xtpl","./decades-xtpl"],function(s,j){function d(a,b){for(var c=a.get("value").getYear(),e=100*parseInt(c/100,10),r=e-10,d=[],o=0,g=0;3>g;g++){d[g]=[];for(var m=0;4>m;m++)d[g][m]={startDecade:r+10*o,endDecade:r+10*o+9},o++}a.decades=d;s.mix(b.renderData,{startYear:e,endYear:e+99,year:c,decades:d})}function q(a,b){var c=a.get("value").clone();c.addYear(b);a.set("value",c)}function o(a){a.preventDefault();
q(this,100)}function b(a){a.preventDefault();q(this,-100)}function p(a){a.preventDefault();var a=c(a.currentTarget),b=a.parent(),a=a.index(),b=b.index(),e=this.get("value").clone(),d=e.getYear()%10;e.setYear(this.decades[b][a].startDecade+d);this.set("value",e);this.fire("select",{value:e})}var l=j("node"),g=j("event/gesture/tap").TAP,c=l.all,l=j("component/control"),a=j("./decade-panel-xtpl"),e=j("./decades-xtpl");return l.extend({beforeCreateDom:function(a,b){var c=this.get("locale");d(this,this);
s.mix(a,{previousCenturyLabel:c.previousCentury,nextCenturyLabel:c.nextCentury});s.mix(b,{tbodyEl:"#ks-date-picker-decade-panel-tbody-{id}",previousCenturyBtn:"#ks-date-picker-decade-panel-previous-century-btn-{id}",centuryEl:"#ks-date-picker-decade-panel-century-{id}",nextCenturyBtn:"#ks-date-picker-decade-panel-next-century-btn-{id}"})},bindUI:function(){this.get("nextCenturyBtn").on(g,o,this);this.get("previousCenturyBtn").on(g,b,this);this.get("tbodyEl").delegate(g,"."+this.getBaseCssClass("cell"),
p,this)},_onSetValue:function(){d(this,this);var a=this.renderData.startYear,b=this.renderData.endYear;this.get("tbodyEl").html(this.renderTpl(e));this.get("centuryEl").html(a+"-"+b)}},{xclass:"date-picker-decade-panel",ATTRS:{contentTpl:{value:a},focusable:{value:!1},value:{render:1},tbodyEl:{selector:function(){return"."+this.getBaseCssClass("tbody")}},previousCenturyBtn:{selector:function(){return"."+this.getBaseCssClass("prev-century-btn")}},nextCenturyBtn:{selector:function(){return"."+this.getBaseCssClass("next-century-btn")}},
centuryEl:{selector:function(){return"."+this.getBaseCssClass("century")}}}})});
KISSY.add("date/picker/decade-panel/decade-panel-xtpl",["./decades-xtpl"],function(s,j,d,q){d=function(d,b,p,l){var g=this.nativeCommands,c=this.utils;if("5.0.0"!==s.version)throw Error("current xtemplate file("+this.name+")(v5.0.0) need to be recompiled using current kissy(v"+s.version+")!");c=c.callCommand;g=g.include;b.write('<div class="');var a={escape:1},e=[];e.push("header");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",1))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">\r\n    <a class="');
a={escape:1};e=[];e.push("prev-century-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",2))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('"\r\n       href="#"\r\n       role="button"\r\n       title="');a=d.resolve(["previousCenturyLabel"]);b.write(a,!0);b.write('"\r\n       hidefocus="on">\r\n    </a>\r\n    <div class="');a={escape:1};e=[];e.push("century");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",8))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">\r\n                ');a=d.resolve(["startYear"]);
b.write(a,!0);b.write("-");a=d.resolve(["endYear"]);b.write(a,!0);b.write('\r\n    </div>\r\n    <a class="');a={escape:1};e=[];e.push("next-century-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",11))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('"\r\n       href="#"\r\n       role="button"\r\n       title="');a=d.resolve(["nextCenturyLabel"]);b.write(a,!0);b.write('"\r\n       hidefocus="on">\r\n    </a>\r\n</div>\r\n<div class="');a={escape:1};e=[];e.push("body");a.params=e;if((a=c(this,d,
a,b,"getBaseCssClasses",18))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">\r\n    <table class="');a={escape:1};e=[];e.push("table");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",19))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('" cellspacing="0" role="grid">\r\n        <tbody class="');a={escape:1};e=[];e.push("tbody");a.params=e;if((c=c(this,d,a,b,"getBaseCssClasses",20))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write('">\r\n        ');c={};a=[];a.push("./decades-xtpl");c.params=a;j("./decades-xtpl");
c.params[0]=q.resolve(c.params[0]);if((d=g.call(this,d,c,b,21,p))&&d.isBuffer)b=d,d=l;b.write(d,!1);b.write("\r\n        </tbody>\r\n    </table>\r\n</div>");return b};d.TPL_NAME=q.name;return d});
KISSY.add("date/picker/decade-panel/decades-xtpl",[],function(s,j,d,q){j=function(d,b,p,l){var g=this,c=g.nativeCommands,a=g.utils;if("5.0.0"!==s.version)throw Error("current xtemplate file("+g.name+")(v5.0.0) need to be recompiled using current kissy(v"+s.version+")!");var e=a.callCommand,i=c.each,j=c["if"];b.write("");var c={escape:1},a=[],q=d.resolve(["decades"]);a.push(q);c.params=a;c.fn=function(a,b){b.write('\r\n<tr role="row">\r\n    ');var c={escape:1},d=[],o=a.resolve(["xindex"]),o=a.resolve(["decades",
o]);d.push(o);c.params=d;c.fn=function(a,b){b.write('\r\n    <td role="gridcell"\r\n        class="');var c={escape:1},d=[];d.push("cell");c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",5))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");var c={escape:1},d=[],r=a.resolve(["startDecade"]),u=r,u=a.resolve(["year"]);if(r=u=r<=u)r=a.resolve(["year"]),u=a.resolve(["endDecade"]),r=r<=u;d.push(r);c.params=d;c.fn=function(a,b){b.write("\r\n         ");var c={escape:1},d=[];d.push("selected-cell");
c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",7))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");return b};b=j.call(g,a,c,b,6,p);b.write("\r\n        ");c={escape:1};d=[];r=a.resolve(["startDecade"]);u=a.resolve(["startYear"]);d.push(r<u);c.params=d;c.fn=function(a,b){b.write("\r\n         ");var c={escape:1},d=[];d.push("last-century-cell");c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",10))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");return b};b=j.call(g,a,c,b,9,p);b.write("\r\n        ");
c={escape:1};d=[];r=a.resolve(["endDecade"]);u=a.resolve(["endYear"]);d.push(r>u);c.params=d;c.fn=function(a,b){b.write("\r\n         ");var c={escape:1},d=[];d.push("next-century-cell");c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",13))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");return b};b=j.call(g,a,c,b,12,p);b.write('\r\n        ">\r\n        <a hidefocus="on"\r\n           href="#"\r\n           unselectable="on"\r\n           class="');c={escape:1};d=[];d.push("decade");c.params=
d;if((c=e(g,a,c,b,"getBaseCssClasses",19))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write('">\r\n            ');c=a.resolve(["startDecade"]);b.write(c,!0);b.write("-");c=a.resolve(["endDecade"]);b.write(c,!0);b.write("\r\n        </a>\r\n    </td>\r\n    ");return b};b=i.call(g,a,c,b,3,p);b.write("\r\n</tr>\r\n");return b};return b=i.call(g,d,c,b,1,p)};j.TPL_NAME=q.name;return j});
KISSY.add("date/format","date/gregorian,i18n!date,./gregorian/utils,i18n!date,./gregorian/const,./const".split(","),"date/format",["date/gregorian","i18n!date"],function(s,j){function d(a,b,c){c.push({field:a,count:b})}function q(b,c,e,d){d=d||[];e=e||a;if(b>=0){if(b<100&&c>=1&&c<=2){b<10&&c===2&&d.push(C);d.push(b);return d.join("")}if(b>=1E3&&b<1E4){if(c===4){d.push(b);return d.join("")}if(c===2&&e===2)return q(b%100,2,2,d)}}d.push(b+"");return d.join("")}function o(a,b,e){this.locale=b||c;for(var b=
a.length,g=false,o=[],m=null,l=0,n=-1,p=0;p<b;p++){var j=a.charAt(p);if(j==="'"){if(p+1<b){j=a.charAt(p+1);if(j==="'"){p++;if(l!==0){d(n,l,o);n=-1;l=0}g&&(m=m+j);continue}}if(g){o.push({text:m});g=false}else{if(l!==0){d(n,l,o);n=-1;l=0}m="";g=true}}else if(g)m=m+j;else if(j>="a"&&j<="z"||j>="A"&&j<="Z"){if(i.indexOf(j)===-1)throw Error('Illegal pattern character "'+j+'"');if(n===-1||n===j){n=j;l++}else{d(n,l,o);n=j;l=1}}else{if(l!==0){d(n,l,o);n=-1;l=0}o.push({text:j})}}if(g)throw Error("Unterminated quote");
l!==0&&d(n,l,o);this.pattern=o;this.timezoneOffset=e}function b(b,c,e,d){switch(b){case "G":b=d.getYear()>0?1:0;c=e.eras[b];break;case "y":b=d.getYear();b<=0&&(b=1-b);c=q(b,2,c!==2?a:2);break;case "M":b=d.getMonth();c=c>=4?e.months[b]:c===3?e.shortMonths[b]:q(b+1,c);break;case "k":c=q(d.getHourOfDay()||24,c);break;case "E":b=d.getDayOfWeek();c=c>=4?e.weekdays[b]:e.shortWeekdays[b];break;case "a":c=e.ampms[d.getHourOfDay()>=12?1:0];break;case "h":c=q(d.getHourOfDay()%12||12,c);break;case "K":c=q(d.getHourOfDay()%
12,c);break;case "Z":c=d.getTimezoneOffset();e=[c<0?"-":"+"];c=Math.abs(c);e.push(q(Math.floor(c/60)%100,2),q(c%60,2));c=e.join("");break;default:b=d.get(w[b]);c=q(b,c)}return c}function p(a,b,c){var e=-1,d=-1,m,g=c.length;for(m=0;m<g;m++){var n=c[m],l=n.length,o;if(o=l>e)a:{o=a;for(var i=b,p=l,j=0;j<p;j++)if(o.charAt(i+j)!==n.charAt(j)){o=false;break a}o=true}if(o){e=l;d=m}}return d>=0?{value:d,startIndex:b+e}:null}function l(a,b,c,e){var d=a;if(e){if(a.length<=b+c)return null;d=a.substring(b,c);
if(!d.match(/^\d+$/))return null}else d=d.substring(b);a=parseInt(d,10);if(isNaN(a))b=null;else{for(var m=d.length,c=0;c<m;c++){e=d.charAt(c);if(e<"0"||e>"9")break}b={value:a,startIndex:b+c}}return b}var g=j("date/gregorian"),c=j("i18n!date"),a=Number.MAX_VALUE,e={FULL:0,LONG:1,MEDIUM:2,SHORT:3},i=Array(g.DAY_OF_WEEK_IN_MONTH+2).join("1"),w={},i=i.split("");i[0]="G";i[g.YEAR]="y";i[g.MONTH]="M";i[g.DAY_OF_MONTH]="d";i[g.HOUR_OF_DAY]="H";i[g.MINUTES]="m";i[g.SECONDS]="s";i[g.MILLISECONDS]="S";i[g.WEEK_OF_YEAR]=
"w";i[g.WEEK_OF_MONTH]="W";i[g.DAY_OF_YEAR]="D";i[g.DAY_OF_WEEK_IN_MONTH]="F";s.each(i,function(a,b){w[a]=b});var i=i.join("")+"ahkKZE",C="0";s.augment(o,{format:function(a){var c=a.getTime(),a=new g(this.timezoneOffset,this.locale);a.setTime(c);for(var e=[],d=this.pattern,l=d.length,c=0;c<l;c++){var m=d[c];m.text?e.push(m.text):"field"in m&&e.push(b(m.field,m.count,this.locale,a))}return e.join("")},parse:function(a){var b=new g(this.timezoneOffset,this.locale),c,e,d={},m=false,o=a.length,n=-1,i=
0;e=0;var j=this.pattern,s=j.length;a:for(c=0;n<0&&c<s;c++){var q=j[c],v,t;e=i;if(v=q.text){t=v.length;if(t+i>o)n=i;else{for(e=0;e<t;e++)if(v.charAt(e)!==a.charAt(e+i)){n=i;break a}i=i+t}}else if("field"in q){m=false;if(v=j[c+1])if("field"in v)m=true;else{v=v.text.charAt(0);v>="0"&&v<="9"&&(m=true)}v=b;t=a;var z=q.field,q=q.count,h=this.locale,k=m,f=d,F=m=void 0,F=void 0;if(!(t.length<=i)){switch(z){case "G":if(m=p(t,i,h.eras))if(v.isSetYear()){if(m.value===0){F=v.getYear();v.setYear(1-F)}}else f.era=
m.value;break;case "y":if(m=l(t,i,q,k)){F=m.value;"era"in f&&f.era===0&&(F=1-F);v.setYear(F)}break;case "M":z=void 0;if(q>=3){if(m=p(t,i,h[q===3?"shortMonths":"months"]))z=m.value}else if(m=l(t,i,q,k))z=m.value-1;m&&v.setMonth(z);break;case "k":(m=l(t,i,q,k))&&v.setHourOfDay(m.value%24);break;case "E":(m=p(t,i,h[q>3?"weekdays":"shortWeekdays"]))&&v.setDayOfWeek(m.value);break;case "a":if(m=p(t,i,h.ampms))if(v.isSetHourOfDay()){if(m.value){F=v.getHourOfDay();F<12&&v.setHourOfDay((F+12)%24)}}else f.ampm=
m.value;break;case "h":if(m=l(t,i,q,k)){F=m.value=m.value%12;f.ampm&&(F=F+12);v.setHourOfDay(F)}break;case "K":if(m=l(t,i,q,k)){F=m.value;f.ampm&&(F=F+12);v.setHourOfDay(F)}break;case "Z":z=t.charAt(i);if(z==="-")i++;else if(z==="+")i++;else break;if(m=l(t,i,2,true)){z=m.value*60;i=m.startIndex;if(m=l(t,i,2,true))z=z+m.value;v.setTimezoneOffset(z)}break;default:(m=l(t,i,q,k))&&v.set(w[z],m.value)}if(m)i=m.startIndex}i===e&&(n=i)}}return n>=0?void 0:b}});s.mix(o,{Style:e,getInstance:function(a,b){return this.getDateTimeInstance(e.SHORT,
e.SHORT,a,b)},getDateInstance:function(a,b,c){return this.getDateTimeInstance(a,void 0,b,c)},getDateTimeInstance:function(a,b,e,d){var e=e||c,i="";a!==void 0&&(i=e.datePatterns[a]);a="";b!==void 0&&(a=e.timePatterns[b]);b=i;a&&(b=i?s.substitute(e.dateTimePattern,{date:i,time:a}):a);return new o(b,e,d)},getTimeInstance:function(a,b,c){return this.getDateTimeInstance(void 0,a,b,c)}});return o});
KISSY.add("date/gregorian",["./gregorian/utils","i18n!date","./gregorian/const","./const"],"date/gregorian",["./gregorian/utils","i18n!date","./gregorian/const"],function(s,j){function d(a,b){var c=s.makeArray(arguments);"object"===typeof a?(b=a,a=b.timezoneOffset):3<=c.length&&(a=b=null);this.locale=b=b||g;this.fields=[];this.time=void 0;this.timezoneOffset=a||b.timezoneOffset;this.firstDayOfWeek=b.firstDayOfWeek;this.minimalDaysInFirstWeek=b.minimalDaysInFirstWeek;this.fieldsComputed=!1;3<=arguments.length&&
this.set.apply(this,c)}function q(b){var c=b.fields,f=o(c[a],c[e]);c[i]>f&&b.set(i,f)}function o(a,b){return G(a)?H[b]:n[b]}function b(a,b,c){var e=b+6-B(b+6-a.firstDayOfWeek,7);e-b>=a.minimalDaysInFirstWeek&&(e-=7);return E((c-e)/7)+1}var p=parseInt,l=j("./gregorian/utils"),g=j("i18n!date"),c=j("./gregorian/const");s.mix(d,c);s.mix(d,{Utils:l,isLeapYear:l.isLeapYear,YEAR:1,MONTH:2,DAY_OF_MONTH:3,HOUR_OF_DAY:4,MINUTES:5,SECONDS:6,MILLISECONDS:7,WEEK_OF_YEAR:8,WEEK_OF_MONTH:9,DAY_OF_YEAR:10,DAY_OF_WEEK:11,
DAY_OF_WEEK_IN_MONTH:12,AM:0,PM:1});var a=d.YEAR,e=d.MONTH,i=d.DAY_OF_MONTH,w=d.HOUR_OF_DAY,C=d.MINUTES,u=d.SECONDS,r=d.MILLISECONDS,x=d.DAY_OF_WEEK_IN_MONTH,D=d.DAY_OF_YEAR,y=d.DAY_OF_WEEK,m=d.WEEK_OF_MONTH,A=d.WEEK_OF_YEAR,n=[31,28,31,30,31,30,31,31,30,31,30,31],H=[31,29,31,30,31,30,31,31,30,31,30,31],B=l.mod,G=l.isLeapYear,E=Math.floor,v=[void 0,1,d.JANUARY,1,0,0,0,0,1,void 0,1,d.SUNDAY,1],t=[void 0,292278994,d.DECEMBER,void 0,23,59,59,999,void 0,void 0,void 0,d.SATURDAY,void 0];d.prototype={constructor:d,
isLeapYear:function(){return G(this.getYear())},getLocale:function(){return this.locale},getActualMinimum:function(b){if(void 0!==v[b])return v[b];var c=this.fields;if(b===m)return(new d(c[a],c[e],1)).get(m);throw Error("minimum value not defined!");},getActualMaximum:function(b){if(void 0!==t[b])return t[b];var c,f=this.fields;switch(b){case i:c=o(f[a],f[e]);break;case A:c=(new d(f[a],d.DECEMBER,31)).get(A);1===c&&(c=52);break;case m:c=(new d(f[a],f[e],o(f[a],f[e]))).get(m);break;case D:c=G(f[a])?
366:365;break;case x:c=p((o(f[a],f[e])-1)/7)+1}if(void 0===c)throw Error("maximum value not defined!");return c},isSet:function(a){return void 0!==this.fields[a]},computeFields:function(){var c=this.time,k=6E4*this.timezoneOffset,f=p(k/864E5),k=k%864E5,f=f+p(c/864E5),k=k+c%864E5;if(864E5<=k)k-=864E5,f++;else for(;0>k;)k+=864E5,f--;var f=f+719163,g=l.getGregorianDateFromFixedDate(f),o=g.year,c=this.fields;c[a]=o;c[e]=g.month;c[i]=g.dayOfMonth;c[y]=g.dayOfWeek;0!==k?(c[w]=p(k/36E5),k%=36E5,c[C]=p(k/
6E4),k%=6E4,c[u]=p(k/1E3),c[r]=k%1E3):c[w]=c[C]=c[u]=c[r]=0;var n=l.getFixedDate(o,d.JANUARY,1),k=f-g.dayOfMonth+1;c[D]=f-n+1;c[x]=p((g.dayOfMonth-1)/7)+1;g=b(this,n,f);0===g?(g=n-1,o=n-(G(o-1)?366:365),g=b(this,o,g)):52<=g&&(o=n+(G(o)?366:365),n=o+6-B(o+6-this.firstDayOfWeek,7),n-o>=this.minimalDaysInFirstWeek&&f>=n-7&&(g=1));c[A]=g;c[m]=b(this,k,f);this.fieldsComputed=!0},computeTime:function(){if(!this.isSet(a))throw Error("year must be set for KISSY GregorianCalendar");var b=this.fields,c=b[a],
e=0;this.isSet(w)&&(e+=b[w]);e=60*e+(b[C]||0);e=60*e+(b[u]||0);e=1E3*e+(b[r]||0);b[a]=c;b=0+this.getFixedDate();this.time=e=864E5*(b-719163)+e-6E4*this.timezoneOffset;this.computeFields()},complete:function(){void 0===this.time&&this.computeTime();this.fieldsComputed||this.computeFields()},getFixedDate:function(){var b=this.fields,c=this.firstDayOfWeek,f=b[a],g=d.JANUARY;this.isSet(e)&&(g=b[e],g>d.DECEMBER?(f+=p(g/12),g%=12):g<d.JANUARY&&(f+=E(g/12),g=B(g,12)));var n=l.getFixedDate(f,g,1),j=this.firstDayOfWeek;
this.isSet(y)&&(j=b[y]);this.isSet(e)?this.isSet(i)?n+=b[i]-1:this.isSet(m)?(f=n+6-B(n+6-c,7),f-n>=this.minimalDaysInFirstWeek&&(f-=7),j!==c&&(f=f+6-B(f+6-j,7)),n=f+7*(b[m]-1)):(b=this.isSet(x)?b[x]:1,c=7*b,0>b&&(c=o(f,g)+7*(b+1)),n=n+c-1-B(n+c-1-j,7)):this.isSet(D)?n+=b[D]-1:(f=n+6-B(n+6-c,7),f-n>=this.minimalDaysInFirstWeek&&(f-=7),j!==c&&(f=f+6-B(f+6-j,7)),n=f+7*(b[A]-1));return n},getTime:function(){void 0===this.time&&this.computeTime();return this.time},setTime:function(a){this.time=a;this.fieldsComputed=
!1;this.complete()},get:function(a){this.complete();return this.fields[a]},set:function(b,c){var e=arguments.length;if(2===e)this.fields[b]=c;else if(e<r+1)for(var d=0;d<e;d++)this.fields[a+d]=arguments[d];else throw Error("illegal arguments for KISSY GregorianCalendar set");this.time=void 0},add:function(b,c){if(c){var d=this.fields,g=this.get(b);if(b===a)this.set(a,g+c),q(this);else if(b===e){var g=g+c,n=E(g/12),g=B(g,12);n&&this.set(a,d[a]+n);this.set(e,g);q(this)}else{switch(b){case w:c*=36E5;
break;case C:c*=6E4;break;case u:c*=1E3;break;case r:break;case m:case A:case x:c*=6048E5;break;case y:case D:case i:c*=864E5;break;default:throw Error("illegal field for add");}this.setTime(this.time+c)}}},getRolledValue:function(a,b,c,e){e=e-c+1;return c+(a-c+b%e+e)%e},roll:function(a,b){if(b){var c=this.get(a),d=this.getActualMinimum(a),g=this.getActualMaximum(a),c=this.getRolledValue(c,b,d,g);this.set(a,c);switch(a){case e:q(this);break;default:this.updateFieldsBySet(a)}}},updateFieldsBySet:function(a){var b=
this.fields;switch(a){case m:b[i]=void 0;break;case D:b[e]=void 0;break;case y:b[i]=void 0;break;case A:b[D]=void 0,b[e]=void 0}},getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(a){this.timezoneOffset!==a&&(this.fieldsComputed=void 0,this.timezoneOffset=a)},setFirstDayOfWeek:function(a){this.firstDayOfWeek!==a&&(this.firstDayOfWeek=a,this.fieldsComputed=!1)},getFirstDayOfWeek:function(){return this.firstDayOfWeek},setMinimalDaysInFirstWeek:function(a){this.minimalDaysInFirstWeek!==
a&&(this.minimalDaysInFirstWeek=a,this.fieldsComputed=!1)},getMinimalDaysInFirstWeek:function(){return this.minimalDaysInFirstWeek},getWeeksInWeekYear:function(){var b=this.getWeekYear();if(b===this.get(a))return this.getActualMaximum(A);var c=this.clone();c.setWeekDate(b,2,this.get(y));return c.getActualMaximum(A)},getWeekYear:function(){var b=this.get(a),c=this.get(A),f=this.get(e);f===d.JANUARY?52<=c&&--b:f===d.DECEMBER&&1===c&&++b;return b},setWeekDate:function(b,c,f){if(f<d.SUNDAY||f>d.SATURDAY)throw Error("invalid dayOfWeek: "+
f);var g=this.fields,n=this.clone();n.clear();n.setTimezoneOffset(0);n.set(a,b);n.set(A,1);n.set(y,this.getFirstDayOfWeek());b=f-this.getFirstDayOfWeek();0>b&&(b+=7);b+=7*(c-1);0!==b?n.add(D,b):n.complete();g[a]=n.get(a);g[e]=n.get(e);g[i]=n.get(i);this.complete()},clone:function(){void 0===this.time&&this.computeTime();var a=new d(this.timezoneOffset,this.locale);a.setTime(this.time);return a},equals:function(a){return this.getTime()===a.getTime()&&this.firstDayOfWeek===a.firstDayOfWeek&&this.timezoneOffset===
a.timezoneOffset&&this.minimalDaysInFirstWeek===a.minimalDaysInFirstWeek},clear:function(a){void 0===a?this.field=[]:this.fields[a]=void 0;this.time=void 0;this.fieldsComputed=!1}};var z=d.prototype;s.each(",Year,Month,DayOfMonth,HourOfDay,Minutes,Seconds,Milliseconds,WeekOfYear,WeekOfMonth,DayOfYear,DayOfWeek,DayOfWeekInMonth".split(","),function(a,b){if(a){z["get"+a]=function(){return this.get(b)};z["isSet"+a]=function(){return this.isSet(b)};z["set"+a]=function(a){return this.set(b,a)};z["add"+
a]=function(a){return this.add(b,a)};z["roll"+a]=function(a){return this.roll(b,a)}}});return d});
KISSY.add("date/gregorian/utils",["./const"],function(s,j){var d=j("./const"),q=[0,31,59,90,120,151,181,212,243,273,304,334],o=[0,31,60,91,121,152,182,213,244,274,305,335],b={};s.mix(b,{isLeapYear:function(b){return 0!==(b&3)?!1:0!==b%100||0===b%400},mod:function(b,a){return b-a*p(b/a)},getFixedDate:function(b,a,e){var d=b-1;return 365*d+p(d/4)-p(d/100)+p(d/400)+(e+(l(b)?o[a]:q[a]))},getGregorianDateFromFixedDate:function(c){var a,e,i,j;e=c-1;a=p(e/146097);i=g(e,146097);e=p(i/36524);j=g(i,36524);
i=p(j/1461);j=g(j,1461);j=p(j/365);a=400*a+100*e+4*i+j;4===e||4===j||++a;i=b.getFixedDate(a,d.JANUARY,1);j=(e=l(a))?o:q;var s=c-i,u,r;for(r=0;r<j.length;r++)if(j[r]<=s)u=r;else break;i=c-i-j[u]+1;c=0<=c?c%7:g(c,7);return{year:a,month:u,dayOfMonth:i,dayOfWeek:c,isLeap:e}}});var p=Math.floor,l=b.isLeapYear,g=b.mod;return b});
KISSY.add("date/gregorian/const",[],function(){return{SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,JANUARY:0,FEBRUARY:1,MARCH:2,APRIL:3,MAY:4,JUNE:5,JULY:6,AUGUST:7,SEPTEMBER:8,OCTOBER:9,NOVEMBER:10,DECEMBER:11}});
KISSY.add("date/picker/year-panel/years-xtpl",[],function(s,j,d,q){j=function(d,b,j,l){var g=this,c=g.nativeCommands,a=g.utils;if("5.0.0"!==s.version)throw Error("current xtemplate file("+g.name+")(v5.0.0) need to be recompiled using current kissy(v"+s.version+")!");var e=a.callCommand,i=c.each,q=c["if"];b.write("");var c={escape:1},a=[],C=d.resolve(["years"]);a.push(C);c.params=a;c.fn=function(a,b){b.write('\r\n<tr role="row">\r\n    ');var c={escape:1},d=[],o=a.resolve(["xindex"]),o=a.resolve(["years",
o]);d.push(o);c.params=d;c.fn=function(a,b){b.write('\r\n    <td role="gridcell"\r\n        title="');var c=a.resolve(["title"]);b.write(c,!0);b.write('"\r\n        class="');var c={escape:1},d=[];d.push("cell");c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",6))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");var c={escape:1},d=[],i=a.resolve(["content"]),o=a.resolve(["year"]);d.push(i===o);c.params=d;c.fn=function(a,b){b.write("\r\n         ");var c={escape:1},d=[];d.push("selected-cell");
c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",8))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");return b};b=q.call(g,a,c,b,7,j);b.write("\r\n        ");c={escape:1};d=[];i=a.resolve(["content"]);o=a.resolve(["startYear"]);d.push(i<o);c.params=d;c.fn=function(a,b){b.write("\r\n         ");var c={escape:1},d=[];d.push("last-decade-cell");c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",11))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");return b};b=q.call(g,a,c,b,10,j);b.write("\r\n        ");
c={escape:1};d=[];i=a.resolve(["content"]);o=a.resolve(["endYear"]);d.push(i>o);c.params=d;c.fn=function(a,b){b.write("\r\n         ");var c={escape:1},d=[];d.push("next-decade-cell");c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",14))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");return b};b=q.call(g,a,c,b,13,j);b.write('\r\n        ">\r\n        <a hidefocus="on"\r\n           href="#"\r\n           unselectable="on"\r\n           class="');c={escape:1};d=[];d.push("year");c.params=
d;if((c=e(g,a,c,b,"getBaseCssClasses",20))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write('">\r\n            ');c=a.resolve(["content"]);b.write(c,!0);b.write("\r\n        </a>\r\n    </td>\r\n    ");return b};b=i.call(g,a,c,b,3,j);b.write("\r\n</tr>\r\n");return b};return b=i.call(g,d,c,b,1,j)};j.TPL_NAME=q.name;return j});
KISSY.add("date/picker/year-panel/year-panel-xtpl",["./years-xtpl"],function(s,j,d,q){d=function(d,b,p,l){var g=this.nativeCommands,c=this.utils;if("5.0.0"!==s.version)throw Error("current xtemplate file("+this.name+")(v5.0.0) need to be recompiled using current kissy(v"+s.version+")!");c=c.callCommand;g=g.include;b.write('<div class="');var a={escape:1},e=[];e.push("header");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",1))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">\r\n    <a class="');a=
{escape:1};e=[];e.push("prev-decade-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",2))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('"\r\n       href="#"\r\n       role="button"\r\n       title="');a=d.resolve(["previousDecadeLabel"]);b.write(a,!0);b.write('"\r\n       hidefocus="on">\r\n    </a>\r\n\r\n    <a class="');a={escape:1};e=[];e.push("decade-select");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",9))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('"\r\n       role="button"\r\n       href="#"\r\n       hidefocus="on"\r\n       title="');
a=d.resolve(["decadeSelectLabel"]);b.write(a,!0);b.write('">\r\n            <span class="');a={escape:1};e=[];e.push("decade-select-content");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",14))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">\r\n                ');a=d.resolve(["startYear"]);b.write(a,!0);b.write("-");a=d.resolve(["endYear"]);b.write(a,!0);b.write('\r\n            </span>\r\n        <span class="');a={escape:1};e=[];e.push("decade-select-arrow");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",
17))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">x</span>\r\n    </a>\r\n\r\n    <a class="');a={escape:1};e=[];e.push("next-decade-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",20))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('"\r\n       href="#"\r\n       role="button"\r\n       title="');a=d.resolve(["nextDecadeLabel"]);b.write(a,!0);b.write('"\r\n       hidefocus="on">\r\n    </a>\r\n</div>\r\n<div class="');a={escape:1};e=[];e.push("body");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",
27))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">\r\n    <table class="');a={escape:1};e=[];e.push("table");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",28))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('" cellspacing="0" role="grid">\r\n        <tbody class="');a={escape:1};e=[];e.push("tbody");a.params=e;if((c=c(this,d,a,b,"getBaseCssClasses",29))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write('">\r\n        ');c={};a=[];a.push("./years-xtpl");c.params=a;j("./years-xtpl");c.params[0]=q.resolve(c.params[0]);
if((d=g.call(this,d,c,b,30,p))&&d.isBuffer)b=d,d=l;b.write(d,!1);b.write("\r\n        </tbody>\r\n    </table>\r\n</div>");return b};d.TPL_NAME=q.name;return d});
KISSY.add("date/picker/month-panel/months-xtpl",[],function(s,j,d,q){j=function(d,b,j,l){var g=this,c=g.nativeCommands,a=g.utils;if("5.0.0"!==s.version)throw Error("current xtemplate file("+g.name+")(v5.0.0) need to be recompiled using current kissy(v"+s.version+")!");var e=a.callCommand,i=c.each,q=c["if"];b.write("");var c={escape:1},a=[],C=d.resolve(["months"]);a.push(C);c.params=a;c.fn=function(a,b){b.write('\r\n<tr role="row">\r\n    ');var c={escape:1},d=[],o=a.resolve(["xindex"]),o=a.resolve(["months",
o]);d.push(o);c.params=d;c.fn=function(a,b){b.write('\r\n    <td role="gridcell"\r\n        title="');var c=a.resolve(["title"]);b.write(c,!0);b.write('"\r\n        class="');var c={escape:1},d=[];d.push("cell");c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",6))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");var c={escape:1},d=[],i=a.resolve(["month"]),o=a.resolve(["value"]);d.push(i===o);c.params=d;c.fn=function(a,b){b.write("\r\n        ");var c={escape:1},d=[];d.push("selected-cell");
c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",8))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write("\r\n        ");return b};b=q.call(g,a,c,b,7,j);b.write('\r\n        ">\r\n        <a hidefocus="on"\r\n           href="#"\r\n           unselectable="on"\r\n           class="');c={escape:1};d=[];d.push("month");c.params=d;if((c=e(g,a,c,b,"getBaseCssClasses",14))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write('">\r\n            ');c=a.resolve(["content"]);b.write(c,!0);b.write("\r\n        </a>\r\n    </td>\r\n    ");
return b};b=i.call(g,a,c,b,3,j);b.write("\r\n</tr>\r\n");return b};return b=i.call(g,d,c,b,1,j)};j.TPL_NAME=q.name;return j});
KISSY.add("date/picker/month-panel/month-panel-xtpl",["./months-xtpl"],function(s,j,d,q){d=function(d,b,p,l){var g=this.nativeCommands,c=this.utils;if("5.0.0"!==s.version)throw Error("current xtemplate file("+this.name+")(v5.0.0) need to be recompiled using current kissy(v"+s.version+")!");c=c.callCommand;g=g.include;b.write('<div class="');var a={escape:1},e=[];e.push("header");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",1))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">\r\n    <a class="');
a={escape:1};e=[];e.push("prev-year-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",2))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('"\r\n       href="#"\r\n       role="button"\r\n       title="');a=d.resolve(["previousYearLabel"]);b.write(a,!0);b.write('"\r\n       hidefocus="on">\r\n    </a>\r\n\r\n    <a class="');a={escape:1};e=[];e.push("year-select");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",9))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('"\r\n       role="button"\r\n       href="#"\r\n       hidefocus="on"\r\n       title="');
a=d.resolve(["yearSelectLabel"]);b.write(a,!0);b.write('">\r\n        <span class="');a={escape:1};e=[];e.push("year-select-content");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",14))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">');a=d.resolve(["year"]);b.write(a,!0);b.write('</span>\r\n        <span class="');a={escape:1};e=[];e.push("year-select-arrow");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",15))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">x</span>\r\n    </a>\r\n\r\n    <a class="');
a={escape:1};e=[];e.push("next-year-btn");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",18))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('"\r\n       href="#"\r\n       role="button"\r\n       title="');a=d.resolve(["nextYearLabel"]);b.write(a,!0);b.write('"\r\n       hidefocus="on">\r\n    </a>\r\n</div>\r\n<div class="');a={escape:1};e=[];e.push("body");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",25))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('">\r\n    <table class="');a={escape:1};e=[];
e.push("table");a.params=e;if((a=c(this,d,a,b,"getBaseCssClasses",26))&&a.isBuffer)b=a,a=l;b.write(a,!0);b.write('" cellspacing="0" role="grid">\r\n        <tbody class="');a={escape:1};e=[];e.push("tbody");a.params=e;if((c=c(this,d,a,b,"getBaseCssClasses",27))&&c.isBuffer)b=c,c=l;b.write(c,!0);b.write('">\r\n        ');c={};a=[];a.push("./months-xtpl");c.params=a;j("./months-xtpl");c.params[0]=q.resolve(c.params[0]);if((d=g.call(this,d,c,b,28,p))&&d.isBuffer)b=d,d=l;b.write(d,!1);b.write("\r\n        </tbody>\r\n    </table>\r\n</div>");
return b};d.TPL_NAME=q.name;return d});
