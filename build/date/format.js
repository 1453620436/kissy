/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Apr 21 22:21
*/
KISSY.add("date/format",["date/gregorian","i18n!date"],function(A,F){function h(c,b,n){n.push({field:c,count:b})}function y(c,b,n,j){j=j||[];n=n||e;if(0<=c){if(100>c&&1<=b&&2>=b)return 10>c&&2===b&&j.push(H),j.push(c),j.join("");if(1E3<=c&&1E4>c){if(4===b)return j.push(c),j.join("");if(2===b&&2===n)return y(c%100,2,2,j)}}j.push(c+"");return j.join("")}function B(c,b,n){this.locale=b||x;for(var b=c.length,j=!1,e=[],f=null,i=0,z=-1,k=0;k<b;k++){var m=c.charAt(k);if("'"===m){if(k+1<b&&(m=c.charAt(k+
1),"'"===m)){k++;0!==i&&(h(z,i,e),z=-1,i=0);j&&(f+=m);continue}j?(e.push({text:f}),j=!1):(0!==i&&(h(z,i,e),z=-1,i=0),f="",j=!0)}else if(j)f+=m;else if("a"<=m&&"z">=m||"A"<=m&&"Z">=m){if(-1===l.indexOf(m))throw Error('Illegal pattern character "'+m+'"');-1===z||z===m?(z=m,i++):(h(z,i,e),z=m,i=1)}else 0!==i&&(h(z,i,e),z=-1,i=0),e.push({text:m})}if(j)throw Error("Unterminated quote");0!==i&&h(z,i,e);this.pattern=e;this.timezoneOffset=n}function C(c,b,n,j){switch(c){case "G":c=0<j.getYear()?1:0;b=n.eras[c];
break;case "y":c=j.getYear();0>=c&&(c=1-c);b=y(c,2,2!==b?e:2);break;case "M":c=j.getMonth();b=4<=b?n.months[c]:3===b?n.shortMonths[c]:y(c+1,b);break;case "k":b=y(j.getHourOfDay()||24,b);break;case "E":c=j.getDayOfWeek();b=4<=b?n.weekdays[c]:n.shortWeekdays[c];break;case "a":b=n.ampms[12<=j.getHourOfDay()?1:0];break;case "h":b=y(j.getHourOfDay()%12||12,b);break;case "K":b=y(j.getHourOfDay()%12,b);break;case "Z":b=j.getTimezoneOffset();n=[0>b?"-":"+"];b=Math.abs(b);n.push(y(Math.floor(b/60)%100,2),
y(b%60,2));b=n.join("");break;default:c=j.get(q[c]),b=y(c,b)}return b}function r(c,b,n){var j=-1,e=-1,f,i=n.length;for(f=0;f<i;f++){var l=n[f],h=l.length,m;if(m=h>j)a:{m=c;for(var x=b,q=h,p=0;p<q;p++)if(m.charAt(x+p)!==l.charAt(p)){m=!1;break a}m=!0}m&&(j=h,e=f)}return 0<=e?{value:e,startIndex:b+j}:null}function u(c,b,n,j){var e=c;if(j){if(c.length<=b+n)return null;e=c.substring(b,n);if(!e.match(/^\d+$/))return null}else e=e.substring(b);c=parseInt(e,10);if(isNaN(c))b=null;else{for(var f=e.length,
n=0;n<f&&!(j=e.charAt(n),"0">j||"9"<j);n++);b={value:c,startIndex:b+n}}return b}var t=F("date/gregorian"),x=F("i18n!date"),e=Number.MAX_VALUE,i={FULL:0,LONG:1,MEDIUM:2,SHORT:3},l=Array(t.DAY_OF_WEEK_IN_MONTH+2).join("1"),q={},l=l.split("");l[0]="G";l[t.YEAR]="y";l[t.MONTH]="M";l[t.DAY_OF_MONTH]="d";l[t.HOUR_OF_DAY]="H";l[t.MINUTES]="m";l[t.SECONDS]="s";l[t.MILLISECONDS]="S";l[t.WEEK_OF_YEAR]="w";l[t.WEEK_OF_MONTH]="W";l[t.DAY_OF_YEAR]="D";l[t.DAY_OF_WEEK_IN_MONTH]="F";A.each(l,function(c,b){q[c]=
b});var l=l.join("")+"ahkKZE",H="0";A.augment(B,{format:function(c){var b=c.getTime(),c=new t(this.timezoneOffset,this.locale);c.setTime(b);for(var e=[],j=this.pattern,i=j.length,b=0;b<i;b++){var f=j[b];f.text?e.push(f.text):"field"in f&&e.push(C(f.field,f.count,this.locale,c))}return e.join("")},parse:function(c){var b=new t(this.timezoneOffset,this.locale),e,j,i={},f=!1,l=c.length,h=-1,k=0;j=0;var m=this.pattern,x=m.length;a:for(e=0;0>h&&e<x;e++){var w=m[e],p,s;j=k;if(p=w.text)if(s=p.length,s+k>
l)h=k;else{for(j=0;j<s;j++)if(p.charAt(j)!==c.charAt(j+k)){h=k;break a}k+=s}else if("field"in w){f=!1;if(p=m[e+1])"field"in p?f=!0:(p=p.text.charAt(0),"0"<=p&&"9">=p&&(f=!0));p=b;s=c;var v=w.field,w=w.count,a=this.locale,d=f,g=i,o=f=void 0,o=void 0;if(!(s.length<=k)){switch(v){case "G":if(f=r(s,k,a.eras))p.isSetYear()?0===f.value&&(o=p.getYear(),p.setYear(1-o)):g.era=f.value;break;case "y":if(f=u(s,k,w,d))o=f.value,"era"in g&&0===g.era&&(o=1-o),p.setYear(o);break;case "M":v=void 0;if(3<=w){if(f=r(s,
k,a[3===w?"shortMonths":"months"]))v=f.value}else if(f=u(s,k,w,d))v=f.value-1;f&&p.setMonth(v);break;case "k":(f=u(s,k,w,d))&&p.setHourOfDay(f.value%24);break;case "E":(f=r(s,k,a[3<w?"weekdays":"shortWeekdays"]))&&p.setDayOfWeek(f.value);break;case "a":if(f=r(s,k,a.ampms))p.isSetHourOfDay()?f.value&&(o=p.getHourOfDay(),12>o&&p.setHourOfDay((o+12)%24)):g.ampm=f.value;break;case "h":if(f=u(s,k,w,d))o=f.value%=12,g.ampm&&(o+=12),p.setHourOfDay(o);break;case "K":if(f=u(s,k,w,d))o=f.value,g.ampm&&(o+=
12),p.setHourOfDay(o);break;case "Z":v=s.charAt(k);if("-"===v)k++;else if("+"===v)k++;else break;if(f=u(s,k,2,!0)){v=60*f.value;k=f.startIndex;if(f=u(s,k,2,!0))v+=f.value;p.setTimezoneOffset(v)}break;default:(f=u(s,k,w,d))&&p.set(q[v],f.value)}f&&(k=f.startIndex)}k===j&&(h=k)}}return 0<=h?void 0:b}});A.mix(B,{Style:i,getInstance:function(c,b){return this.getDateTimeInstance(i.SHORT,i.SHORT,c,b)},getDateInstance:function(c,b,e){return this.getDateTimeInstance(c,void 0,b,e)},getDateTimeInstance:function(c,
b,e,j){var e=e||x,i="";void 0!==c&&(i=e.datePatterns[c]);c="";void 0!==b&&(c=e.timePatterns[b]);b=i;c&&(b=i?A.substitute(e.dateTimePattern,{date:i,time:c}):c);return new B(b,e,j)},getTimeInstance:function(e,b,i){return this.getDateTimeInstance(void 0,e,b,i)}});return B});
KISSY.add("date/gregorian",["./gregorian/utils","i18n!date","./gregorian/const","./const"],"date/gregorian",["./gregorian/utils","i18n!date","./gregorian/const"],function(A,F){function h(a,d){var g=A.makeArray(arguments);"object"===typeof a?(d=a,a=d.timezoneOffset):3<=g.length&&(a=d=null);this.locale=d=d||t;this.fields=[];this.time=void 0;this.timezoneOffset=a||d.timezoneOffset;this.firstDayOfWeek=d.firstDayOfWeek;this.minimalDaysInFirstWeek=d.minimalDaysInFirstWeek;this.fieldsComputed=!1;3<=arguments.length&&
this.set.apply(this,g)}function y(a){var d=a.fields,g=B(d[e],d[i]);d[l]>g&&a.set(l,g)}function B(a,d){return I(a)?k[d]:z[d]}function C(a,d,g){var b=d+6-m(d+6-a.firstDayOfWeek,7);b-d>=a.minimalDaysInFirstWeek&&(b-=7);return w((g-b)/7)+1}var r=parseInt,u=F("./gregorian/utils"),t=F("i18n!date"),x=F("./gregorian/const");A.mix(h,x);A.mix(h,{Utils:u,isLeapYear:u.isLeapYear,YEAR:1,MONTH:2,DAY_OF_MONTH:3,HOUR_OF_DAY:4,MINUTES:5,SECONDS:6,MILLISECONDS:7,WEEK_OF_YEAR:8,WEEK_OF_MONTH:9,DAY_OF_YEAR:10,DAY_OF_WEEK:11,
DAY_OF_WEEK_IN_MONTH:12,AM:0,PM:1});var e=h.YEAR,i=h.MONTH,l=h.DAY_OF_MONTH,q=h.HOUR_OF_DAY,H=h.MINUTES,c=h.SECONDS,b=h.MILLISECONDS,n=h.DAY_OF_WEEK_IN_MONTH,j=h.DAY_OF_YEAR,G=h.DAY_OF_WEEK,f=h.WEEK_OF_MONTH,D=h.WEEK_OF_YEAR,z=[31,28,31,30,31,30,31,31,30,31,30,31],k=[31,29,31,30,31,30,31,31,30,31,30,31],m=u.mod,I=u.isLeapYear,w=Math.floor,p=[void 0,1,h.JANUARY,1,0,0,0,0,1,void 0,1,h.SUNDAY,1],s=[void 0,292278994,h.DECEMBER,void 0,23,59,59,999,void 0,void 0,void 0,h.SATURDAY,void 0];h.prototype={constructor:h,
isLeapYear:function(){return I(this.getYear())},getLocale:function(){return this.locale},getActualMinimum:function(a){if(void 0!==p[a])return p[a];var d=this.fields;if(a===f)return(new h(d[e],d[i],1)).get(f);throw Error("minimum value not defined!");},getActualMaximum:function(a){if(void 0!==s[a])return s[a];var d,g=this.fields;switch(a){case l:d=B(g[e],g[i]);break;case D:d=(new h(g[e],h.DECEMBER,31)).get(D);1===d&&(d=52);break;case f:d=(new h(g[e],g[i],B(g[e],g[i]))).get(f);break;case j:d=I(g[e])?
366:365;break;case n:d=r((B(g[e],g[i])-1)/7)+1}if(void 0===d)throw Error("maximum value not defined!");return d},isSet:function(a){return void 0!==this.fields[a]},computeFields:function(){var a=this.time,d=6E4*this.timezoneOffset,g=r(d/864E5),d=d%864E5,g=g+r(a/864E5),d=d+a%864E5;if(864E5<=d)d-=864E5,g++;else for(;0>d;)d+=864E5,g--;var g=g+719163,o=u.getGregorianDateFromFixedDate(g),E=o.year,a=this.fields;a[e]=E;a[i]=o.month;a[l]=o.dayOfMonth;a[G]=o.dayOfWeek;0!==d?(a[q]=r(d/36E5),d%=36E5,a[H]=r(d/
6E4),d%=6E4,a[c]=r(d/1E3),a[b]=d%1E3):a[q]=a[H]=a[c]=a[b]=0;var k=u.getFixedDate(E,h.JANUARY,1),d=g-o.dayOfMonth+1;a[j]=g-k+1;a[n]=r((o.dayOfMonth-1)/7)+1;o=C(this,k,g);0===o?(o=k-1,E=k-(I(E-1)?366:365),o=C(this,E,o)):52<=o&&(E=k+(I(E)?366:365),k=E+6-m(E+6-this.firstDayOfWeek,7),k-E>=this.minimalDaysInFirstWeek&&g>=k-7&&(o=1));a[D]=o;a[f]=C(this,d,g);this.fieldsComputed=!0},computeTime:function(){if(!this.isSet(e))throw Error("year must be set for KISSY GregorianCalendar");var a=this.fields,d=a[e],
g=0;this.isSet(q)&&(g+=a[q]);g=60*g+(a[H]||0);g=60*g+(a[c]||0);g=1E3*g+(a[b]||0);a[e]=d;a=0+this.getFixedDate();this.time=g=864E5*(a-719163)+g-6E4*this.timezoneOffset;this.computeFields()},complete:function(){void 0===this.time&&this.computeTime();this.fieldsComputed||this.computeFields()},getFixedDate:function(){var a=this.fields,d=this.firstDayOfWeek,g=a[e],b=h.JANUARY;this.isSet(i)&&(b=a[i],b>h.DECEMBER?(g+=r(b/12),b%=12):b<h.JANUARY&&(g+=w(b/12),b=m(b,12)));var c=u.getFixedDate(g,b,1),k=this.firstDayOfWeek;
this.isSet(G)&&(k=a[G]);this.isSet(i)?this.isSet(l)?c+=a[l]-1:this.isSet(f)?(g=c+6-m(c+6-d,7),g-c>=this.minimalDaysInFirstWeek&&(g-=7),k!==d&&(g=g+6-m(g+6-k,7)),c=g+7*(a[f]-1)):(a=this.isSet(n)?a[n]:1,d=7*a,0>a&&(d=B(g,b)+7*(a+1)),c=c+d-1-m(c+d-1-k,7)):this.isSet(j)?c+=a[j]-1:(g=c+6-m(c+6-d,7),g-c>=this.minimalDaysInFirstWeek&&(g-=7),k!==d&&(g=g+6-m(g+6-k,7)),c=g+7*(a[D]-1));return c},getTime:function(){void 0===this.time&&this.computeTime();return this.time},setTime:function(a){this.time=a;this.fieldsComputed=
!1;this.complete()},get:function(a){this.complete();return this.fields[a]},set:function(a,d){var g=arguments.length;if(2===g)this.fields[a]=d;else if(g<b+1)for(var c=0;c<g;c++)this.fields[e+c]=arguments[c];else throw Error("illegal arguments for KISSY GregorianCalendar set");this.time=void 0},add:function(a,d){if(d){var g=this.fields,h=this.get(a);if(a===e)this.set(e,h+d),y(this);else if(a===i){var h=h+d,k=w(h/12),h=m(h,12);k&&this.set(e,g[e]+k);this.set(i,h);y(this)}else{switch(a){case q:d*=36E5;
break;case H:d*=6E4;break;case c:d*=1E3;break;case b:break;case f:case D:case n:d*=6048E5;break;case G:case j:case l:d*=864E5;break;default:throw Error("illegal field for add");}this.setTime(this.time+d)}}},getRolledValue:function(a,d,b,c){c=c-b+1;return b+(a-b+d%c+c)%c},roll:function(a,d){if(d){var b=this.get(a),c=this.getActualMinimum(a),e=this.getActualMaximum(a),b=this.getRolledValue(b,d,c,e);this.set(a,b);switch(a){case i:y(this);break;default:this.updateFieldsBySet(a)}}},updateFieldsBySet:function(a){var d=
this.fields;switch(a){case f:d[l]=void 0;break;case j:d[i]=void 0;break;case G:d[l]=void 0;break;case D:d[j]=void 0,d[i]=void 0}},getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(a){this.timezoneOffset!==a&&(this.fieldsComputed=void 0,this.timezoneOffset=a)},setFirstDayOfWeek:function(a){this.firstDayOfWeek!==a&&(this.firstDayOfWeek=a,this.fieldsComputed=!1)},getFirstDayOfWeek:function(){return this.firstDayOfWeek},setMinimalDaysInFirstWeek:function(a){this.minimalDaysInFirstWeek!==
a&&(this.minimalDaysInFirstWeek=a,this.fieldsComputed=!1)},getMinimalDaysInFirstWeek:function(){return this.minimalDaysInFirstWeek},getWeeksInWeekYear:function(){var a=this.getWeekYear();if(a===this.get(e))return this.getActualMaximum(D);var d=this.clone();d.setWeekDate(a,2,this.get(G));return d.getActualMaximum(D)},getWeekYear:function(){var a=this.get(e),d=this.get(D),b=this.get(i);b===h.JANUARY?52<=d&&--a:b===h.DECEMBER&&1===d&&++a;return a},setWeekDate:function(a,d,b){if(b<h.SUNDAY||b>h.SATURDAY)throw Error("invalid dayOfWeek: "+
b);var c=this.fields,f=this.clone();f.clear();f.setTimezoneOffset(0);f.set(e,a);f.set(D,1);f.set(G,this.getFirstDayOfWeek());a=b-this.getFirstDayOfWeek();0>a&&(a+=7);a+=7*(d-1);0!==a?f.add(j,a):f.complete();c[e]=f.get(e);c[i]=f.get(i);c[l]=f.get(l);this.complete()},clone:function(){void 0===this.time&&this.computeTime();var a=new h(this.timezoneOffset,this.locale);a.setTime(this.time);return a},equals:function(a){return this.getTime()===a.getTime()&&this.firstDayOfWeek===a.firstDayOfWeek&&this.timezoneOffset===
a.timezoneOffset&&this.minimalDaysInFirstWeek===a.minimalDaysInFirstWeek},clear:function(a){void 0===a?this.field=[]:this.fields[a]=void 0;this.time=void 0;this.fieldsComputed=!1}};var v=h.prototype;A.each(",Year,Month,DayOfMonth,HourOfDay,Minutes,Seconds,Milliseconds,WeekOfYear,WeekOfMonth,DayOfYear,DayOfWeek,DayOfWeekInMonth".split(","),function(a,b){if(a){v["get"+a]=function(){return this.get(b)};v["isSet"+a]=function(){return this.isSet(b)};v["set"+a]=function(a){return this.set(b,a)};v["add"+
a]=function(a){return this.add(b,a)};v["roll"+a]=function(a){return this.roll(b,a)}}});return h});
KISSY.add("date/gregorian/utils",["./const"],function(A,F){var h=F("./const"),y=[0,31,59,90,120,151,181,212,243,273,304,334],B=[0,31,60,91,121,152,182,213,244,274,305,335],C={};A.mix(C,{isLeapYear:function(h){return 0!==(h&3)?!1:0!==h%100||0===h%400},mod:function(h,e){return h-e*r(h/e)},getFixedDate:function(h,e,i){var l=h-1;return 365*l+r(l/4)-r(l/100)+r(l/400)+(i+(u(h)?B[e]:y[e]))},getGregorianDateFromFixedDate:function(x){var e,i,l,q;i=x-1;e=r(i/146097);l=t(i,146097);i=r(l/36524);q=t(l,36524);
l=r(q/1461);q=t(q,1461);q=r(q/365);e=400*e+100*i+4*l+q;4===i||4===q||++e;l=C.getFixedDate(e,h.JANUARY,1);q=(i=u(e))?B:y;var A=x-l,c,b;for(b=0;b<q.length;b++)if(q[b]<=A)c=b;else break;l=x-l-q[c]+1;x=0<=x?x%7:t(x,7);return{year:e,month:c,dayOfMonth:l,dayOfWeek:x,isLeap:i}}});var r=Math.floor,u=C.isLeapYear,t=C.mod;return C});
KISSY.add("date/gregorian/const",[],function(){return{SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,JANUARY:0,FEBRUARY:1,MARCH:2,APRIL:3,MAY:4,JUNE:5,JULY:6,AUGUST:7,SEPTEMBER:8,OCTOBER:9,NOVEMBER:10,DECEMBER:11}});
