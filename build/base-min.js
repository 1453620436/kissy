/*
Copyright 2013, KISSY v1.41
MIT Licensed
build time: Dec 2 15:11
*/
KISSY.add("base",["attribute"],function(f,q){function i(b,a){return function(d){return function(){a?d.apply(this,arguments):this.callSuper.apply(this,arguments);var c=arguments.callee.__owner__.__extensions__||[];a&&c.reverse();var e=arguments,h;if(h=c&&c.length)for(var g=0;g<h;g++){var f=c[g]&&(!b?c[g]:c[g].prototype[b]);f&&f.apply(this,e||[])}a?this.callSuper.apply(this,arguments):d.apply(this,arguments)}}}function n(b){var a=this.__hooks__,d=this.prototype;if(this.__extensions__.length&&a)for(var c in a)if(!d.hasOwnProperty(c)||
b.hasOwnProperty(c))b[c]=b[c]||o;return r.call(this,b)}function s(b){var a;b.target===this&&(a=this[j+b.type.slice(5).slice(0,-6)],a.call(this,b.newVal,b))}function t(b){var a=b.get("plugins"),d;f.each(a,function(b,e){"function"===typeof b&&(d=b,a[e]=new d)})}function k(b){var a,d=this.get("plugins");if(a=d.length)for(var c=0;c<a;c++)if(d[c][b])d[c][b](this)}var p=q("attribute"),l=f.ucfirst,j="_onSet",o=f.noop,m=p.extend({constructor:function(){this.callSuper.apply(this,arguments);var b=this.get("listeners"),
a;for(a in b)this.on(a,b[a]);this.initializer();t(this);k.call(this,"pluginInitializer");this.bindInternal();this.syncInternal()},initializer:o,__getHook:i,__callPluginsMethod:k,bindInternal:function(){var b=this.getAttrs(),a,d;for(a in b)if(d=j+l(a),this[d])this.on("after"+l(a)+"Change",s)},syncInternal:function(){var b=[],a;a=this.constructor;for(var d=this.getAttrs();a;)b.push(a),a=a.superclass&&a.superclass.constructor;b.reverse();for(a=0;a<b.length;a++){var c=b[a].ATTRS||{},e;for(e in c)if(e in
d){var f,g;(g=this[j+l(e)])&&0!==d[e].sync&&void 0!==(f=this.get(e))&&g.call(this,f)}}},plug:function(b){"function"===typeof b&&(b=new b);b.pluginInitializer&&b.pluginInitializer(this);this.get("plugins").push(b);return this},unplug:function(b){var a=[],d=this,c="string"===typeof b;f.each(d.get("plugins"),function(e){var f=0,g;b&&(c?(g=e.get&&e.get("pluginId")||e.pluginId,g!==b&&(a.push(e),f=1)):e!==b&&(a.push(e),f=1));f||e.pluginDestructor(d)});d.setInternal("plugins",a);return d},getPlugin:function(b){var a=
null;f.each(this.get("plugins"),function(d){if((d.get&&d.get("pluginId")||d.pluginId)===b)return a=d,!1});return a},destructor:f.noop,destroy:function(){this.get("destroyed")||(k.call(this,"pluginDestructor"),this.destructor(),this.set("destroyed",!0),this.fire("destroy"),this.detach())}});f.mix(m,{__hooks__:{initializer:i(),destructor:i("__destructor",!0)},ATTRS:{plugins:{value:[]},destroyed:{value:!1},listeners:{value:[]}},extend:function a(d,c,e){f.isArray(d)||(e=c,c=d,d=[]);e=e||{};c=c||{};c=
p.extend.call(this,c,e);c.__extensions__=d;n.call(c,{});if(d.length){var h={},g={};f.each(d.concat(c),function(a){if(a){f.each(a.ATTRS,function(a,c){var d=h[c]=h[c]||{};f.mix(d,a)});var a=a.prototype,c;for(c in a)a.hasOwnProperty(c)&&(g[c]=a[c])}});c.ATTRS=h;g.constructor=c;f.augment(c,g)}c.extend=e.extend||a;c.addMembers=n;return c}});var r=m.addMembers;return m});
