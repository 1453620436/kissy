/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Feb 25 19:45
*/
KISSY.add("overlay/extension/loading",["node"],function(g,h){function c(){}var e=h("node");c.prototype={loading:function(){this._loadingExtEl||(this._loadingExtEl=(new e('<div class="'+this.get("prefixCls")+'ext-loading" style="position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);"/>')).appendTo(this.$el));this._loadingExtEl.show()},unloading:function(){var d=this._loadingExtEl;d&&d.hide()}};return c});
KISSY.add("overlay/extension/mask",["node"],function(g,h){function c(a,b){var d=a.view.getBaseCssClasses("mask"),d=m('<div  style="width:'+(f?"expression(KISSY.DOM.docWidth())":"100%")+";left:0;top:0;height:"+(f?"expression(KISSY.DOM.docHeight())":"100%")+";position:"+(f?"absolute":"fixed")+';" class="'+d+" "+b+'">'+(f?'<iframe style="position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':
"")+"</div>").prependTo("body");d.unselectable();d.on("mousedown",function(a){a.preventDefault()});return d}function e(){}function d(a,d){var b=a.get("maskNode"),c=a.view.getBaseCssClasses("mask-hidden");d?b.removeClass(c):b.addClass(c)}function a(a,b,c,l){var f=a.effect||j;d(l,c);if(f!==j){var l=a.duration,a=a.easing,i=c?1:0;b.stop(1,1);b.css("display",c?j:"block");b[f+k[f][i]](l,function(){b.css("display","")},a)}}function l(b){var d=this.get("maskNode");if(b=b.newVal){var c=Number(this.$el.css("z-index"));
isNaN(c)||d.css("z-index",c)}a(this.get("mask"),d,b,this)}var b=g.UA,i=h("node"),f=6===b.ie,m=i.all;e.ATTRS={mask:{value:!1},maskNode:{}};var j="none",k={fade:["Out","In"],slide:["Up","Down"]};e.prototype={__renderUI:function(){this.get("mask")&&this.set("maskNode",c(this,this.get("visible")?"":this.view.getBaseCssClasses("mask-hidden")))},__bindUI:function(){var a,b;if(b=this.get("mask")){a=this.get("maskNode");if(b.closeOnClick)a.on(i.Gesture.tap,this.close,this);this.on("afterVisibleChange",l)}},
__destructor:function(){var a;(a=this.get("maskNode"))&&a.remove()}};return e});
KISSY.add("overlay/close-xtpl",[],function(){var g=function(h,c,e){var d=this,a=c.escapeHtml,l=d.utils.callCommand,b=d.nativeCommands["if"],c="",i={},f=[],m=h.resolve(["closable"]);f.push(m);i.params=f;i.fn=function(b){var c;c='\n<a href="javascript:void(\'close\')"\n   id="ks-overlay-close-';var f=b.resolve(["id"]);c+=a(f);c+='"\n   class="';var f={},i=[];i.push("close");f.params=i;f=l(d,b,f,"getBaseCssClasses",4);c+=a(f);c+="\"\n   role='button'>\n    <span class=\"";f={};i=[];i.push("close-x");
f.params=i;b=l(d,b,f,"getBaseCssClasses",6);c+=a(b);return c+'">close</span>\n</a>\n'};c+=b.call(d,h,i,e);return c+"\n"};g.TPL_NAME="E:/code/kissy_git/kissy/kissy/src/overlay/src/overlay/close.xtpl.html";return g});
KISSY.add("overlay/overlay-xtpl",["overlay/close-xtpl","component/extension/content-xtpl"],function(g,h,c,e){g=function(d,a,c){var b,a=this.nativeCommands;"undefined"!==typeof e&&e.kissy&&(b=e);var i=a.include,a="",f={},m=[];m.push("overlay/close-xtpl");f.params=m;b&&(h("overlay/close-xtpl"),f.params[0]=b.resolveByName(f.params[0]));if((f=i.call(this,d,f,c))||0===f)a+=f;a+="\n";f={};m=[];m.push("component/extension/content-xtpl");f.params=m;b&&(h("component/extension/content-xtpl"),f.params[0]=b.resolveByName(f.params[0]));
if((d=i.call(this,d,f,c))||0===d)a+=d;return a};g.TPL_NAME="E:/code/kissy_git/kissy/kissy/src/overlay/src/overlay/overlay.xtpl.html";return g});
KISSY.add("overlay/overlay-render",["component/container","./overlay-xtpl","component/extension/content-render"],function(g,h){var c=h("component/container"),e=h("./overlay-xtpl"),d=h("component/extension/content-render");return c.getDefaultRender().extend([d],{createDom:function(){this.fillChildrenElsBySelectors({closeBtn:"#ks-overlay-close-{id}"})}},{ATTRS:{contentTpl:{value:e}},HTML_PARSER:{closeBtn:function(a){return a.one("."+this.getBaseCssClass("close"))}}})});
KISSY.add("overlay/extension/overlay-effect",[],function(g){function h(a){var b=a.$el.clone(!0);b.css({visibility:"visible",overflow:"hidden"}).addClass(a.get("prefixCls")+"overlay-ghost");return a.__afterCreateEffectGhost(b)}function c(a,b,d){a.__effectGhost&&a.__effectGhost.stop(1,1);var c=a.$el,e=g.all,j=a.get("effect"),k=e(j.target),e=j.duration,k=g.mix(k.offset(),{width:k.width(),height:k.height()}),n=g.mix(c.offset(),{width:c.width(),height:c.height()}),o=h(a),j=j.easing;o.insertAfter(c);b?
(b=k,k=n):b=n;c.css("visibility","hidden");o.css(b);a.__effectGhost=o;o.animate(k,{duration:e,easing:j,complete:function(){a.__effectGhost=null;o.remove();c.css("visibility","");d()}})}function e(d,b,i){var f=d.$el,e=d.get("effect"),h=e.effect||"none",g=e.target;"none"===h&&!g?i():g?c(d,b,i):(d=e.duration,e=e.easing,g=b?1:0,f.stop(1,1),f.css({visibility:"visible",display:b?"none":"block"}),f[h+a[h][g]](d,function(){f.css({display:"block",visibility:""});i()},e))}function d(){}var a={fade:["Out","In"],
slide:["Up","Down"]};d.ATTRS={effect:{value:{effect:"",target:null,duration:0.5,easing:"easeOut"},setter:function(d){var b=d.effect;"string"===typeof b&&!a[b]&&(d.effect="")}}};d.prototype={__afterCreateEffectGhost:function(a){return a},_onSetVisible:function(a){var b=this;e(b,a,function(){b.fire(a?"show":"hide")})}};return d});
KISSY.add("overlay/control","component/container,component/extension/shim,component/extension/align,./extension/loading,./extension/mask,./overlay-render,./extension/overlay-effect".split(","),function(g,h){var c=h("component/container"),e=h("component/extension/shim"),d=h("component/extension/align"),a=h("./extension/loading"),l=h("./extension/mask"),b=h("./overlay-render"),i=h("./extension/overlay-effect"),f={hide:"hide",destroy:"destroy"};return c.extend([e,a,d,l,i],{bindUI:function(){var a=this,
b=a.get("closeBtn");if(b)b.on("click",function(b){a.close();b.preventDefault()})},close:function(){this[f[this.get("closeAction")]||"hide"]();return this}},{ATTRS:{contentEl:{},closable:{value:false,view:1},closeBtn:{view:1},closeAction:{value:"hide"},focusable:{value:false},allowTextSelection:{value:true},handleGestureEvents:{value:false},visible:{value:false},xrender:{value:b}},xclass:"overlay"})});
KISSY.add("overlay/dialog-xtpl",["overlay/close-xtpl"],function(g,h,c,e){g=function(d,a,c){var b,i=a.escapeHtml,a=this.nativeCommands,f=this.utils;"undefined"!==typeof e&&e.kissy&&(b=e);var g=f.callCommand,f=a.each,j=a.include,a="",k={},n=[];n.push("overlay/close-xtpl");k.params=n;b&&(h("overlay/close-xtpl"),k.params[0]=b.resolveByName(k.params[0]));if((b=j.call(this,d,k,c))||0===b)a+=b;a+='\n<div id="ks-content-';b=d.resolve(["id"]);a+=i(b);a+='"\n     class="';b={};j=[];j.push("content");b.params=
j;b=g(this,d,b,"getBaseCssClasses",3);a+=i(b);a+='">\n    <div class="';b={};j=[];j.push("header");b.params=j;b=g(this,d,b,"getBaseCssClasses",4);a+=i(b);a+='"\n         style="\n';b={};j=[];k=d.resolve(["headerStyle"]);j.push(k);b.params=j;b.fn=function(a){var b;b="\n ";var d=a.resolve(["xindex"]);b=b+i(d);b=b+":";a=a.resolve(["this"]);b=b+i(a);return b+";\n"};a+=f.call(this,d,b,c);a+='\n"\n         id="ks-stdmod-header-';b=d.resolve(["id"]);a+=i(b);a+='">';if((b=d.resolve(["headerContent"]))||0===
b)a+=b;a+='</div>\n\n    <div class="';b={};j=[];j.push("body");b.params=j;b=g(this,d,b,"getBaseCssClasses",12);a+=i(b);a+='"\n         style="\n';b={};j=[];k=d.resolve(["bodyStyle"]);j.push(k);b.params=j;b.fn=function(a){var b;b="\n ";var d=a.resolve(["xindex"]);b=b+i(d);b=b+":";a=a.resolve(["this"]);b=b+i(a);return b+";\n"};a+=f.call(this,d,b,c);a+='\n"\n         id="ks-stdmod-body-';b=d.resolve(["id"]);a+=i(b);a+='">';if((b=d.resolve(["bodyContent"]))||0===b)a+=b;a+='</div>\n\n    <div class="';
b={};j=[];j.push("footer");b.params=j;g=g(this,d,b,"getBaseCssClasses",20);a+=i(g);a+='"\n         style="\n';g={};b=[];j=d.resolve(["footerStyle"]);b.push(j);g.params=b;g.fn=function(a){var b;b="\n ";var d=a.resolve(["xindex"]);b=b+i(d);b=b+":";a=a.resolve(["this"]);b=b+i(a);return b+";\n"};a+=f.call(this,d,g,c);a+='\n"\n         id="ks-stdmod-footer-';c=d.resolve(["id"]);a+=i(c);a+='">';if((d=d.resolve(["footerContent"]))||0===d)a+=d;return a+'</div>\n</div>\n<div tabindex="0"></div>'};g.TPL_NAME=
"E:/code/kissy_git/kissy/kissy/src/overlay/src/overlay/dialog.xtpl.html";return g});
KISSY.add("overlay/dialog-render",["./overlay-render","./dialog-xtpl"],function(g,h){var c=h("./overlay-render"),e=h("./dialog-xtpl");return c.extend({beforeCreateDom:function(d){g.mix(d.elAttrs,{role:"dialog","aria-labelledby":"ks-stdmod-header-"+this.control.get("id")})},createDom:function(){this.fillChildrenElsBySelectors({header:"#ks-stdmod-header-{id}",body:"#ks-stdmod-body-{id}",footer:"#ks-stdmod-footer-{id}"})},getChildrenContainerEl:function(){return this.control.get("body")},_onSetBodyStyle:function(d){this.control.get("body").css(d)},
_onSetHeaderStyle:function(d){this.control.get("header").css(d)},_onSetFooterStyle:function(d){this.control.get("footer").css(d)},_onSetBodyContent:function(d){var a;a=this.control.get("body");a.html(d)},_onSetHeaderContent:function(d){var a;a=this.control.get("header");a.html(d)},_onSetFooterContent:function(d){var a;a=this.control.get("footer");a.html(d)}},{ATTRS:{contentTpl:{value:e}},HTML_PARSER:{header:function(d){return d.one("."+this.getBaseCssClass("header"))},body:function(d){return d.one("."+
this.getBaseCssClass("body"))},footer:function(d){return d.one("."+this.getBaseCssClass("footer"))},headerContent:function(d){return d.one("."+this.getBaseCssClass("header")).html()},bodyContent:function(d){return d.one("."+this.getBaseCssClass("body")).html()},footerContent:function(d){return(d=d.one("."+this.getBaseCssClass("footer")))&&d.html()}}})});
KISSY.add("overlay/dialog",["./control","./dialog-render","node"],function(g,h){var c=h("./control"),e=h("./dialog-render"),d=h("node"),c=c.extend({__afterCreateEffectGhost:function(a){var b=this.get("body");a.all("."+this.get("prefixCls")+"stdmod-body").css({height:b.height(),width:b.width()}).html("");return a},handleKeyDownInternal:function(c){if(this.get("escapeToClose")&&c.keyCode===d.KeyCode.ESC){if("select"!==c.target.nodeName.toLowerCase()||c.target.disabled)this.close(),c.halt()}else a:if(c.keyCode===
a){var b=this.$el,e=d.all(c.target),f=b.last();if(e.equals(b)&&c.shiftKey)f[0].focus(),c.halt();else if(e.equals(f)&&!c.shiftKey)this.focus(),c.halt();else if(e.equals(b)||b.contains(e))break a;c.halt()}},_onSetVisible:function(a,b){var c=this.el;if(a)this.__lastActive=c.ownerDocument.activeElement,this.focus(),c.setAttribute("aria-hidden","false");else{c.setAttribute("aria-hidden","true");try{this.__lastActive&&this.__lastActive.focus()}catch(d){}}this.callSuper(a,b)}},{ATTRS:{header:{view:1},body:{view:1},
footer:{view:1},bodyStyle:{value:{},view:1},footerStyle:{value:{},view:1},headerStyle:{value:{},view:1},headerContent:{value:"",view:1},bodyContent:{value:"",view:1},footerContent:{value:"",view:1},closable:{value:!0},xrender:{value:e},focusable:{value:!0},escapeToClose:{value:!0}},xclass:"dialog"}),a=d.KeyCode.TAB;return c});
KISSY.add("overlay/popup",["./control"],function(g,h){return h("./control").extend({initializer:function(){var c=this;c.get("trigger")&&("mouse"===c.get("triggerType")?(c._bindTriggerMouse(),c.on("afterRenderUI",function(){c._bindContainerMouse()})):c._bindTriggerClick())},_bindTriggerMouse:function(){var c=this,e=c.get("trigger"),d;c.__mouseEnterPopup=function(a){c._clearHiddenTimer();d=g.later(function(){c._showing(a);d=void 0},1E3*c.get("mouseDelay"))};e.on("mouseenter",c.__mouseEnterPopup);c._mouseLeavePopup=
function(){d&&(d.cancel(),d=void 0);c._setHiddenTimer()};e.on("mouseleave",c._mouseLeavePopup)},_bindContainerMouse:function(){this.$el.on("mouseleave",this._setHiddenTimer,this).on("mouseenter",this._clearHiddenTimer,this)},_setHiddenTimer:function(){var c=this;c._hiddenTimer=g.later(function(){c._hiding()},1E3*c.get("mouseDelay"))},_clearHiddenTimer:function(){this._hiddenTimer&&(this._hiddenTimer.cancel(),this._hiddenTimer=void 0)},_bindTriggerClick:function(){var c=this;c.__clickPopup=function(e){e.preventDefault();
if(c.get("toggle"))c[c.get("visible")?"_hiding":"_showing"](e);else c._showing(e)};c.get("trigger").on("click",c.__clickPopup)},_showing:function(c){this.set("currentTrigger",g.one(c.target));this.show()},_hiding:function(){this.set("currentTrigger",void 0);this.hide()},destructor:function(){var c=this.$el,e=this.get("trigger");e&&(this.__clickPopup&&e.detach("click",this.__clickPopup),this.__mouseEnterPopup&&e.detach("mouseenter",this.__mouseEnterPopup),this._mouseLeavePopup&&e.detach("mouseleave",
this._mouseLeavePopup));c.detach("mouseleave",this._setHiddenTimer,this).detach("mouseenter",this._clearHiddenTimer,this)}},{ATTRS:{trigger:{setter:function(c){return g.all(c)}},triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:0.1},toggle:{value:!1}},xclass:"popup"})});KISSY.add("overlay",["overlay/control","overlay/dialog","overlay/popup"],function(g,h){var c=h("overlay/control"),e=h("overlay/dialog"),d=h("overlay/popup");c.Dialog=e;g.Dialog=e;c.Popup=d;return g.Overlay=c});
