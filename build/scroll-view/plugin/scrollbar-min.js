/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 24 03:01
*/
KISSY.add("scroll-view/plugin/scrollbar/scrollbar-xtpl",[],function(g,h,j,k){g=function(c,d,b,a,i){a=this.utils;if("1.50"!==d.version)throw Error("current xtemplate file("+this.name+")(v1.50) need to be recompiled using current kissy(v"+d.version+")!");d=a.callCommand;b.write('<div id="ks-scrollbar-arrow-up-');a=c.resolve(["id"]);b.write(a,!0);b.write('"\n        class="');var a={escape:1},e=[],f=c.resolve(["axis"]);e.push(f+"-arrow-up");a.params=e;if((a=d(this,c,a,b,"getBaseCssClasses",2))&&a.isBuffer)b=
a,a=i;b.write(a,!0);b.write('">\n    <a href="javascript:void(\'up\')">up</a>\n</div>\n<div id="ks-scrollbar-arrow-down-');a=c.resolve(["id"]);b.write(a,!0);b.write('"\n        class="');a={escape:1};e=[];f=c.resolve(["axis"]);e.push(f+"-arrow-down");a.params=e;if((a=d(this,c,a,b,"getBaseCssClasses",6))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n    <a href="javascript:void(\'down\')">down</a>\n</div>\n<div id="ks-scrollbar-track-');a=c.resolve(["id"]);b.write(a,!0);b.write('"\n     class="');
a={escape:1};e=[];f=c.resolve(["axis"]);e.push(f+"-track");a.params=e;if((a=d(this,c,a,b,"getBaseCssClasses",10))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n<div id="ks-scrollbar-drag-');a=c.resolve(["id"]);b.write(a,!0);b.write('"\n     class="');a={escape:1};e=[];f=c.resolve(["axis"]);e.push(f+"-drag");a.params=e;if((a=d(this,c,a,b,"getBaseCssClasses",12))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n<div class="');a={escape:1};e=[];f=c.resolve(["axis"]);e.push(f+"-drag-top");a.params=e;if((a=
d(this,c,a,b,"getBaseCssClasses",13))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n</div>\n<div class="');a={escape:1};e=[];f=c.resolve(["axis"]);e.push(f+"-drag-center");a.params=e;if((a=d(this,c,a,b,"getBaseCssClasses",15))&&a.isBuffer)b=a,a=i;b.write(a,!0);b.write('">\n</div>\n<div class="');a={escape:1};e=[];f=c.resolve(["axis"]);e.push(f+"-drag-bottom");a.params=e;if((c=d(this,c,a,b,"getBaseCssClasses",17))&&c.isBuffer)b=c,c=i;b.write(c,!0);b.write('">\n</div>\n</div>\n</div>');return b};g.TPL_NAME=
k.name;return g});
KISSY.add("scroll-view/plugin/scrollbar/render",["component/control","./scrollbar-xtpl"],function(g,h){var j=h("component/control"),k=h("./scrollbar-xtpl"),c=g.Feature,d=c.isTransform3dSupported(),c=c.getCssVendorInfo("transform"),b={beforeCreateDom:function(a,b){a.elCls.push(a.prefixCls+"scrollbar-"+a.axis);g.mix(b,{dragEl:"#ks-scrollbar-drag-{id}",downBtn:"#ks-scrollbar-arrow-down-{id}",upBtn:"#ks-scrollbar-arrow-up-{id}",trackEl:"#ks-scrollbar-track-{id}"})},createDom:function(){var a=this.control;
a.$dragEl=a.get("dragEl");a.$trackEl=a.get("trackEl");a.$downBtn=a.get("downBtn");a.$upBtn=a.get("upBtn");a.dragEl=a.$dragEl[0];a.trackEl=a.$trackEl[0];a.downBtn=a.$downBtn[0];a.upBtn=a.$upBtn[0]},_onSetDragHeight:function(a){this.control.dragEl.style.height=a+"px"},_onSetDragWidth:function(a){this.control.dragEl.style.width=a+"px"},_onSetDragLeft:function(a){this.control.dragEl.style.left=a+"px"},_onSetDragTop:function(a){this.control.dragEl.style.top=a+"px"}};if(c){var a=c.propertyName;b._onSetDragLeft=
function(b){this.control.dragEl.style[a]="translateX("+b+"px) translateY("+this.control.get("dragTop")+"px)"+(d?" translateZ(0)":"")};b._onSetDragTop=function(b){this.control.dragEl.style[a]="translateX("+this.control.get("dragLeft")+"px) translateY("+b+"px)"+(d?" translateZ(0)":"")}}return j.getDefaultRender().extend(b,{ATTRS:{contentTpl:{value:k}}})});
KISSY.add("scroll-view/plugin/scrollbar/control",["node","component/control","./render","event/gesture/drag"],function(g,h){function j(a){a.preventDefault()}function k(a){a.stopPropagation();this.startScroll=this.scrollView.get(this.scrollProperty)}function c(a){var b=this.scrollView,c={};c[this.scrollType]=this.startScroll+("pageX"===this.pageXyProperty?a.deltaX:a.deltaY)/this.trackElSize*this.scrollLength;b.scrollToWithBounds(c)}function d(){var a=this.scrollView,b=this.trackEl,c=this.scrollWHProperty,
e=this.whProperty,d=this.clientWHProperty,f=this.dragWHProperty;a.allowScroll[this.scrollType]?(this.scrollLength=a[c],b=this.trackElSize="width"===e?b.offsetWidth:b.offsetHeight,a=a[d]/this.scrollLength,a*=b,this.set(f,a),this.barSize=a,n(this),this.set("visible",!0)):this.set("visible",!1)}function b(a){this.set("disabled",a.newVal)}function a(){this.hideFn&&o(this)}function i(){var a=this.scrollView;a.allowScroll[this.scrollType]&&(l(this),this.set("visible",!0),this.hideFn&&!a.isScrolling&&o(this),
n(this))}function e(a){function b(){var a={};a[d]=c.get(e)+g*f;c.scrollToWithBounds(a)}a.halt();var c=this.scrollView,e=this.scrollProperty,d=this.scrollType,f=c.getScrollStep()[this.scrollType],a=a.target,g=a===this.downBtn||this.$downBtn.contains(a)?1:-1;clearInterval(this.mouseInterval);this.mouseInterval=setInterval(b,100);b()}function f(a){var b=a.target,c=this.$dragEl;if(!(this.dragEl===b||c.contains(b))){var b=this.scrollType,c=this.scrollView,e=Math.max(0,(a[this.pageXyProperty]-this.$trackEl.offset()[b]-
this.barSize/2)/this.trackElSize),d={};d[b]=e*this.scrollLength;c.scrollToWithBounds(d);a.halt()}}function q(){clearInterval(this.mouseInterval)}function n(a){var b=a.scrollType,c=a.scrollView,e=a.dragLTProperty,d=a.dragWHProperty,f=a.trackElSize,g=a.barSize,i=a.scrollLength,h=c.get(a.scrollProperty),j=c.minScroll[b],b=c.maxScroll[b];h>b?(f*=b/i,a.set(d,g-(h-b)),a.set(e,f+g-a.get(d))):h<j?(f*=j/i,a.set(d,g-(j-h)),a.set(e,f)):(a.set(e,h/i*f),a.set(d,g))}function o(a){l(a);a.hideTimer=setTimeout(a.hideFn,
1E3*a.get("hideDelay"))}function l(a){a.hideTimer&&(clearTimeout(a.hideTimer),a.hideTimer=null)}var r=h("node"),s=h("component/control"),t=h("./render"),p=h("event/gesture/drag"),m=r.Gesture;return s.extend({initializer:function(){var a=this.scrollType="x"===this.get("axis")?"left":"top",b=g.ucfirst(a);this.pageXyProperty="left"===a?"pageX":"pageY";a=this.whProperty="left"===a?"width":"height";a=g.ucfirst(a);this.afterScrollChangeEvent="afterScroll"+b+"Change";this.scrollProperty="scroll"+b;this.dragWHProperty=
"drag"+a;this.dragLTProperty="drag"+b;this.clientWHProperty="client"+a;this.scrollWHProperty="scroll"+a;this.scrollView=this.get("scrollView")},_onSetDisabled:function(a){var b=this,d=a?"detach":"on";b.get("autoHide")||(b.$dragEl[d]("dragstart mousedown",j)[d](p.DRAG_START,k,b)[d](p.DRAG,c,b),g.each([b.$downBtn,b.$upBtn],function(a){a[d](m.start,e,b)[d](m.end,q,b)}),b.$trackEl[d](m.start,f,b))},bindUI:function(){var c=this.scrollView;this.get("autoHide")&&(this.hideFn=g.bind(this.hide,this));c.on(this.afterScrollChangeEvent+
".ks-scrollbar",i,this).on("scrollTouchEnd.ks-scrollbar",a,this).on("afterDisabledChange.ks-scrollbar",b,this).on("reflow.ks-scrollbar",d,this)},syncUI:function(){d.call(this)},destructor:function(){this.scrollView.detach(".ks-scrollbar");l(this)}},{ATTRS:{minLength:{value:20},scrollView:{},axis:{view:1},autoHide:{value:g.UA.ios},visible:{valueFn:function(){return!this.get("autoHide")}},hideDelay:{value:0.1},dragWidth:{setter:function(a){var b=this.get("minLength");return a<b?b:a},view:1},dragHeight:{setter:function(a){var b=
this.get("minLength");return a<b?b:a},view:1},dragLeft:{view:1,value:0},dragTop:{view:1,value:0},dragEl:{},downBtn:{},upBtn:{},trackEl:{},focusable:{value:!1},xrender:{value:t}},xclass:"scrollbar"})});
KISSY.add("scroll-view/plugin/scrollbar",["base","./scrollbar/control"],function(g,h){function j(){var d=this.scrollView,b=this.get("minLength"),a=this.get("autoHideX"),g=this.get("autoHideY"),e;!this.scrollBarX&&d.allowScroll.left&&(e={axis:"x",scrollView:d,elBefore:d.$contentEl},void 0!==b&&(e.minLength=b),void 0!==a&&(e.autoHide=a),this.scrollBarX=(new c(e)).render());!this.scrollBarY&&d.allowScroll.top&&(e={axis:"y",scrollView:d,elBefore:d.$contentEl},void 0!==b&&(e.minLength=b),void 0!==g&&(e.autoHide=
g),this.scrollBarY=(new c(e)).render())}var k=h("base"),c=h("./scrollbar/control");return k.extend({pluginId:this.getName(),pluginBindUI:function(c){this.scrollView=c;c.on("reflow",j,this)},pluginDestructor:function(c){this.scrollBarX&&(this.scrollBarX.destroy(),this.scrollBarX=null);this.scrollBarY&&(this.scrollBarY.destroy(),this.scrollBarY=null);c.detach("reflow",j,this)}},{ATTRS:{minLength:{},autoHideX:{},autoHideY:{}}})});
