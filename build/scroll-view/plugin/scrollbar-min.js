/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Mar 13 18:02
*/
KISSY.add("scroll-view/plugin/scrollbar/scrollbar-xtpl",[],function(c,i,j,k){c=function(d,f){var a,g=f.escapeHtml,h=this.utils.callCommand;a='<div id="ks-scrollbar-arrow-up-';var b=d.resolve(["id"]);a+=g(b);a+='"\n        class="';var b={},e=[],c=d.resolve(["axis"]);e.push(c+"-arrow-up");b.params=e;b=h(this,d,b,"getBaseCssClasses",2);a+=g(b);a+='">\n    <a href="javascript:void(\'up\')">up</a>\n</div>\n<div id="ks-scrollbar-arrow-down-';b=d.resolve(["id"]);a+=g(b);a+='"\n        class="';b={};e=[];
c=d.resolve(["axis"]);e.push(c+"-arrow-down");b.params=e;b=h(this,d,b,"getBaseCssClasses",6);a+=g(b);a+='">\n    <a href="javascript:void(\'down\')">down</a>\n</div>\n<div id="ks-scrollbar-track-';b=d.resolve(["id"]);a+=g(b);a+='"\n     class="';b={};e=[];c=d.resolve(["axis"]);e.push(c+"-track");b.params=e;b=h(this,d,b,"getBaseCssClasses",10);a+=g(b);a+='">\n<div id="ks-scrollbar-drag-';b=d.resolve(["id"]);a+=g(b);a+='"\n     class="';b={};e=[];c=d.resolve(["axis"]);e.push(c+"-drag");b.params=e;b=
h(this,d,b,"getBaseCssClasses",12);a+=g(b);a+='">\n<div class="';b={};e=[];c=d.resolve(["axis"]);e.push(c+"-drag-top");b.params=e;b=h(this,d,b,"getBaseCssClasses",13);a+=g(b);a+='">\n</div>\n<div class="';b={};e=[];c=d.resolve(["axis"]);e.push(c+"-drag-center");b.params=e;b=h(this,d,b,"getBaseCssClasses",15);a+=g(b);a+='">\n</div>\n<div class="';b={};e=[];c=d.resolve(["axis"]);e.push(c+"-drag-bottom");b.params=e;h=h(this,d,b,"getBaseCssClasses",17);a+=g(h);return a+'">\n</div>\n</div>\n</div>'};c.TPL_NAME=
k.name;return c});
KISSY.add("scroll-view/plugin/scrollbar/render",["component/control","./scrollbar-xtpl"],function(c,i){var j=i("component/control"),k=i("./scrollbar-xtpl"),d=c.Feature.isTransform3dSupported(),f={beforeCreateDom:function(a,d){a.elCls.push(a.prefixCls+"scrollbar-"+a.axis);c.mix(d,{dragEl:"#ks-scrollbar-drag-{id}",downBtn:"#ks-scrollbar-arrow-down-{id}",upBtn:"#ks-scrollbar-arrow-up-{id}",trackEl:"#ks-scrollbar-track-{id}"})},createDom:function(){var a=this.control;a.$dragEl=a.get("dragEl");a.$trackEl=
a.get("trackEl");a.$downBtn=a.get("downBtn");a.$upBtn=a.get("upBtn");a.dragEl=a.$dragEl[0];a.trackEl=a.$trackEl[0];a.downBtn=a.$downBtn[0];a.upBtn=a.$upBtn[0]},_onSetDragHeight:function(a){this.control.dragEl.style.height=a+"px"},_onSetDragWidth:function(a){this.control.dragEl.style.width=a+"px"},_onSetDragLeft:function(a){this.control.dragEl.style.left=a+"px"},_onSetDragTop:function(a){this.control.dragEl.style.top=a+"px"}};if(!1!==c.Feature.getVendorCssPropPrefix("transform")){var a=c.Feature.getVendorCssPropName("transform");
f._onSetDragLeft=function(c){this.control.dragEl.style[a]="translateX("+c+"px) translateY("+this.control.get("dragTop")+"px)"+(d?" translateZ(0)":"")};f._onSetDragTop=function(c){this.control.dragEl.style[a]="translateX("+this.control.get("dragLeft")+"px) translateY("+c+"px)"+(d?" translateZ(0)":"")}}return j.getDefaultRender().extend(f,{ATTRS:{contentTpl:{value:k}}})});
KISSY.add("scroll-view/plugin/scrollbar/control",["node","component/control","./render","event/gesture/drag"],function(c,i){function j(a){a.preventDefault()}function k(a){a.stopPropagation();this.startScroll=this.scrollView.get(this.scrollProperty)}function d(a){var b=this.scrollView,c={};c[this.scrollType]=this.startScroll+("pageX"===this.pageXyProperty?a.deltaX:a.deltaY)/this.trackElSize*this.scrollLength;b.scrollToWithBounds(c)}function f(){var a=this.scrollView,b=this.trackEl,c=this.scrollWHProperty,
d=this.whProperty,e=this.clientWHProperty,f=this.dragWHProperty;a.allowScroll[this.scrollType]?(this.scrollLength=a[c],b=this.trackElSize="width"===d?b.offsetWidth:b.offsetHeight,a=a[e]/this.scrollLength,a*=b,this.set(f,a),this.barSize=a,n(this),this.set("visible",!0)):this.set("visible",!1)}function a(a){this.set("disabled",a.newVal)}function g(){this.hideFn&&o(this)}function h(){var a=this.scrollView;a.allowScroll[this.scrollType]&&(l(this),this.set("visible",!0),this.hideFn&&!a.isScrolling&&o(this),
n(this))}function b(a){function b(){var a={};a[e]=c.get(d)+g*f;c.scrollToWithBounds(a)}a.halt();var c=this.scrollView,d=this.scrollProperty,e=this.scrollType,f=c.getScrollStep()[this.scrollType],a=a.target,g=a===this.downBtn||this.$downBtn.contains(a)?1:-1;clearInterval(this.mouseInterval);this.mouseInterval=setInterval(b,100);b()}function e(a){var b=a.target,c=this.$dragEl;if(!(this.dragEl===b||c.contains(b))){var b=this.scrollType,c=this.scrollView,d=Math.max(0,(a[this.pageXyProperty]-this.$trackEl.offset()[b]-
this.barSize/2)/this.trackElSize),e={};e[b]=d*this.scrollLength;c.scrollToWithBounds(e);a.halt()}}function q(){clearInterval(this.mouseInterval)}function n(a){var b=a.scrollType,c=a.scrollView,d=a.dragLTProperty,e=a.dragWHProperty,f=a.trackElSize,g=a.barSize,h=a.scrollLength,i=c.get(a.scrollProperty),j=c.minScroll[b],b=c.maxScroll[b];i>b?(f*=b/h,a.set(e,g-(i-b)),a.set(d,f+g-a.get(e))):i<j?(f*=j/h,a.set(e,g-(j-i)),a.set(d,f)):(a.set(d,i/h*f),a.set(e,g))}function o(a){l(a);a.hideTimer=setTimeout(a.hideFn,
1E3*a.get("hideDelay"))}function l(a){a.hideTimer&&(clearTimeout(a.hideTimer),a.hideTimer=null)}var r=i("node"),s=i("component/control"),t=i("./render"),p=i("event/gesture/drag"),m=r.Gesture;return s.extend({initializer:function(){var a=this.scrollType="x"===this.get("axis")?"left":"top",b=c.ucfirst(a);this.pageXyProperty="left"===a?"pageX":"pageY";a=this.whProperty="left"===a?"width":"height";a=c.ucfirst(a);this.afterScrollChangeEvent="afterScroll"+b+"Change";this.scrollProperty="scroll"+b;this.dragWHProperty=
"drag"+a;this.dragLTProperty="drag"+b;this.clientWHProperty="client"+a;this.scrollWHProperty="scroll"+a;this.scrollView=this.get("scrollView")},_onSetDisabled:function(a){var f=this,g=a?"detach":"on";f.get("autoHide")||(f.$dragEl[g]("dragstart mousedown",j)[g](p.DRAG_START,k,f)[g](p.DRAG,d,f),c.each([f.$downBtn,f.$upBtn],function(a){a[g](m.start,b,f)[g](m.end,q,f)}),f.$trackEl[g](m.start,e,f))},bindUI:function(){var b=this.scrollView;this.get("autoHide")&&(this.hideFn=c.bind(this.hide,this));b.on(this.afterScrollChangeEvent+
".ks-scrollbar",h,this).on("scrollTouchEnd.ks-scrollbar",g,this).on("afterDisabledChange.ks-scrollbar",a,this).on("reflow.ks-scrollbar",f,this)},syncUI:function(){f.call(this)},destructor:function(){this.scrollView.detach(".ks-scrollbar");l(this)}},{ATTRS:{minLength:{value:20},scrollView:{},axis:{view:1},autoHide:{value:c.UA.ios},visible:{valueFn:function(){return!this.get("autoHide")}},hideDelay:{value:0.1},dragWidth:{setter:function(a){var b=this.get("minLength");return a<b?b:a},view:1},dragHeight:{setter:function(a){var b=
this.get("minLength");return a<b?b:a},view:1},dragLeft:{view:1,value:0},dragTop:{view:1,value:0},dragEl:{},downBtn:{},upBtn:{},trackEl:{},focusable:{value:!1},xrender:{value:t}},xclass:"scrollbar"})});
KISSY.add("scroll-view/plugin/scrollbar",["base","./scrollbar/control"],function(c,i){function j(){var c=this.scrollView,a=this.get("minLength"),g=this.get("autoHideX"),h=this.get("autoHideY"),b;!this.scrollBarX&&c.allowScroll.left&&(b={axis:"x",scrollView:c,elBefore:c.$contentEl},void 0!==a&&(b.minLength=a),void 0!==g&&(b.autoHide=g),this.scrollBarX=(new d(b)).render());!this.scrollBarY&&c.allowScroll.top&&(b={axis:"y",scrollView:c,elBefore:c.$contentEl},void 0!==a&&(b.minLength=a),void 0!==h&&(b.autoHide=
h),this.scrollBarY=(new d(b)).render())}var k=i("base"),d=i("./scrollbar/control");return k.extend({pluginId:this.getName(),pluginBindUI:function(c){this.scrollView=c;c.on("reflow",j,this)},pluginDestructor:function(c){this.scrollBarX&&(this.scrollBarX.destroy(),this.scrollBarX=null);this.scrollBarY&&(this.scrollBarY.destroy(),this.scrollBarY=null);c.detach("reflow",j,this)}},{ATTRS:{minLength:{},autoHideX:{},autoHideY:{}}})});
