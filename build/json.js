/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Jun 9 10:07
*/
KISSY.add("json",["./json/stringify","./json/parse"],function(p,g){var i=g("./json/stringify"),j=g("./json/parse");p.JSON={stringify:i,parse:j};return p.JSON});
KISSY.add("json/stringify",["./quote","util"],function(p,g){function i(c){return 10>c?"0"+c:c}function j(c,b,a,f,h,t,l){var e=b[c];if(e&&"object"===typeof e)if("function"===typeof e.toJSON)e=e.toJSON(c);else if(e instanceof Date)e=isFinite(e.valueOf())?e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"Z":null;else if(e instanceof String||e instanceof Number||e instanceof Boolean)e=e.valueOf();void 0!==a&&(e=
a.call(b,c,e));switch(typeof e){case "number":return isFinite(e)?""+e:"null";case "string":return m.quote(e);case "boolean":return""+e;case "object":if(e)if(d.isArray(e)){for(var c=e,b=l,l=l+h,e=[],s=c.length,g=0;g<s;){var k=j(""+g,c,a,f,h,t,l);e[e.length]=void 0===k?"null":k;++g}e.length?h?(a=e.join("\n,"+l),a="[\n"+l+a+"\n"+b+"]"):a="["+e.join(",")+"]":a="[]"}else{for(var c=e,b=l,l=l+h,o,e=void 0!==f?f:d.keys(c),k=[],g=0,s=e.length;g<s;g++){o=e[g];var n=j(o,c,a,f,h,t,l);void 0!==n&&(o=m.quote(o),
o+=":",h&&(o+=" "),o+=n,k[k.length]=o)}k.length?h?(a=k.join(",\n"+l),a="{\n"+l+a+"\n"+b+"}"):a="{"+k.join(",")+"}":a="{}"}else a="null";return a}}var m=g("./quote"),d=g("util");return function(c,b,a){var f="",h,g;b&&("function"===typeof b?g=b:d.isArray(b)&&(h=b));"number"===typeof a?(a=Math.min(10,a),f=Array(a+1).join(" ")):"string"===typeof a&&(f=a.slice(0,10));return j("",{"":c},g,h,f,[],"")}});
KISSY.add("json/quote",["util"],function(p,g){var i={"":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},j={},m=/["\b\f\n\r\t\x00-\x1f]/g,d=/\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;g("util").each(i,function(c,b){j[c]=b});j["\\/"]="/";return{quote:function(c){return'"'+c.replace(m,function(b){var a;if(!(a=i[b]))a="\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4);return a})+'"'},unQuote:function(c){return c.slice(1,c.length-1).replace(d,function(b){var a;if(!(a=j[b]))a=String.fromCharCode(parseInt(b.slice(2),
16));return a})}}});KISSY.add("json/parse",["./parser","./quote","util"],function(p,g){function i(c,b,a){var f=c[b],h,g,l;if("object"===typeof f)if(d.isArray(f)){h=0;g=f.length;for(var e=[];h<g;)l=i(f,""+h,a),void 0!==l&&(e[e.length]=l);f=e}else{e=d.keys(f);h=0;for(g=e.length;h<g;h++){var j=e[h];l=i(f,j,a);void 0===l?delete f[j]:f[j]=l}}return a.call(c,b,f)}var j=g("./parser"),m=g("./quote"),d=g("util");j.yy={unQuote:m.unQuote};return function(c,b){var a=j.parse(""+c);return b?i({"":a},"",b):a}});
KISSY.add("json/parser",[],function(){function p(d,c){for(var b in c)d[b]=c[b]}function g(d,c,b){if(d){var a,f,h=0,b=b||null;if("[object Array]"===Object.prototype.toString.call(d)){f=d.length;for(a=d[0];h<f&&!1!==c.call(b,a,h,d);a=d[++h]);}else for(a in d)if(!1===c.call(b,d[a],a,d))break}}var i={},j=function(d){this.rules=[];p(this,d);this.resetInput(this.input)};j.prototype={resetInput:function(d){p(this,{input:d,matched:"",stateStack:[j.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,
lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var d=this.stateStack[this.stateStack.length-1],c=[];this.mapState&&(d=this.mapState(d));g(this.rules,function(b){var a=b.state||b[3];if(a){a:{for(var f=0,h=a.length;f<h;f++)if(a[f]===d){a=!0;break a}a=!1}a&&c.push(b)}else d===j.STATIC.INITIAL&&c.push(b)});return c},pushState:function(d){this.stateStack.push(d)},popState:function(d){for(var d=d||1,c;d--;)c=this.stateStack.pop();return c},showDebugInfo:function(){var d=j.STATIC.DEBUG_CONTEXT_LIMIT,
c=this.matched,b=this.match,a=this.input,c=c.slice(0,c.length-b.length),c=(c.length>d?"...":"")+c.slice(0-d).replace(/\n/," "),b=b+a,b=b.slice(0,d)+(b.length>d?"...":"");return c+b+"\n"+Array(c.length+1).join("-")+"^"},mapSymbol:function(d){return this.symbolMap[d]},mapReverseSymbol:function(d){var c=this.symbolMap,b,a=this.reverseSymbolMap;if(!a&&c)for(b in a=this.reverseSymbolMap={},c)a[c[b]]=b;return a?a[d]:d},lex:function(){var d=this.input,c,b,a,f=this.getCurrentRules();this.match=this.text=
"";if(!d)return this.mapSymbol(j.STATIC.END_TAG);for(c=0;c<f.length;c++){b=f[c];var h=b.token||b[0];a=b.action||b[2]||void 0;if(b=d.match(b.regexp||b[1])){if(c=b[0].match(/\n.*/g))this.lineNumber+=c.length;p(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:c?c[c.length-1].length-1:this.lastColumn+b[0].length});c=this.match=b[0];this.matches=b;this.text=c;this.matched+=c;a=a&&a.call(this);a=void 0===a?h:this.mapSymbol(a);this.input=d=d.slice(c.length);
return a?a:this.lex()}}}};j.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var m=new j({rules:[["b",/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],["c",/^,/,0],["d",/^:/,0],["e",/^\[/,0],["f",/^\]/,0],["g",/^\{/,0],["h",/^\}/,0],["i",/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],["j",/^true|false/,0],["k",/^null/,0],["l",/^./,0]]});i.lexer=m;m.symbolMap={$EOF:"a",STRING:"b",COMMA:"c",COLON:"d",LEFT_BRACKET:"e",RIGHT_BRACKET:"f",LEFT_BRACE:"g",
RIGHT_BRACE:"h",NUMBER:"i",BOOLEAN:"j",NULL:"k",INVALID:"l",$START:"m",json:"n",value:"o",object:"p",array:"q",elementList:"r",member:"s",memberList:"t"};i.productions=[["m",["n"]],["n",["o"],function(){return this.$1}],["o",["b"],function(){return this.yy.unQuote(this.$1)}],["o",["i"],function(){return parseFloat(this.$1)}],["o",["p"],function(){return this.$1}],["o",["q"],function(){return this.$1}],["o",["j"],function(){return"true"===this.$1}],["o",["k"],function(){return null}],["r",["o"],function(){return[this.$1]}],
["r",["r","c","o"],function(){this.$1[this.$1.length]=this.$3;return this.$1}],["q",["e","f"],function(){return[]}],["q",["e","r","f"],function(){return this.$2}],["s",["b","d","o"],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],["t",["s"],function(){var d={};d[this.$1.key]=this.$1.value;return d}],["t",["t","c","s"],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],["p",["g","h"],function(){return{}}],["p",["g","t","h"],function(){return this.$2}]];i.table={gotos:{"0":{n:7,
o:8,q:9,p:10},2:{o:12,r:13,q:9,p:10},3:{s:16,t:17},18:{o:23,q:9,p:10},20:{o:24,q:9,p:10},21:{s:25}},action:{"0":{b:[1,void 0,1],e:[1,void 0,2],g:[1,void 0,3],i:[1,void 0,4],j:[1,void 0,5],k:[1,void 0,6]},1:{a:[2,2],f:[2,2],c:[2,2],h:[2,2]},2:{b:[1,void 0,1],e:[1,void 0,2],f:[1,void 0,11],g:[1,void 0,3],i:[1,void 0,4],j:[1,void 0,5],k:[1,void 0,6]},3:{b:[1,void 0,14],h:[1,void 0,15]},4:{a:[2,3],f:[2,3],c:[2,3],h:[2,3]},5:{a:[2,6],f:[2,6],c:[2,6],h:[2,6]},6:{a:[2,7],f:[2,7],c:[2,7],h:[2,7]},7:{a:[0]},
8:{a:[2,1]},9:{a:[2,5],f:[2,5],c:[2,5],h:[2,5]},10:{a:[2,4],f:[2,4],c:[2,4],h:[2,4]},11:{a:[2,10],f:[2,10],c:[2,10],h:[2,10]},12:{f:[2,8],c:[2,8]},13:{c:[1,void 0,18],f:[1,void 0,19]},14:{d:[1,void 0,20]},15:{a:[2,15],f:[2,15],c:[2,15],h:[2,15]},16:{h:[2,13],c:[2,13]},17:{c:[1,void 0,21],h:[1,void 0,22]},18:{b:[1,void 0,1],e:[1,void 0,2],g:[1,void 0,3],i:[1,void 0,4],j:[1,void 0,5],k:[1,void 0,6]},19:{a:[2,11],f:[2,11],c:[2,11],h:[2,11]},20:{b:[1,void 0,1],e:[1,void 0,2],g:[1,void 0,3],i:[1,void 0,
4],j:[1,void 0,5],k:[1,void 0,6]},21:{b:[1,void 0,14]},22:{a:[2,16],f:[2,16],c:[2,16],h:[2,16]},23:{f:[2,9],c:[2,9]},24:{h:[2,12],c:[2,12]},25:{h:[2,14],c:[2,14]}}};i.parse=function(d,c){var b=this.lexer,a,f,h,g=this.table,j=g.gotos,g=g.action,e=this.productions,i=[null],p=c?"in file: "+c+" ":"",k=[0];for(b.resetInput(d);;){a=k[k.length-1];f||(f=b.lex());h=f?g[a]&&g[a][f]:null;if(!h){f=[];if(g[a])for(var o in g[a])f.push(this.lexer.mapReverseSymbol(o));b=p+"syntax error at line "+b.lineNumber+":\n"+
b.showDebugInfo()+"\nexpect "+f.join(", ");throw Error(b);}switch(h[0]){case 1:k.push(f);i.push(b.text);k.push(h[2]);f=null;break;case 2:var n=e[h[1]];a=n.symbol||n[0];h=n.action||n[2];var m=(n.rhs||n[1]).length,q=0,r,n=i[i.length-m];r=void 0;for(this.$$=n;q<m;q++)this["$"+(m-q)]=i[i.length-1-q];h&&(r=h.call(this));n=void 0!==r?r:this.$$;k=k.slice(0,-2*m);i=i.slice(0,-1*m);k.push(a);i.push(n);k.push(j[k[k.length-2]][k[k.length-1]]);break;case 0:return n}}};return i});
