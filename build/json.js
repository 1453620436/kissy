/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: May 14 22:27
*/
KISSY.add("json",["./json/stringify","./json/parse"],function(o,a){var i=a("./json/stringify"),j=a("./json/parse");o.JSON={stringify:i,parse:j};return o.JSON});
KISSY.add("json/stringify",["./quote","util"],function(o,a){function i(a){return 10>a?"0"+a:a}function j(a,g,b,c,d,h,f){var e=g[a];if(e&&"object"===typeof e)if("function"===typeof e.toJSON)e=e.toJSON(a);else if(e instanceof Date)e=isFinite(e.valueOf())?e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"Z":null;else if(e instanceof String||e instanceof Number||e instanceof Boolean)e=e.valueOf();void 0!==b&&(e=
b.call(g,a,e));switch(typeof e){case "number":return isFinite(e)?""+e:"null";case "string":return n.quote(e);case "boolean":return""+e;case "object":if(e)if(k.isArray(e)){for(var a=e,g=f,f=f+d,e=[],u=a.length,r=0;r<u;){var l=j(""+r,a,b,c,d,h,f);e[e.length]=void 0===l?"null":l;++r}e.length?d?(b=e.join("\n,"+f),b="[\n"+f+b+"\n"+g+"]"):b="["+e.join(",")+"]":b="[]"}else{for(var a=e,g=f,f=f+d,p,e=void 0!==c?c:k.keys(a),l=[],r=0,u=e.length;r<u;r++){p=e[r];var m=j(p,a,b,c,d,h,f);void 0!==m&&(p=n.quote(p),
p+=":",d&&(p+=" "),p+=m,l[l.length]=p)}l.length?d?(b=l.join(",\n"+f),b="{\n"+f+b+"\n"+g+"}"):b="{"+l.join(",")+"}":b="{}"}else b="null";return b}}var n=a("./quote"),k=a("util");return function(a,g,b){var c="",d,h;g&&("function"===typeof g?h=g:k.isArray(g)&&(d=g));"number"===typeof b?(b=Math.min(10,b),c=Array(b+1).join(" ")):"string"===typeof b&&(c=b.slice(0,10));return j("",{"":a},h,d,c,[],"")}});
KISSY.add("json/quote",["util"],function(o,a){var i={"":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},j={},n=/["\b\f\n\r\t\x00-\x1f]/g,k=/\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;a("util").each(i,function(a,g){j[g]=a});j["\\/"]="/";return{quote:function(a){return'"'+a.replace(n,function(g){var b;if(!(b=i[g]))b="\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4);return b})+'"'},unQuote:function(a){return a.slice(1,a.length-1).replace(k,function(g){var b;if(!(b=j[g]))b=String.fromCharCode(parseInt(g.slice(2),
16));return b})}}});KISSY.add("json/parse",["./parser","./quote","util"],function(o,a){function i(a,g,b){var c=a[g],d,h,f;if("object"===typeof c)if(k.isArray(c)){d=0;h=c.length;for(var e=[];d<h;)f=i(c,""+d,b),void 0!==f&&(e[e.length]=f);c=e}else{e=k.keys(c);d=0;for(h=e.length;d<h;d++){var j=e[d];f=i(c,j,b);void 0===f?delete c[j]:c[j]=f}}return b.call(a,g,c)}var j=a("./parser"),n=a("./quote"),k=a("util");j.yy={unQuote:n.unQuote};return function(a,g){var b=j.parse(""+a);return g?i({"":b},"",g):b}});
KISSY.add("json/parser",[],function(o,a){function i(a,b){for(var c in b)a[c]=b[c]}function j(a,b,c){if(a){var d,h,f=0,c=c||null;if("[object Array]"===Object.prototype.toString.call(a)){h=a.length;for(d=a[0];f<h&&!1!==b.call(c,d,f,a);d=a[++f]);}else for(d in a)if(!1===b.call(c,a[d],d,a))break}}var n={},k=function(a){this.rules=[];i(this,a);this.resetInput(this.input)};k.prototype={resetInput:function(a){i(this,{input:a,matched:"",stateStack:[k.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,
lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var a=this.stateStack[this.stateStack.length-1],b=[];this.mapState&&(a=this.mapState(a));j(this.rules,function(c){var d=c.state||c[3];if(d){a:{for(var h=0,f=d.length;h<f;h++)if(d[h]===a){d=!0;break a}d=!1}d&&b.push(c)}else a===k.STATIC.INITIAL&&b.push(c)});return b},pushState:function(a){this.stateStack.push(a)},popState:function(a){for(var a=a||1,b;a--;)b=this.stateStack.pop();return b},showDebugInfo:function(){var a=k.STATIC.DEBUG_CONTEXT_LIMIT,
b=this.matched,c=this.match,d=this.input,b=b.slice(0,b.length-c.length),b=(b.length>a?"...":"")+b.slice(0-a).replace(/\n/," "),c=c+d,c=c.slice(0,a)+(c.length>a?"...":"");return b+c+"\n"+Array(b.length+1).join("-")+"^"},mapSymbol:function(a){return this.symbolMap[a]},mapReverseSymbol:function(a){var b=this.symbolMap,c,d=this.reverseSymbolMap;if(!d&&b)for(c in d=this.reverseSymbolMap={},b)d[b[c]]=c;return d?d[a]:a},lex:function(){var g=this.input,b,c,d,h=this.getCurrentRules();this.match=this.text=
"";if(!g)return this.mapSymbol(k.STATIC.END_TAG);for(b=0;b<h.length;b++){c=h[b];var f=c.token||c[0];d=c.action||c[2]||a;if(c=g.match(c.regexp||c[1])){if(b=c[0].match(/\n.*/g))this.lineNumber+=b.length;i(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:b?b[b.length-1].length-1:this.lastColumn+c[0].length});b=this.match=c[0];this.matches=c;this.text=b;this.matched+=b;d=d&&d.call(this);d=d===a?f:this.mapSymbol(d);this.input=g=g.slice(b.length);return d?
d:this.lex()}}}};k.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var v=new k({rules:[["b",/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],["c",/^,/,0],["d",/^:/,0],["e",/^\[/,0],["f",/^\]/,0],["g",/^\{/,0],["h",/^\}/,0],["i",/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],["j",/^true|false/,0],["k",/^null/,0],["l",/^./,0]]});n.lexer=v;v.symbolMap={$EOF:"a",STRING:"b",COMMA:"c",COLON:"d",LEFT_BRACKET:"e",RIGHT_BRACKET:"f",LEFT_BRACE:"g",RIGHT_BRACE:"h",
NUMBER:"i",BOOLEAN:"j",NULL:"k",INVALID:"l",$START:"m",json:"n",value:"o",object:"p",array:"q",elementList:"r",member:"s",memberList:"t"};n.productions=[["m",["n"]],["n",["o"],function(){return this.$1}],["o",["b"],function(){return this.yy.unQuote(this.$1)}],["o",["i"],function(){return parseFloat(this.$1)}],["o",["p"],function(){return this.$1}],["o",["q"],function(){return this.$1}],["o",["j"],function(){return"true"===this.$1}],["o",["k"],function(){return null}],["r",["o"],function(){return[this.$1]}],
["r",["r","c","o"],function(){this.$1[this.$1.length]=this.$3;return this.$1}],["q",["e","f"],function(){return[]}],["q",["e","r","f"],function(){return this.$2}],["s",["b","d","o"],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],["t",["s"],function(){var a={};a[this.$1.key]=this.$1.value;return a}],["t",["t","c","s"],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],["p",["g","h"],function(){return{}}],["p",["g","t","h"],function(){return this.$2}]];n.table={gotos:{"0":{n:7,
o:8,q:9,p:10},2:{o:12,r:13,q:9,p:10},3:{s:16,t:17},18:{o:23,q:9,p:10},20:{o:24,q:9,p:10},21:{s:25}},action:{"0":{b:[1,a,1],e:[1,a,2],g:[1,a,3],i:[1,a,4],j:[1,a,5],k:[1,a,6]},1:{a:[2,2],f:[2,2],c:[2,2],h:[2,2]},2:{b:[1,a,1],e:[1,a,2],f:[1,a,11],g:[1,a,3],i:[1,a,4],j:[1,a,5],k:[1,a,6]},3:{b:[1,a,14],h:[1,a,15]},4:{a:[2,3],f:[2,3],c:[2,3],h:[2,3]},5:{a:[2,6],f:[2,6],c:[2,6],h:[2,6]},6:{a:[2,7],f:[2,7],c:[2,7],h:[2,7]},7:{a:[0]},8:{a:[2,1]},9:{a:[2,5],f:[2,5],c:[2,5],h:[2,5]},10:{a:[2,4],f:[2,4],c:[2,
4],h:[2,4]},11:{a:[2,10],f:[2,10],c:[2,10],h:[2,10]},12:{f:[2,8],c:[2,8]},13:{c:[1,a,18],f:[1,a,19]},14:{d:[1,a,20]},15:{a:[2,15],f:[2,15],c:[2,15],h:[2,15]},16:{h:[2,13],c:[2,13]},17:{c:[1,a,21],h:[1,a,22]},18:{b:[1,a,1],e:[1,a,2],g:[1,a,3],i:[1,a,4],j:[1,a,5],k:[1,a,6]},19:{a:[2,11],f:[2,11],c:[2,11],h:[2,11]},20:{b:[1,a,1],e:[1,a,2],g:[1,a,3],i:[1,a,4],j:[1,a,5],k:[1,a,6]},21:{b:[1,a,14]},22:{a:[2,16],f:[2,16],c:[2,16],h:[2,16]},23:{f:[2,9],c:[2,9]},24:{h:[2,12],c:[2,12]},25:{h:[2,14],c:[2,14]}}};
n.parse=function(g,b){var c=this.lexer,d,h,f,e=this.table,i=e.gotos,e=e.action,j=this.productions,l=[null],k=b?"in file: "+b+" ":"",m=[0];for(c.resetInput(g);;){d=m[m.length-1];h||(h=c.lex());f=h?e[d]&&e[d][h]:null;if(!f){h=[];if(e[d])for(var n in e[d])h.push(this.lexer.mapReverseSymbol(n));c=k+"syntax error at line "+c.lineNumber+":\n"+c.showDebugInfo()+"\nexpect "+h.join(", ");throw Error(c);}switch(f[0]){case 1:m.push(h);l.push(c.text);m.push(f[2]);h=null;break;case 2:var q=j[f[1]];d=q.symbol||
q[0];f=q.action||q[2];var o=(q.rhs||q[1]).length,s=0,t,q=l[l.length-o];t=a;for(this.$$=q;s<o;s++)this["$"+(o-s)]=l[l.length-1-s];f&&(t=f.call(this));q=t!==a?t:this.$$;m=m.slice(0,-2*o);l=l.slice(0,-1*o);m.push(d);l.push(q);m.push(i[m[m.length-2]][m[m.length-1]]);break;case 0:return q}}};return n});
