/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Aug 28 13:39
*/
KISSY.add("dom/base","./base/api,./base/attr,./base/class,./base/create,./base/data,./base/insertion,./base/offset,./base/style,./base/selector,./base/traversal".split(","),function(x,k,r,t){x=k("./base/api");k("./base/attr");k("./base/class");k("./base/create");k("./base/data");k("./base/insertion");k("./base/offset");k("./base/style");k("./base/selector");k("./base/traversal");t.exports=x});
KISSY.add("dom/base/api",["util","ua"],function(x,k,r,t){var m=k("util"),d=window,j=d.document,l=k("ua"),e={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},h=t.exports={isCustomDomain:function(a){var a=a||d,a=h.get(a),g=a.document.domain,a=a.location.hostname;return g!==a&&g!=="["+a+"]"},getEmptyIframeSrc:function(a){a=
a||d;a=h.get(a);return l.ie&&h.isCustomDomain(a)?"javascript:void(function(){"+encodeURIComponent('document.open();document.domain="'+a.document.domain+'";document.close();')+"}())":""},NodeType:e,getWindow:function(a){if(!a)return d;a=h.get(a);if(m.isWindow(a))return a;var g=a;g.nodeType!==e.DOCUMENT_NODE&&(g=a.ownerDocument);return g.defaultView||g.parentWindow},getDocument:function(a){if(!a)return j;a=h.get(a);return m.isWindow(a)?a.document:a.nodeType===e.DOCUMENT_NODE?a:a.ownerDocument},isDomNodeList:function(a){return a&&
!a.nodeType&&a.item&&!a.setTimeout},nodeName:function(a){var d=h.get(a),a=d.nodeName.toLowerCase();l.ie&&(d=d.scopeName)&&"HTML"!==d&&(a=d.toLowerCase()+":"+a);return a},_RE_NUM_NO_PX:RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i")}});
KISSY.add("dom/base/attr",["util","./api"],function(x,k){function r(a){return null==a?"":a+""}function t(a,c){var c=b[c]||c,d=v[c];return d&&d.get?d.get(a,c):a[c]}var m=k("util"),d=k("./api"),j=document,l=d.NodeType,j=j&&j.documentElement,e=d.nodeName,h=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,a=/^(?:button|input|object|select|textarea)$/i,g=/^a(?:rea)?$/i,n=/:|^on/,f=/\r/g,c={},o={val:1,css:1,html:1,text:1,data:1,
width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},z={tabindex:{get:function(c){var b=c.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):a.test(c.nodeName)||g.test(c.nodeName)&&c.href?0:void 0}}},b={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
i={get:function(a,c){return d.prop(a,c)?c.toLowerCase():void 0},set:function(a,c,f){!1===c?d.removeAttr(a,f):(c=b[f]||f,c in a&&(a[c]=!0),a.setAttribute(f,f.toLowerCase()));return f}},v={},s={},w={select:{get:function(a){var c=a.selectedIndex,b=a.options,f;if(0>c)return null;if("select-one"===""+a.type)return d.val(b[c]);a=[];c=0;for(f=b.length;c<f;++c)b[c].selected&&a.push(d.val(b[c]));return a},set:function(a,c){var b=m.makeArray(c);m.each(a.options,function(a){a.selected=m.inArray(d.val(a),b)});
b.length||(a.selectedIndex=-1);return b}}};m.each(["radio","checkbox"],function(a){w[a]={get:function(a){return null===a.getAttribute("value")?"on":a.value},set:function(a,c){if(m.isArray(c))return a.checked=m.inArray(d.val(a),c),1}}});z.style={get:function(a){return a.style.cssText}};m.mix(d,{_valHooks:w,_propFix:b,_attrHooks:z,_propHooks:v,_attrNodeHook:s,_attrFix:c,prop:function(a,c,f){var i=d.query(a),g,e;if("object"===typeof c)m.each(c,function(a,c){d.prop(i,c,a)});else if(c=b[c]||c,e=v[c],void 0!==
f)for(a=i.length-1;0<=a;a--)g=i[a],e&&e.set?e.set(g,f,c):g[c]=f;else if(i.length)return t(i[0],c)},hasProp:function(a,c){var b=d.query(a),f,i=b.length,g;for(f=0;f<i;f++)if(g=b[f],void 0!==t(g,c))return!0;return!1},removeProp:function(a,c){var c=b[c]||c,f=d.query(a),i,g;for(i=f.length-1;0<=i;i--){g=f[i];try{g[c]=void 0,delete g[c]}catch(e){}}},attr:function(a,b,f,g){var j=d.query(a),v=j[0];if("object"===typeof b){var g=f,p;for(p in b)d.attr(j,p,b[p],g)}else{if(g&&o[b])return d[b](a,f);b=b.toLowerCase();
if(g&&o[b])return d[b](a,f);b=c[b]||b;a=h.test(b)?i:n.test(b)?s:z[b];if(void 0===f){if(v&&v.nodeType===l.ELEMENT_NODE){"form"===e(v)&&(a=s);if(a&&a.get)return a.get(v,b);f=v.getAttribute(b);return""===f&&(b=v.getAttributeNode(b),!b||!b.specified)?void 0:null===f?void 0:f}}else for(g=j.length-1;0<=g;g--)if((v=j[g])&&v.nodeType===l.ELEMENT_NODE)"form"===e(v)&&(a=s),a&&a.set?a.set(v,f,b):v.setAttribute(b,""+f)}},removeAttr:function(a,f){var f=f.toLowerCase(),f=c[f]||f,i=d.query(a),g,e,o;for(o=i.length-
1;0<=o;o--)if(e=i[o],e.nodeType===l.ELEMENT_NODE&&(e.removeAttribute(f),h.test(f)&&(g=b[f]||f)in e))e[g]=!1},hasAttr:j&&!j.hasAttribute?function(a,c){var c=c.toLowerCase(),b=d.query(a),f,i;for(f=0;f<b.length;f++)if(i=b[f],(i=i.getAttributeNode(c))&&i.specified)return!0;return!1}:function(a,c){var b=d.query(a),f,i=b.length;for(f=0;f<i;f++)if(b[f].hasAttribute(c))return!0;return!1},val:function(a,c){var b,i,g,o,p;if(void 0===c){if(g=d.get(a)){if((b=w[e(g)]||w[g.type])&&"get"in b&&void 0!==(i=b.get(g,
"value")))return i;i=g.value;return"string"===typeof i?i.replace(f,""):null==i?"":i}}else{i=d.query(a);for(o=i.length-1;0<=o;o--){g=i[o];if(1!==g.nodeType)break;p=c;null==p?p="":"number"===typeof p?p+="":m.isArray(p)&&(p=m.map(p,r));b=w[e(g)]||w[g.type];if(!(b&&"set"in b)||void 0===b.set(g,p,"value"))g.value=p}}},text:function(a,c){var b,f,i,g;if(void 0===c)return b=d.get(a),d._getText(b);f=d.query(a);for(i=f.length-1;0<=i;i--)if(b=f[i],g=b.nodeType,g===l.ELEMENT_NODE)d.cleanData(b.getElementsByTagName("*")),
"textContent"in b?b.textContent=c:b.innerText=c;else if(g===l.TEXT_NODE||g===l.CDATA_SECTION_NODE)b.nodeValue=c},_getText:function(a){return a.textContent}})});
KISSY.add("dom/base/class",["./api","util"],function(x,k){function r(a){for(var a=j.trim(a||""),a=a.split(h),g=[],d,f=a.length,c=0;c<f;c++)(d=a[c])&&g.push(d);return g}function t(a){return function(g,d){var f,c,e,h=g.classList,b=l.call(arguments,2);f=0;for(c=d.length;f<c;f++)(e=d[f])&&h[a].apply(h,[e].concat(b))}}function m(a){return function(g,h){var f=r(h),c=l.call(arguments,2);d.query(g).each(function(g){g.nodeType===e.ELEMENT_NODE&&d[a].apply(d,[g,f].concat(c))})}}var d=k("./api"),j=k("util"),
l=[].slice,e=d.NodeType,h=/[\.\s]\s*\.?/;j.mix(d,{_hasClass:function(a,g){var d,f,c,e=a.classList;if(e.length){d=0;for(f=g.length;d<f;d++)if((c=g[d])&&!e.contains(c))return!1;return!0}return!1},_addClass:t("add"),_removeClass:t("remove"),_toggleClass:t("toggle"),hasClass:function(a,g){var h=!1,g=r(g);d.query(a).each(function(a){if(a.nodeType===e.ELEMENT_NODE&&d._hasClass(a,g))return h=!0,!1});return h},replaceClass:function(a,g,e){d.removeClass(a,g);d.addClass(a,e)},addClass:m("_addClass"),removeClass:m("_removeClass"),
toggleClass:m("_toggleClass")})});
KISSY.add("dom/base/create",["util","logger-manager","./api","ua"],function(x,k,r,t){function m(a,b){var f=a&&a!==n?a.createElement(c):o;b&&f===o&&(f.innerHTML="");return f}function d(a,b){var c=m(b);c.innerHTML="m<div>"+a+"</div>";return c.lastChild}function j(a,b){if(b)if(s&&b.canHaveChildren&&"removeNode"in a){if(a.firstChild)a:{try{a.innerHTML="";break a}catch(c){}for(var f;f=a.lastChild;)j(f,a)}a.removeNode(!1)}else b.removeChild(a)}function l(a,b,c){var i=b.nodeType;if(i===f.DOCUMENT_FRAGMENT_NODE){b=
b.childNodes;c=c.childNodes;for(i=0;b[i];)c[i]&&l(a,b[i],c[i]),i++}else if(i===f.ELEMENT_NODE){b=b.getElementsByTagName("*");c=c.getElementsByTagName("*");for(i=0;b[i];)c[i]&&a(b[i],c[i]),i++}}function e(a,b){var c=t.require("event/dom"),i,d;if(b.nodeType!==f.ELEMENT_NODE||g.hasData(a)){i=g.data(a);for(d in i)g.data(b,d,i[d]);c&&c.clone(a,b)}}function h(b){var c=null,f,i;if(b&&(b.push||b.item)&&b[0]){c=b[0].ownerDocument;c=c.createDocumentFragment();b=a.makeArray(b);f=0;for(i=b.length;f<i;f++)c.appendChild(b[f])}return c}
var a=k("util");k("logger-manager");var g=k("./api"),n=document,f=g.NodeType,x=k("ua").ieMode,c="div",o=n&&n.createElement(c),z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,b=/<([\w:]+)/,i=/^\s+/,v=/\s+$/,s=!!(x&&9>x),w=s,H=/<|&#?\w+;/,C=n&&"outerHTML"in n.documentElement,I=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,F=g._creators={div:d},u={area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"},
B;for(B in u)(function(b){F[B]=function(c,f){return g.create(a.substitute("<{tag}>{html}</{tag}>",{tag:b,html:c}),void 0,f)}})(u[B]);F.option=F.optgroup=function(a,b){return g.create('<select multiple="multiple">'+a+"</select>",void 0,b)};u.option=u.optgroup=1;a.mix(g,{create:function(e,q,D,o){var A=null;if(!e)return A;if(e.nodeType)return g.clone(e);if("string"!==typeof e)return A;void 0===o&&(o=!0);o&&(e=a.trim(e));var o=g._creators,j,y,D=D||n,J,L=c;if(H.test(e))if(J=I.exec(e))A=D.createElement(J[1]);
else{e=e.replace(z,"<$1></$2>");if((J=b.exec(e))&&(j=J[1]))L=j.toLowerCase();j=(o[L]||d)(e,D);w&&(y=e.match(i))&&j.insertBefore(D.createTextNode(y[0]),j.firstChild);w&&/\S/.test(e)&&(y=e.match(v))&&j.appendChild(D.createTextNode(y[0]));e=j.childNodes;1===e.length?A=e[0].parentNode.removeChild(e[0]):e.length&&(A=h(e))}else A=D.createTextNode(e);q&&(e=A.nodeType,e===f.ELEMENT_NODE?g.attr(A,q,!0):e===f.DOCUMENT_FRAGMENT_NODE&&g.attr(A.childNodes,q,!0));return q=A},_fixCloneAttributes:function(a,b){var c=
a.nodeName.toLowerCase(),f=(a.type||"").toLowerCase();if("textarea"===c)b.defaultValue=a.defaultValue,b.value=a.value;else if("input"===c&&("checkbox"===f||"radio"===f)){if(c=a.checked)b.defaultChecked=b.checked=c;c=a.value;b.value!==c&&(b.value=c)}},_defaultCreator:d,html:function(a,c,d){var a=g.query(a),e=a[0],o=!1,h,y;if(!e)return null;if(void 0===c)return e.nodeType===f.ELEMENT_NODE?e.innerHTML:e.nodeType===f.DOCUMENT_FRAGMENT_NODE?(d=m(e.ownerDocument,1),d.appendChild(e),d.innerHTML):null;c+=
"";if(!c.match(/<(?:script|style|link)/i)&&(!w||!c.match(i))&&!u[(c.match(b)||["",""])[1].toLowerCase()])try{for(h=a.length-1;0<=h;h--)y=a[h],y.nodeType===f.ELEMENT_NODE&&(g.cleanData(y.getElementsByTagName("*")),y.innerHTML=c);o=!0}catch(J){}o||(c=g.create(c,0,e.ownerDocument,0),g.empty(a),g.append(c,a,d))},outerHtml:function(a,b,c){var a=g.query(a),i=a.length,d=a[0];if(!d)return null;if(void 0===b){if(C&&d.nodeType!==f.DOCUMENT_FRAGMENT_NODE)return d.outerHTML;b=m(d.ownerDocument,1);b.appendChild(g.clone(d,
!0));return b.innerHTML}b+="";if(!b.match(/<(?:script|style|link)/i)&&C)for(c=i-1;0<=c;c--)d=a[c],d.nodeType===f.ELEMENT_NODE&&(g.cleanData(d,1),d.outerHTML=b);else b=g.create(b,0,d.ownerDocument,0),g.insertBefore(b,a,c),g.remove(a)},remove:function(b,c){var i,d=g.query(b),e,h=t.require("event/dom"),y;for(y=d.length-1;0<=y;y--)i=d[y],!c&&i.nodeType===f.ELEMENT_NODE&&(e=a.makeArray(i.getElementsByTagName("*")),e.push(i),g.removeData(e),h&&h.detach(e)),j(i,i.parentNode)},clone:function(a,b,c,i){"object"===
typeof b&&(i=b.deepWithDataAndEvent,c=b.withDataAndEvent,b=b.deep);var a=g.get(a),d,h=g._fixCloneAttributes,y;if(!a)return null;y=a.nodeType;d=a.cloneNode(b);if(y===f.ELEMENT_NODE||y===f.DOCUMENT_FRAGMENT_NODE)h&&y===f.ELEMENT_NODE&&h(a,d),b&&h&&l(h,a,d);c&&(e(a,d),b&&i&&l(e,a,d));return d},empty:function(a){var a=g.query(a),b,c;for(c=a.length-1;0<=c;c--)b=a[c],g.remove(b.childNodes)},_nodeListToFragment:h});g.outerHTML=g.outerHtml});
KISSY.add("dom/base/data",["util","./api"],function(x,k,r,t){var m=k("util"),d=k("./api"),j=window,l="_ks_data_"+m.now(),e={},h={},a={applet:1,object:1,embed:1},g={hasData:function(a,f){if(a)if(void 0!==f){if(f in a)return!0}else if(!m.isEmptyObject(a))return!0;return!1}},n={hasData:function(a,f){return a==j?n.hasData(h,f):g.hasData(a[l],f)},data:function(a,f,d){if(a==j)return n.data(h,f,d);var b=a[l];if(void 0!==d)b=a[l]=a[l]||{},b[f]=d;else return void 0!==f?b&&b[f]:b=a[l]=a[l]||{}},removeData:function(a,
f){if(a==j)return n.removeData(h,f);var d=a[l];if(void 0!==f)delete d[f],m.isEmptyObject(d)&&n.removeData(a);else try{delete a[l]}catch(b){a[l]=void 0}}},f={hasData:function(a,f){var d=a[l];return!d?!1:g.hasData(e[d],f)},data:function(c,f,d){if(!a[c.nodeName.toLowerCase()]){var b=c[l];if(!b){if(void 0!==f&&void 0===d)return;b=c[l]=m.guid()}c=e[b];if(void 0!==d)c=e[b]=e[b]||{},c[f]=d;else return void 0!==f?c&&c[f]:c=e[b]=e[b]||{}}},removeData:function(a,d){var g=a[l],b;if(g)if(b=e[g],void 0!==d)delete b[d],
m.isEmptyObject(b)&&f.removeData(a);else{delete e[g];try{delete a[l]}catch(i){a[l]=void 0}a.removeAttribute&&a.removeAttribute(l)}}};m.mix(d,{__EXPANDO:l,hasData:function(a,e){for(var g=!1,b=d.query(a),i=0;i<b.length&&!(g=b[i],g=g.nodeType?f.hasData(g,e):n.hasData(g,e));i++);return g},data:function(a,e,g){var a=d.query(a),b=a[0];if("object"===typeof e)for(var i in e)d.data(a,i,e[i]);else if(void 0===g){if(b)return b.nodeType?f.data(b,e):n.data(b,e)}else for(i=a.length-1;0<=i;i--)b=a[i],b.nodeType?
f.data(b,e,g):n.data(b,e,g)},removeData:function(a,e){var g=d.query(a),b,i;for(i=g.length-1;0<=i;i--)b=g[i],b.nodeType?f.removeData(b,e):n.removeData(b,e)},cleanData:function(a,e){var g=d.query(a),b,i,h=t.require("event/dom");for(i=g.length-1;0<=i;i--)if(b=g[i],b.nodeType){var j=e&&m.makeArray(b.getElementsByTagName("*"))||[];j.push(b);b=0;for(var w=j.length;b<w;b++)f.removeData(j[b]);h&&h.detach(j)}else n.removeData(b)}})});
KISSY.add("dom/base/insertion",["util","./api"],function(x,k){function r(f,c){var d=[],j,b,i;for(j=0;f[j];j++)if(b=f[j],i=h(b),b.nodeType===l.DOCUMENT_FRAGMENT_NODE)d.push.apply(d,r(a(b.childNodes),c));else if("script"===i&&(!b.type||n.test(b.type)))b.parentNode&&b.parentNode.removeChild(b),c&&c.push(b);else{if(b.nodeType===l.ELEMENT_NODE&&!e.test(i)){i=[];var v,s,w=b.getElementsByTagName("script");for(s=0;s<w.length;s++)v=w[s],(!v.type||n.test(v.type))&&i.push(v);g.apply(f,[j+1,0].concat(i))}d.push(b)}return d}
function t(a){a.src?k.load(a.src):(a=d.trim(a.text||a.textContent||a.innerHTML||""))&&d.globalEval(a)}function m(a,c,e,g){a=j.query(a);g&&(g=[]);a=r(a,g);j._fixInsertionChecked&&j._fixInsertionChecked(a);var c=j.query(c),b,i,h,s,w=c.length;if((a.length||g&&g.length)&&w){a=j._nodeListToFragment(a);1<w&&(s=j.clone(a,!0),c=d.makeArray(c));for(b=0;b<w;b++)i=c[b],a&&(h=0<b?j.clone(s,!0):a,e(h,i)),g&&g.length&&d.each(g,t)}}var d=k("util"),j=k("./api"),l=j.NodeType,e=/^(?:button|input|object|select|textarea)$/i,
h=j.nodeName,a=d.makeArray,g=[].splice,n=/\/(java|ecma)script/i;d.mix(j,{_fixInsertionChecked:null,insertBefore:function(a,c,d){m(a,c,function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)},d)},insertAfter:function(a,c,d){m(a,c,function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b.nextSibling)},d)},appendTo:function(a,c,d){m(a,c,function(a,b){b.appendChild(a)},d)},prependTo:function(a,c,d){m(a,c,function(a,b){b.insertBefore(a,b.firstChild)},d)},wrapAll:function(a,c){c=j.clone(j.get(c),!0);
a=j.query(a);a[0].parentNode&&j.insertBefore(c,a[0]);for(var d;(d=c.firstChild)&&1===d.nodeType;)c=d;j.appendTo(a,c)},wrap:function(a,c){a=j.query(a);c=j.get(c);d.each(a,function(a){j.wrapAll(a,c)})},wrapInner:function(a,c){a=j.query(a);c=j.get(c);d.each(a,function(a){var d=a.childNodes;d.length?j.wrapAll(d,c):a.appendChild(c)})},unwrap:function(a){a=j.query(a);d.each(a,function(a){a=a.parentNode;j.replaceWith(a,a.childNodes)})},replaceWith:function(a,c){var d=j.query(a),c=j.query(c);j.remove(c,!0);
j.insertBefore(c,d);j.remove(d)}});d.each({prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},function(a,c){j[c]=j[a]})});
KISSY.add("dom/base/offset",["util","./api","ua"],function(x,k){function r(b){var d,g=b.ownerDocument.body;if(!b.getBoundingClientRect)return{left:0,top:0};d=b.getBoundingClientRect();b=d[f];d=d[c];b-=a.clientLeft||g.clientLeft||0;d-=a.clientTop||g.clientTop||0;return{left:b,top:d}}function t(a,c){var e={left:0,top:0},f=g(a),h,j=a,c=c||f;do{if(f==c){var l=j;h=r(l);l=g(l);h.left+=d[o](l);h.top+=d[z](l)}else h=r(j);e.left+=h.left;e.top+=h.top}while(f&&f!=c&&(j=f.frameElement)&&(f=f.parent));return e}
var m=k("util"),d=k("./api"),j=window,l=k("ua"),e=j.document,h=d.NodeType,a=e&&e.documentElement,g=d.getWindow,n=Math.max,f="left",c="top",o="scrollLeft",z="scrollTop";m.mix(d,{offset:function(a,c,e){if(void 0===c){var a=d.get(a),g;a&&(g=t(a,e));return g}e=d.query(a);for(g=e.length-1;0<=g;g--){var a=e[g],f=c;"static"===d.css(a,"position")&&(a.style.position="relative");var h=t(a),j={},l=void 0,m=void 0;for(m in f)l=parseFloat(d.css(a,m))||0,j[m]=l+f[m]-h[m];d.css(a,j)}},scrollIntoView:function(a,
e,j,l){var n,k,o,t;if(o=d.get(a)){e&&(e=d.get(e));e||(e=o.ownerDocument);e.nodeType===h.DOCUMENT_NODE&&(e=g(e));"object"===typeof j&&(l=j.allowHorizontalScroll,t=j.onlyScrollIfNeeded,j=j.alignWithTop);l=void 0===l?!0:l;k=m.isWindow(e);var a=d.offset(o),r=d.outerHeight(o);n=d.outerWidth(o);var u,z,p,q;k?(k=e,u=d.height(k),z=d.width(k),q={left:d.scrollLeft(k),top:d.scrollTop(k)},k=a[f]-q[f],o=a[c]-q[c],n=a[f]+n-(q[f]+z),a=a[c]+r-(q[c]+u)):(u=d.offset(e),z=e.clientHeight,p=e.clientWidth,q={left:d.scrollLeft(e),
top:d.scrollTop(e)},k=a[f]-(u[f]+(parseFloat(d.css(e,"borderLeftWidth"))||0)),o=a[c]-(u[c]+(parseFloat(d.css(e,"borderTopWidth"))||0)),n=a[f]+n-(u[f]+p+(parseFloat(d.css(e,"borderRightWidth"))||0)),a=a[c]+r-(u[c]+z+(parseFloat(d.css(e,"borderBottomWidth"))||0)));if(t){if(0>o||0<a)!0===j?d.scrollTop(e,q.top+o):!1===j?d.scrollTop(e,q.top+a):0>o?d.scrollTop(e,q.top+o):d.scrollTop(e,q.top+a)}else(j=void 0===j?!0:!!j)?d.scrollTop(e,q.top+o):d.scrollTop(e,q.top+a);if(l)if(t){if(0>k||0<n)!0===j?d.scrollLeft(e,
q.left+k):!1===j?d.scrollLeft(e,q.left+n):0>k?d.scrollLeft(e,q.left+k):d.scrollLeft(e,q.left+n)}else void 0===j||j?d.scrollLeft(e,q.left+k):d.scrollLeft(e,q.left+n)}},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0});m.each(["Left","Top"],function(a,c){var e="scroll"+a;d[e]=function(f,l){if("number"===typeof f)return arguments.callee(j,f);var f=d.get(f),k,n,m,o;f&&f.nodeType===h.ELEMENT_NODE?void 0!==l?f[e]=parseFloat(l):k=f[e]:(o=g(f),void 0!==l?(l=parseFloat(l),
n="Left"===a?l:d.scrollLeft(o),m="Top"===a?l:d.scrollTop(o),o.scrollTo(n,m)):(k=o["page"+(c?"Y":"X")+"Offset"],"number"!==typeof k&&(n=o.document,k=n.documentElement[e],"number"!==typeof k&&(k=n.body[e]))));return k}});m.each(["Width","Height"],function(a){d["doc"+a]=function(c){c=d.get(c);c=d.getDocument(c);return n(c.documentElement["scroll"+a],c.body["scroll"+a],d["viewport"+a](c))};d["viewport"+a]=function(c){var c=d.get(c),e=g(c),c=e["inner"+a];if(l.mobile&&c)return c;var c="client"+a,e=e.document,
f=e.body,h=e.documentElement[c];return"CSS1Compat"===e.compatMode&&h||f&&f[c]||h}})});
KISSY.add("dom/base/style",["util","logger-manager","./api","feature","ua"],function(x,k){function r(a){if(B[a])return B[a];var c=n(a);return c&&c.propertyName||a}function t(a,c,b){var e={},d=a.style,f;for(f in c)e[f]=d[f],d[f]=c[f];b.call(a);for(f in c)d[f]=e[f]}function m(a,c,b,e){var d,f;if(d=a.style)if(c=e?c:K(c),e=u[c],c=r(c),void 0!==b){null===b||b===C?b=C:!isNaN(Number(b))&&!H[c]&&(b+=I);e&&e.set&&(b=e.set(a,b));if(void 0!==b){try{d[c]=b}catch(g){}b===C&&d.removeAttribute&&d.removeAttribute(c)}d.cssText||
a.removeAttribute("style")}else{if(!e||!("get"in e&&void 0!==(f=e.get(a,!1))))f=d[c];return void 0===f?"":f}}function d(a){var c,b=arguments;0!==a.offsetWidth?c=e.apply(void 0,b):t(a,A,function(){c=e.apply(void 0,b)});return c}function j(c,b,e,d){var f=0,g,h,j;for(h=0;h<b.length;h++)if(g=b[h])for(j=0;j<e.length;j++)f+=parseFloat(a._getComputedStyle(c,"border"===g?g+e[j]+"Width":g+e[j],d))||0;return f}function l(a){var c=a.ownerDocument,b;c.defaultView&&(b=c.defaultView.getComputedStyle(a,null));return b}
function e(b,e,d){if(h.isWindow(b))return e===s?a.viewportWidth(b):a.viewportHeight(b);if(9===b.nodeType)return e===s?a.docWidth(b):a.docHeight(b);var g=e===s?["Left","Right"]:["Top","Bottom"],i=e===s?b.offsetWidth:b.offsetHeight,q=l(b),k="border-box"===a._getComputedStyle(b,"boxSizing",q),n=0;if(null==i||0>=i){i=void 0;n=a._getComputedStyle(b,e,q);if(null==n||0>Number(n))n=b.style[e]||0;n=parseFloat(n)||0}void 0===d&&(d=k?z:c);e=void 0!==i||k;i=i||n;return d===c?e?i-j(b,["border","padding"],g,q):
n:e?i+(d===z?0:d===o?-j(b,["border"],g,q):j(b,["margin"],g,q)):n+j(b,f.slice(d),g,q)}var h=k("util");k("logger-manager");var a=k("./api"),g=window,n=k("feature").getCssVendorInfo;k("ua");var f=["margin","border","padding"],c=-1,o=2,z=1,b=a.nodeName,i=g.document||{},v=/^margin/,s="width",w="display"+h.now(),H={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},C="",I="px",F=/\d(?!px)[a-z%]+$/i,u={},B={},p={},q=n("userSelect"),D=q&&q.propertyName,K=h.camelCase;B["float"]=
"cssFloat";h.mix(a,{_cssHooks:u,_cssProps:B,_getComputedStyle:function(b,c,e){var d="",f,g;f=b.ownerDocument;c=r(c);if(e=e||f.defaultView.getComputedStyle(b,null))d=e.getPropertyValue(c)||e[c];""===d&&!a.contains(f,b)&&(d=b.style[c]);a._RE_NUM_NO_PX.test(d)&&v.test(c)&&(g=b.style,b=g.width,c=g.minWidth,f=g.maxWidth,g.minWidth=g.maxWidth=g.width=d,d=e.width,g.width=b,g.minWidth=c,g.maxWidth=f);return d},style:function(b,c,e){var b=a.query(b),d,f=b[0];if("object"===typeof c)for(d in c){d=K(d);for(f=
b.length-1;0<=f;f--)m(b[f],d,c[d],1)}else{c=K(c);if(void 0===e)return d="",f&&(d=m(f,c,e,1)),d;for(f=b.length-1;0<=f;f--)m(b[f],c,e,1)}},css:function(b,c,e){var b=a.query(b),d=b[0],f;if("object"===typeof c)for(f in c)for(d=b.length-1;0<=d;d--)m(b[d],f,c[f]);else{c=K(c);f=u[c];if(void 0===e){e="";if(d&&(!f||!("get"in f&&void 0!==(e=f.get(d,!0)))))e=a._getComputedStyle(d,c);return"undefined"===typeof e?"":e}for(d=b.length-1;0<=d;d--)m(b[d],c,e,1)}},show:function(c){var c=a.query(c),b,d,e;for(e=c.length-
1;0<=e;e--)if(d=c[e],d.style.display=a.data(d,w)||C,"none"===a.css(d,"display")){b=d.tagName.toLowerCase();var f=void 0,g=p[b],h=void 0;p[b]||(f=i.body||i.documentElement,h=i.createElement(b),a.prepend(h,f),g=a.css(h,"display"),f.removeChild(h),p[b]=g);b=g;a.data(d,w,b);d.style.display=b}},hide:function(b){var b=a.query(b),c,d;for(d=b.length-1;0<=d;d--){c=b[d];var e=c.style,f=e.display;"none"!==f&&(f&&a.data(c,w,f),e.display="none")}},toggle:function(b){var b=a.query(b),c,d;for(d=b.length-1;0<=d;d--)c=
b[d],"none"===a.css(c,"display")?a.show(c):a.hide(c)},addStyleSheet:function(b,c,d){"string"===typeof b&&(d=c,c=b,b=g);var b=a.getDocument(b),e;if(d&&(d=d.replace("#",C)))e=a.get("#"+d,b);e||(e=a.create("<style>",{id:d},b),a.get("head",b).appendChild(e),e.styleSheet?e.styleSheet.cssText=c:e.appendChild(b.createTextNode(c)))},unselectable:D?function(b){for(var b=a.query(b),c=b.length-1;0<=c;c--)b[c].style[D]="none"}:function(c){var c=a.query(c),d,e,f=0,g,i;g=["iframe","textarea","input","select"];
for(e=c.length-1;0<=e;e--){d=c[e];i=d.getElementsByTagName("*");for(d.setAttribute("unselectable","on");d=i[f++];)h.inArray(b(d),g)||d.setAttribute("unselectable","on")}},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0});h.each([s,"height"],function(b){a["inner"+h.ucfirst(b)]=function(c){return(c=a.get(c))&&d(c,b,o)};a["outer"+h.ucfirst(b)]=function(c,e){var f=a.get(c);return f&&d(f,b,e?0:z)};var e=b===s?["Left","Right"]:["Top","Bottom"];a[b]=function(f,g){var h=a.get(f);if(void 0!==
g){if(h){var i=l(h);"border-box"===a._getComputedStyle(h,"boxSizing",i)&&(g+=j(h,["padding","border"],e,i));return a.css(h,b,g)}}else return h&&d(h,b,c)};u[b]={get:function(a,c){var e;c&&(e=d(a,b)+"px");return e}}});var A={position:"absolute",visibility:"hidden",display:"block"};h.each(["left","top"],function(b){u[b]={get:function(c,d){var e,f,g;if(d){g=a.css(c,"position");if("static"===g)return"auto";e=a._getComputedStyle(c,b);if((f="auto"===e)&&"relative"===g)return"0px";if(f||F.test(e)){g={top:0,
left:0};if("fixed"===a.css(c,"position"))f=c.getBoundingClientRect();else{for(e=c.offsetParent||(c.ownerDocument||i).body;e&&!N.test(e.nodeName)&&"static"===a.css(e,"position");)e=e.offsetParent;f=a.offset(c);g=a.offset(e);g.top+=parseFloat(a.css(e,"borderTopWidth"))||0;g.left+=parseFloat(a.css(e,"borderLeftWidth"))||0}f.top-=parseFloat(a.css(c,"marginTop"))||0;f.left-=parseFloat(a.css(c,"marginLeft"))||0;e={top:f.top-g.top,left:f.left-g.left}[b]+"px"}}return e}}});var N=/^(?:body|html)$/i});
KISSY.add("dom/base/selector",["./api","util"],function(x,k){function r(a){var b=this.length,c;for(c=0;c<b&&!1!==a(this[c],c);c++);}function t(a){a=a.substr(1);if(!a)throw Error("An invalid or illegal string was specified for selector.");return a}function m(a){return function(c){var b=g._getElementById(a,f);return b&&g._contains(c,b)?[b]:[]}}function d(a){return function(c){return b(c,a)}}function j(a){return function(c){return c.getElementsByTagName(a)}}function l(a,c){var e,h,k="string"===typeof a,
o=void 0!==c?l(c):(h=1)&&[f],s=o.length;if(a)if(k){a=B(a);if(h)if("body"===a)e=[f.body];else if(H.test(a))e=i(b(f,RegExp.$1));else if(F.test(a))e=(h=g._getElementById(RegExp.$2,f))&&h.nodeName.toLowerCase()===RegExp.$1?[h]:[];else if(C.test(a))e=(h=g._getElementById(a.substr(1),f))?[h]:[];else if(I.test(a))e=i(f.getElementsByTagName(a));else if(!a.match(/,|\+|=|~|\[|\]|:|>|\||\$|\^|\*|\(|\)|[\w-]+\.[\w-]+|[\w-]+#[\w-]+/)){e=a.split(/\s+/);var p=o,u,x;h=0;for(k=e.length;h<k;h++){u=e;x=h;var E;E=e[h];
var G=E.charAt(0);E="#"===G?m(t(E)):"."===G?d(t(E)):j(E);u[x]=E}h=0;for(k=e.length;h<k;h++){E=e[h];var G=[],M;u=0;for(x=p.length;u<x;u++)M=E(p[u]),G.push.apply(G,i(M));p=G;if(!p.length)break}e=p&&1<p.length?g.unique(p):p}if(!e){e=[];for(h=0;h<s;h++)w.apply(e,g._selectInternal(a,o[h]));1<e.length&&1<s&&g.unique(e)}}else{if(e=a.nodeType||n.isWindow(a)?[a]:a.getDOMNodes?a.getDOMNodes():z(a)?a:v(a)?i(a):[a],!h){k=e;u=k.length;e=[];for(h=0;h<u;h++)for(p=0;p<s;p++)if(g._contains(o[p],k[h])){e.push(k[h]);
break}}}else e=[];e.each=r;return e}function e(a,c){var b=a&&h(a,"class");return b&&(b=b.replace(/[\r\t\n]/g,s))&&-1<(s+b+s).indexOf(s+c+s)}function h(a,c){var b=a&&a.getAttributeNode(c);if(b&&b.specified)return"value"in b?b.value:b.nodeValue}function a(a,b){return"*"===b||a.nodeName.toLowerCase()===b.toLowerCase()}var g=k("./api"),n=k("util"),f=document,c=f.documentElement,o=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.oMatchesSelector||c.msMatchesSelector,z=n.isArray,b,i=n.makeArray,
v=g.isDomNodeList,s=" ",w=Array.prototype.push,H=/^\.([\w-]+)$/,C=/^#([\w-]+)$/,I=/^([\w-])+$/,F=/^([\w-]+)#([\w-]+)$/,u=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,B=n.trim;b="getElementsByClassName"in f?function(a,b){return a.getElementsByClassName(b)}:function(a,b){var c=[],e=a.getElementsByTagName("*"),d,f,b=" "+b+" ";for(d=0;d<e.length;d++)f=e[d],-1<(" "+(f.className||f.getAttribute("class"))+" ").indexOf(b)&&c.push(f);return c};var p="sourceIndex"in c?function(a,b){return a.sourceIndex-b.sourceIndex}:
function(a,b){return!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1};n.mix(g,{_getElementsByTagName:function(a,b){return i(b.querySelectorAll(a))},_getElementById:function(a,b){return b.getElementById(a)},_getSimpleAttr:h,_isTag:a,_hasSingleClass:e,_matchesInternal:function(a,b){for(var c=[],e=0,d,f=b.length;e<f;e++)d=b[e],o.call(d,a)&&c.push(d);return c},_selectInternal:function(a,b){return i(b.querySelectorAll(a))},query:l,
get:function(a,b){return l(a,b)[0]||null},unique:function(){function a(c,e){return c===e?(b=!0,0):p(c,e)}var b,c=!0;[0,0].sort(function(){c=!1;return 0});return function(e){b=c;e.sort(a);if(b)for(var d=1,f=e.length;d<f;)e[d]===e[d-1]?(e.splice(d,1),--f):d++;return e}}(),filter:function(b,c,d){var b=l(b,d),f,i,j,k,d=[];if("string"===typeof c&&(c=B(c))&&(j=u.exec(c)))f=j[1],i=j[2],k=j[3],f?f&&!i&&!k&&(c=function(a){return h(a,"id")===f}):c=function(b){var c=!0,d=!0;i&&(c=a(b,i));k&&(d=e(b,k));return d&&
c};return d="function"===typeof c?n.filter(b,c):g._matchesInternal(c,b)},test:function(a,b,c){a=l(a,c);return a.length&&g.filter(a,b,c).length===a.length}})});
KISSY.add("dom/base/traversal",["util","./api"],function(x,k){function r(e,h,a,g,k,f,c){if(!(e=j.get(e)))return null;if(0===h)return e;f||(e=e[a]);if(!e)return null;k=k&&j.get(k)||null;void 0===h&&(h=1);var f=[],m=d.isArray(h),r,b;"number"===typeof h&&(r=0,b=h,h=function(){return++r===b});for(;e&&e!==k;){if((e.nodeType===l.ELEMENT_NODE||e.nodeType===l.TEXT_NODE&&c)&&t(e,h)&&(!g||g(e)))if(f.push(e),!m)break;e=e[a]}return m?f:f[0]||null}function t(e,h){if(!h)return!0;if(d.isArray(h)){var a,g=h.length;
if(!g)return!0;for(a=0;a<g;a++)if(j.test(e,h[a]))return!0}else if(j.test(e,h))return!0;return!1}function m(e,h,a,g){var k=[],f,c;if((f=e=j.get(e))&&a)f=e.parentNode;if(f){a=d.makeArray(f.childNodes);for(f=0;f<a.length;f++)c=a[f],(g||c.nodeType===l.ELEMENT_NODE)&&c!==e&&k.push(c);h&&(k=j.filter(k,h))}return k}var d=k("util"),j=k("./api"),l=j.NodeType;d.mix(j,{_contains:function(e,d){return!!(e.compareDocumentPosition(d)&16)},closest:function(e,d,a,g){return r(e,d,"parentNode",function(a){return a.nodeType!==
l.DOCUMENT_FRAGMENT_NODE},a,!0,g)},parent:function(e,d,a){return r(e,d,"parentNode",function(a){return a.nodeType!==l.DOCUMENT_FRAGMENT_NODE},a,void 0)},first:function(e,d,a){e=j.get(e);return r(e&&e.firstChild,d,"nextSibling",void 0,void 0,!0,a)},last:function(e,d,a){e=j.get(e);return r(e&&e.lastChild,d,"previousSibling",void 0,void 0,!0,a)},next:function(e,d,a){return r(e,d,"nextSibling",void 0,void 0,void 0,a)},prev:function(e,d,a){return r(e,d,"previousSibling",void 0,void 0,void 0,a)},siblings:function(e,
d,a){return m(e,d,!0,a)},children:function(e,d){return m(e,d,void 0)},contents:function(e,d){return m(e,d,void 0,1)},contains:function(e,d){e=j.get(e);d=j.get(d);return e&&d?j._contains(e,d):!1},index:function(e,h){var a=j.query(e),g,k=0;g=a[0];if(!h){a=g&&g.parentNode;if(!a)return-1;for(;g=g.previousSibling;)g.nodeType===l.ELEMENT_NODE&&k++;return k}k=j.query(h);return"string"===typeof h?d.indexOf(g,k):d.indexOf(k[0],a)},equals:function(e,d){e=j.query(e);d=j.query(d);if(e.length!==d.length)return!1;
for(var a=e.length;0<=a;a--)if(e[a]!==d[a])return!1;return!0}})});
