/*
Copyright 2014, KISSY v1.50
MIT Licensed
build time: Jan 17 12:30
*/
KISSY.add("navigation-view/bar/bar-xtpl",[],function(){return function(i){var b,d=this;b=this.config.utils;var a=b.runBlockCommand,k=b.renderOutput,f=b.getProperty,m=b.runInlineCommand,l=b.getPropertyOrRunCommand;b="";var n={},o=[],f=f(d,i,"withTitle",0,1);o.push(f);n.params=o;n.fn=function(b){var a;a='\r\n<div class="';var c={},e=[];e.push("title-wrap");c.params=e;c=m(d,b,c,"getBaseCssClasses",2);a+=k(c,!0);a+='">\r\n    <div class="';c={};e=[];e.push("title");c.params=e;c=m(d,b,c,"getBaseCssClasses",
3);a+=k(c,!0);a+='" id="ks-navigation-bar-title-';c=l(d,b,{},"id",0,3);a+=k(c,!0);a+='">';b=l(d,b,{},"title",0,3);a+=k(b,!0);return a+"</div>\r\n</div>\r\n"};b+=a(d,i,n,"if",1);b+='\r\n<div class="';a={};f=[];f.push("content");a.params=f;a=m(d,i,a,"getBaseCssClasses",6);b+=k(a,!0);b+='" id="ks-navigation-bar-content-';a=l(d,i,{},"id",0,6);b+=k(a,!0);b+='">\r\n    <div class="';a={};f=[];f.push("center");a.params=f;a=m(d,i,a,"getBaseCssClasses",7);b+=k(a,!0);b+='" id="ks-navigation-bar-center-';i=
l(d,i,{},"id",0,7);b+=k(i,!0);return b+'"></div>\r\n</div>'}});
KISSY.add("navigation-view/bar/bar-render",["./bar-xtpl","component/control"],function(i,b){var d=b("./bar-xtpl");return b("component/control").getDefaultRender().extend({createDom:function(){var a={centerEl:"#ks-navigation-bar-center-{id}",contentEl:"#ks-navigation-bar-content-{id}"};this.control._withTitle&&(a.titleEl="#ks-navigation-bar-title-{id}");this.fillChildrenElsBySelectors(a)},_onSetTitle:function(a){this.control._withTitle&&this.control.get("titleEl").html(a)},_onSetBackText:function(a){this.control._backBtn&&
this.control._backBtn.set("content",a)}},{ATTRS:{contentTpl:{value:d}}})});
KISSY.add("navigation-view/bar",["component/control","./bar/bar-render","button"],function(i,b){function d(c){var e;e=c.clone(!0);e[0].id=c[0].id+"-proxy";c.parent().append(e);var a=c.offset();e.css("position","absolute");e.offset(a);e.css({width:c.css("width"),height:c.css("height")});return e}function a(c,e,a){c.animate(e,{duration:0.25,useTransition:!0,easing:"ease-in-out",complete:a})}function k(c,a,b,h){var g=c.get("el"),d=c.get("titleEl"),c=Math.min(g[0].offsetWidth/3,200),f=a[0].offsetWidth,
a=g[0].offsetWidth,g=d.offset().left-g.offset().left,d=d[0].offsetWidth,j=b.width,i;h?(b=-j,j=Math.min(g-j,c)):(j=-j,b=Math.min(g,c));c={element:{from:{transform:"translateX("+b+"px) translateZ(0)"},to:{transform:"translateX(0) translateZ(0)",opacity:1}},ghost:{to:{transform:"translateX("+j+"px) translateZ(0)",opacity:0}}};f=-g+f;d>g&&(i=-g-d);h?(j=a-g-d,b=void 0!==i?i:f):(j=void 0!==i?i:f,b=Math.max(0,a-g-d));return{back:c,title:{element:{from:{transform:"translateX("+b+"px) translateZ(0)"},to:{transform:"translateX(0) translateZ(0)",
opacity:1}},ghost:{to:{transform:"translateX("+j+"px) translateZ(0)",opacity:0}}}}}function f(){this.fire("backward")}function m(){this.get("navigationView").pop()}function l(c){this.set("title",c.newView.get("title")||"")}function n(c){var a=c.newView,b=c.backward;if(c.oldView)this[b?"backward":"forward"](a.get("title")||"")}var o=b("component/control"),q=b("./bar/bar-render"),p=b("button");return o.extend({initializer:function(){this._withTitle=this.get("withTitle");this._stack=[];this.publish("backward",
{defaultFn:m,defaultTargetOnly:!0})},renderUI:function(){var c=this.get("prefixCls");this._buttons={};this.get("withBackButton")&&(this._backBtn=(new p({prefixCls:c+"navigation-bar-",elCls:c+"navigation-bar-backward",elBefore:this.get("contentEl")[0].firstChild,visible:!1,content:this.get("backText")})).render())},bindUI:function(){if(this._backBtn)this._backBtn.on("click",f,this);var c=this.get("navigationView");c.on("afterInnerViewChange",l,this);c.on("beforeInnerViewChange",n,this)},addButton:function(c,
a){var b=this.get("prefixCls");a.prefixCls=b+"navigation-bar-";!a.elBefore&&!a.render&&(b=a.align=a.align||"left","left"===b?a.elBefore=this.get("centerEl"):"right"===b&&(a.render=this.get("contentEl")),delete a.align);this._buttons[c]=(new p(a)).render();return this._buttons[c]},insertButtonBefore:function(a,b,d){b.elBefore=d.get("el");return this.addButton(a,b)},removeButton:function(a){this._buttons[a].destroy();delete this._buttons[a]},getButton:function(a){return this._buttons[a]},forward:function(a){this._stack.push(a);
this.go(a,!0)},go:function(b,e,i){var h=this,g=h._backBtn;if(!g||!h._withTitle){if(h._withTitle&&h.get("titleEl").html(b),g)g[e?"show":"hide"]()}else{var f=g.get("el");f.stop(!0);h.ghostBackEl&&h.ghostBackEl.stop(!0);var m={width:f[0].offsetWidth},j=d(f);h.ghostBackEl=j;f.css("opacity",0);g[e?"show":"hide"]();h.ghostBackEl&&h.ghostBackEl.stop(!0);e=k(h,f,m,i);f.css(e.back.element.from);g.get("visible")&&a(f,e.back.element.to);"none"!==j.css("display")?a(j,e.back.ghost.to,function(){j.remove();h.ghostBackEl=
null}):(j.remove(),h.ghostBackEl=null);g=h.get("titleEl");g.stop(!0);var l=d(g.parent());h.ghostTitleEl=l;g.css("opacity",0);h.set("title",b);g.css(e.title.element.from);a(g,e.title.element.to);a(l,e.title.ghost.to,function(){l.remove();h.ghostTitleEl=null})}},backward:function(a){this._stack.length&&(this._stack.pop(),this.go(a,this._stack.length,!0))}},{xclass:"navigation-bar",ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},xrender:{value:q},centerEl:{},contentEl:{},titleEl:{},title:{value:"",
view:1},withBackButton:{value:1},withTitle:{value:1,view:1},backText:{value:"Back",view:1}}})});
